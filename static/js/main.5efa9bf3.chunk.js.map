{"version":3,"sources":["wasm/cvc5.js","interfaces/enum.ts","store/hooks.ts","store/features/file/fileSlice.ts","store/features/proof/auxi.ts","store/features/theme/auxi.ts","store/features/proof/proofSlice.ts","store/features/theme/themeSlice.ts","store/features/externalCmd/externalCmd.ts","examples/proofs-examples.ts","components/VisualizerNavbar/VisualizerNavbar.tsx","components/VisualizerDialog/VisualizerDialog.tsx","components/VisualizerStage/Canvas/VisualizerNode.tsx","components/VisualizerStage/Canvas/VisualizerLine.tsx","components/VisualizerStage/Canvas/VisualizerMenu.tsx","components/VisualizerStage/Canvas/VisualizerCanvas.tsx","components/VisualizerTree/VisualizerTree.tsx","components/VisualizerLetDrawer/let.ts","components/VisualizerLetDrawer/LetRender.tsx","components/VisualizerStage/VisualizerDirectoryStyle/VisualizerDirectoryStyle.tsx","components/VisualizerStage/VisualizerStage.tsx","components/VisualizerLetDrawer/VisualizerLetDrawer.tsx","components/VisualizerTheoryLemma/VisualizerTheoryLemma.tsx","components/VisualizersDrawer/VisualizersDrawer.tsx","components/VisualizerTutorial/TutorialPopover.tsx","components/VisualizerTutorial/VisualizerTutorial.tsx","components/VisualizerSmtDrawer/VisualizerSmtDrawer.tsx","components/App/App.tsx","store/store.ts","ReactUtils/reportWebVitals.ts","index.tsx"],"names":["Module","_scriptDir","window","location","href","match","readyPromiseResolve","readyPromiseReject","Promise","resolve","reject","read_","readAsync","readBinary","moduleOverrides","Object","assign","arguments_","thisProgram","quit_","status","toThrow","scriptDirectory","document","currentScript","src","indexOf","substr","replace","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","onload","onerror","responseType","response","out","err","wasmMemory","WebAssembly","abort","EXITSTATUS","ABORT","assert","condition","text","getCFunc","ident","ccall","returnType","argTypes","args","opts","toC","string","str","ret","undefined","len","length","outPtr","maxBytesToWrite","stringToUTF8Array","HEAPU8","stringToUTF8","stackAlloc","array","arr","writeArrayToMemory","func","cArgs","stack","i","converter","stackSave","apply","stackRestore","UTF8ToString","Boolean","convertReturnValue","onDone","buffer","HEAP8","HEAP16","HEAP32","HEAPU32","wasmTable","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","decode","subarray","u0","u1","u2","String","fromCharCode","ch","ptr","heap","outIdx","startIdx","u","charCodeAt","lengthBytesUTF8","set","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATPOSTRUN__","runDependencies","runDependencyWatcher","dependenciesFulfilled","addRunDependency","id","removeRunDependency","clearInterval","callback","what","e","RuntimeError","wasmBinaryFile","tempDouble","tempI64","isDataURI","filename","startsWith","getBinary","file","callRuntimeCallbacks","callbacks","shift","wasmTableMirror","ExceptionInfo","excPtr","this","set_type","type","get_type","set_destructor","destructor","get_destructor","set_refcount","refcount","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","init","set_adjusted_ptr","add_ref","value","release_ref","prev","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","PATH","isAbs","path","charAt","splitPath","exec","slice","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","normalize","isAbsolute","trailingSlash","split","filter","p","join","dirname","result","root","dir","basename","lastSlash","paths","Array","prototype","call","arguments","join2","l","r","PATH_FS","resolvedPath","resolvedAbsolute","FS","cwd","TypeError","relative","from","to","trim","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","push","concat","TTY","ttys","shutdown","register","dev","ops","input","output","registerDevice","stream_ops","stream","tty","node","rdev","ErrnoError","seekable","close","flush","read","offset","pos","get_char","bytesRead","timestamp","Date","now","write","put_char","default_tty_ops","prompt","readline","intArrayFromString","val","default_tty1_ops","mmapAlloc","size","MEMFS","ops_table","mount","createNode","parent","name","mode","isBlkdev","isFIFO","getattr","node_ops","setattr","lookup","mknod","rename","unlink","rmdir","readdir","symlink","llseek","allocate","mmap","msync","link","readlink","chrdev","chrdev_stream_ops","isDir","contents","isFile","usedBytes","isLink","isChrdev","getFileDataAsTypedArray","Uint8Array","expandFileStorage","newCapacity","prevCapacity","max","oldContents","resizeFileStorage","newSize","attr","ino","nlink","uid","gid","atime","mtime","ctime","blksize","blocks","ceil","genericErrors","old_node","new_dir","new_name","new_node","lookupNode","entries","key","hasOwnProperty","newname","oldpath","position","canOwn","whence","prot","flags","allocated","byteOffset","mmapFlags","mounts","devices","streams","nextInode","nameTable","currentPath","initialized","ignorePermissions","filesystems","syncFSRequests","lookupPath","defaults","follow_mount","recurse_count","current","current_path","islast","isMountpoint","mounted","follow","count","getPath","isRoot","mountpoint","hashName","parentid","hash","hashAddNode","name_next","hashRemoveNode","errCode","mayLookup","nodeName","FSNode","destroyNode","isSocket","flagModes","w","a","modeStringToFlags","Error","flagsToPermissionString","flag","perms","nodePermissions","includes","mayCreate","mayDelete","isdir","errno","mayOpen","MAX_OPEN_FDS","nextfd","fd_start","fd_end","fd","getStream","createStream","FSStream","shared","defineProperties","object","get","isRead","isWrite","isAppend","closeStream","device","getDevice","major","minor","makedev","ma","mi","getMounts","check","m","pop","syncfs","populate","completed","doCallback","done","errored","forEach","pseudo","mountRoot","unmount","keys","next","create","mkdir","mkdirTree","dirs","d","mkdev","newpath","old_path","new_path","old_dir","old_dirname","new_dirname","old_name","stat","dontFollow","lstat","chmod","lchmod","fchmod","chown","lchown","fchown","truncate","ftruncate","utime","created","ungotten","error","readFiles","isClosed","getdents","seeking","bytesWritten","munmap","ioctl","cmd","arg","readFile","encoding","buf","writeFile","data","actualNumBytes","ArrayBuffer","isView","byteLength","chdir","createDefaultDirectories","createDefaultDevices","random_device","crypto","randomBuffer","getRandomValues","getRandomDevice","createDevice","createSpecialDirectories","proc_self","createStandardStreams","ensureErrnoError","setErrno","message","constructor","code","staticInit","quit","getMode","canRead","canWrite","findObject","dontResolveLastLink","analyzePath","exists","parentExists","parentPath","parentObject","createPath","reverse","part","createFile","properties","createDataFile","forceLoadFile","obj","isDevice","isFolder","createLazyFile","LazyUint8Array","lengthKnown","chunks","chunkOffset","chunkSize","chunkNum","getter","setDataGetter","cacheLength","header","datalength","Number","getResponseHeader","hasByteServing","usesGzip","lazyArray","setRequestHeader","overrideMimeType","doXHR","_length","_chunkSize","writeChunks","fn","createPreloadedFile","dontCreateFile","preFinish","fullname","processData","byteArray","finish","Browser","handledByPreloadPlugin","noRunDep","dep","arrayBuffer","event","asyncLoad","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","DB_NAME","pathname","DB_VERSION","DB_STORE_NAME","saveFilesToDB","openRequest","onupgradeneeded","createObjectStore","onsuccess","transaction","files","objectStore","ok","fail","total","putRequest","put","loadFilesFromDB","db","getRequest","SYSCALLS","DEFAULT_POLLMASK","calculateAt","dirfd","allowEmpty","dirstream","doStat","abs","floor","getTime","doMsync","addr","varargs","getStr","getStreamFromFD","PIPEFS","BUCKET_BUFFER_SIZE","createPipe","pipe","buckets","refcnt","roffset","rName","nextname","wName","rNode","wNode","readableStream","writableStream","readable_fd","writable_fd","poll","bucket","request","fsync","currentLength","toRead","totalRead","toRemove","currBucket","bucketSize","tmpSlice","dataLen","freeBytesInCurrBuffer","numBuckets","remElements","newBucket","_emscripten_get_now","performance","ENV","getEnvStrings","strings","env","USER","LOGNAME","PWD","HOME","LANG","navigator","languages","_","x","__isLeapYear","year","__MONTH_DAYS_LEAP","__MONTH_DAYS_REGULAR","_strftime","s","maxsize","format","tm","tm_zone","date","tm_sec","tm_min","tm_hour","tm_mday","tm_mon","tm_year","tm_wday","tm_yday","tm_isdst","tm_gmtoff","pattern","EXPANSION_RULES_1","rule","RegExp","WEEKDAYS","MONTHS","leadingSomething","digits","character","toString","leadingNulls","compareByDay","date1","date2","sgn","compare","getFullYear","getMonth","getDate","getFirstWeekStartDate","janFourth","getDay","getWeekBasedYear","thisDate","days","newDate","leap","currentMonth","daysInCurrentMonth","setDate","setMonth","setFullYear","__addDays","janFourthThisYear","janFourthNextYear","firstWeekStartThisYear","firstWeekStartNextYear","EXPANSION_RULES_2","substring","twelveHour","index","sum","__arraySum","jan1","dec31","off","ahead","bytes","readMode","writeMode","stringy","dontAddNull","u8array","numBytesWritten","calledRun","asmLibraryArg","fp","sig","funcPtr","getWasmTableEntry","_malloc","b","h","___errno_location","y","op","argp","z","t","fdPtr","res","q","j","c","k","dest","num","copyWithin","o","requestedSize","v","__environ","environ_buf","bufSize","writeAsciiToMemory","penviron_count","penviron_buf_size","exit","g","pbuf","iov","iovcnt","pnum","curr","doReadv","offset_low","offset_high","newOffset","hi","lo","NaN","isNaN","f","doWritev","procExit","n","info","receiveInstance","instance","module","cb","exports","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","receiveInstantiationResult","instantiateArrayBuffer","receiver","fetch","credentials","then","catch","binary","instantiate","reason","instantiateStreaming","createWasm","ExitStatus","numericArgs","every","callMain","entryFunction","argc","argv","argv_ptr","allocateUTF8OnStack","handleException","run","shouldRunNow","implicit","runCaller","ready","drawerHelpersKind","renderLetKind","ClusterKind","useAppDispatch","useDispatch","useAppSelector","useSelector","fileSlice","createSlice","initialState","filesCount","reducers","state","action","payload","actions","selectFileName","selectDot","JSON","parse","dot","selectFileCount","removeEscapedCharacters","newS","descendants","proof","nodeId","children","reduce","acc","childId","sliceNodesCluster","clusterMap","slicedClusters","currentNode","parentsClusters","parents","clusterType","target","clusterID","child","extractTheoryLemmas","clusters","haveCluster","conclusion","TL","map","hiddenNodes","colorConverter","colorName","color","proofSlice","view","style","letMap","theoryLemmaMap","visualInfo","clustersInfos","smt","process","proofJSON","isJSON","nodes","dependencies","NONE","comment","line","search","label","thisType","numbers","SAT","CNF","PP","IN","parseInt","attributes","commentJSON","subProofQty","processDot","clustersColors","clustersMap","fill","cluster","selected","hideNodes","toHideNodes","hiddenNodesArray","clusteredNodes","hiddenNode","hiddenID","some","_p","pastCluster","stringify","clusterParents","parentCluster","findNodesClusters","piNodeId","foldAllDescendants","self","unhideNodes","pi","hiddens","setVisualInfo","selectNodes","unselectNodes","changeStyle","applyView","visualInfoSize","proofSize","applyColor","setSmt","selectProof","piNodeChildren","haveHiddenParent","piNodeParents","piNodeDependencies","depMap","piId","depsId","groupPiNodeDependencies","piNode","proofNode","parentId","highHierarchyNodes","ac","childID","selectOriginalProof","selectView","selectStyle","selectLetMap","selectTheoryLemmas","selectVisualInfo","selectHiddenNodes","selectNodeClusters","selectSmt","themeSlice","toggle","selectTheme","theme","externalCmd","findData","nodeToFind","findOption","renderData","fileChanged","findNode","option","reRender","addRenderCount","blockRender","allowRenderNewFile","blockRenderNewFile","selectFindData","selectRenderData","examples","ex1","ex2","isNotMozz","userAgent","isNotMozzila","mapDispatchToProps","connect","ownProps","setDialogIsOpen","setDrawerIsOpen","addErrorToast","setInTutorial","setSmtDrawerIsOpen","inTutorial","fileName","darkTheme","windowSize","useState","width","height","setWindowSize","useEffect","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","command","setCommand","lastCommands","setLastCommands","commandId","setCommandId","matchableCmd","setMatchableCmd","matchableCmdIsOpen","setMatchableCmdIsOpen","dispatch","commandsMap","cmds","cmdArg","matches","matchAll","idList","insideBracket","insideMatches","rangeLim","numS","listStr","word","argMatch","argIsConclusion","regexString","regex","test","allNodesIds","hiddenIds","findIndex","find","commands","useRef","runCommands","exportJSON","downloadJSON","fName","createElement","download","encodeURIComponent","click","exportPNG","preventDefault","graph","getElementsByClassName","toDataURL","runExample","ex","isPseudoClick","menus","className","icon","onClick","onKeyDown","role","help","tabIndex","criticalWidth","Group","align","Alignment","LEFT","Heading","Divider","content","placement","modifiers","arrow","enabled","RIGHT","autoFocus","enforceFocus","list","renderMatchableCmd","isOpen","disabled","placeholder","onChange","findMatchableCmd","newId","rightElement","onFocusCapture","blur","autoComplete","marginLeft","stopPropagation","currentTarget","checked","readUploadedFileAsText","inputFile","temporaryFileReader","FileReader","DOMException","readAsText","VisualizerDialog","dialogIsOpen","inputIsFocused","setInputIsFocused","changeFileName","changeFile","useReducer","newFlag","focusFlag","flagCount","setFocusFlag","Classes","DIALOG_BODY","childNodes","focus","DIALOG_FOOTER_ACTIONS","closeDialog","dialogBody","outline","borderRadius","hasSelection","onInputChange","File","fileContents","onFocus","onBlur","succesButton","ext","intent","Intent","SUCCESS","onClose","usePortal","title","DIALOG_FOOTER","textColorFromBg","bgColor","sixDigitColor","Node","props","nHided","nDescendants","setNodeOnFocus","toggleNodeSelection","updateNodePosition","openDrawer","onDragEnd","createTree","tag","stroke","strokeWidth","fontSize","padding","depText","depSize","infos","idSize","setIdSize","descendantSize","setDescendantSize","font","calc","context","getContext","measureText","getTextWidth","draggable","onDragMove","attrs","evt","button","shiftKey","menuNode","getElementById","top","clientY","left","clientX","display","points","depLineSize","radius","Line","Menu","unfold","foldSelectedNodes","changeNodeColor","currentColor","options","setColor","foldSelected","vertical","handleWheel","stage","getStage","oldScale","scaleX","pointerPosition","getPointerPosition","mousePointTo","newScale","deltaY","stageScale","stageX","stageY","Canvas","nodeOnFocus","setState","nodesSelected","showingNodes","LineProps","saveNodePosition","copyNodePosition","showingEdges","edgeKey","edge","componentDidUpdate","bind","canvasSize","newShowingNodes","newNodeProps","updateEdgesAndFuncs","prevProps","found","onWheel","scaleY","onContextMenu","current_state","proofChanged","visualInfoChanged","nodeFindData","nodeWidth","nodeHeight","dagre","graphlib","Graph","setGraph","rankdir","ranker","setDefaultEdgeLabel","setNode","setEdge","layout","xOffset","yOffset","console","log","Component","newVisualInfo","visualInfos","VisualizerTree","positionMap","setNodeInfo","forceUpdate","setNodes","setSelected","forEachNode","backgroundColor","onNodeClick","nodeData","_nodePath","toBeShow","originallySelected","isSelected","onNodeCollapse","isExpanded","onNodeExpand","hasCaret","castProofNodeToTreeNode","ELEVATION_0","Let","letText","letsList","indices","lines","biggerID","externalLets","expandValue","shouldUpdate","keyList","let","letName","indentLevel","expandPartialy","externalRef","letIdx","indentedText","printLines","lastLine","newIdx","shrinkValue","fitsTheWindow","repeat","indent","someDoesntFit","newLines","thisLevel","thisLine","lastSpace","lastUsedSpace","lastOpenParenthesis","biggestSize","newBiggerID","thisSize","groupUp","original","numKey","LetRender","toRender","shouldExpand","shouldRevert","dispatchExpansion","widthRef","resizeMode","setResizeMode","newMap","letMapS","setLetMapS","letsRef","initializeLet","lets","currentLet","indice","newWidth","clientWidth","expandAll","EXPAND","revertLet","REVERT","maxHeight","overflow","margin","whiteSpace","thisLet","expandLet","overflowWrap","renderLet","VisualizerDirectoryStyle","proofTree","ruleHelper","translate","nodeInfo","ALL","ruleHelperIsOpen","argsHelperIsOpen","concHelperIsOpen","dispatchHelper","revertAll","dispatchLetExpansion","setMap","renderID","increaseRenderID","_map","offsetHeight","float","clear","borderRight","RULE","ARGS","CONC","dependency","secondaryLabel","parentsId","rootNode","tree","VisualizerStage","fileID","setProofTree","drawerIsOpen","setTree","canEscapeKeyClose","canOutsideClickClose","hasBackdrop","Position","BOTTOM","DRAWER_BODY","VisualizerLetDrawer","shouldResize","setLetMap","VisualizerTheoryLemma","theoryLemmas","setTheoryLemmas","tl","currentTL","minWidth","VisualizersDrawer","nodeClusters","tabID","setTabID","resizeFlag","setResizeFlag","bt","handleClusterClick","theoryLemma","newTabId","newResizeFlag","selectedTabId","panel","TutorialPopover","setIsOpen","nextTutorial","W","page","setPage","changePage","setTimeout","handleEsc","tW","borderBottomColor","positions","rel","insertAnchors","divsIds","tutorials","VisualizerTutorial","setStage","setPosition","sizeRef","toBeWrapped","getClientRects","newY","newX","newTW","pointerEvents","VisualizerSmtDrawer","proofSmt","stdoutRef","stderrRef","changeOutRef","optionsIsOpen","setOptionsIsOpen","textRef","argsType","setArgsType","shouldClusterize","printAsDag","setDefaultOptions","customArgs","setCustomArgs","defaultArgs","newArgs","divColor","helpDiv","maxWidth","boxShadow","textAlign","defaultArgsDiv","shouldClusterizeDiv","printAsDagDiv","updateStdout","updateStderr","postCVC5run","isThereError","replaceAll","cleanStdout","language","onMount","hoverCloseDelay","hoverOpenDelay","borderBottom","borderTop","proofTxt","postCVC5","binaryFileName","App","toaster","setDrawerOpenState","smtDrawerIsOpen","refHandlers","ref","show","DANGER","TOP","store","configureStore","reducer","fileReducer","proofReducer","themeReducer","externalCmdReducer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5efa9bf3.chunk.js","sourcesContent":["/* eslint-disable */\n/*\nAuthor: Vinícius Braga Freire (vinicius.braga.freire@gmail.com)\nDescription: WebAssembly glue code used to run cvc5 inside React web application.\nCompilation: the glue code and wasm were generated through the cvc5 bash in the \n                https://github.com/ufmg-smite/cvc5-wasm repository. The flags \n                passed to the emscripten compiler were:\n    -s EXPORTED_FUNCTIONS=_main             # Add the main as an exported \n                                            # function, but it's not necessary \n                                            # because the main() is already \n                                            # called when the Module is called.\n    -s EXPORTED_RUNTIME_METHODS=ccall,cwrap # Export JS functions that allow the \n                                            # user to call an exported function.\n    -s INCOMING_MODULE_JS_API=arguments     # Add the argument parsing to the \n                                            # Module.\n    -s INVOKE_RUN=1                         # Whether we will run the main() \n                                            # function.\n    -s EXIT_RUNTIME=0                       # If 0, the runtime is not quit when \n                                            # main() completes (allowing code to\n                                            # run afterwards, for example from \n                                            # the browser main event loop).\n    -s ENVIRONMENT=web                      # Signs that the wasm will run in \n                                            # the browser.\n    -s MODULARIZE                           # Make the glue code as an \n                                            # exportable function, just like a \n                                            # Module.\nObservations: The modifications made in the original glue code are the ones that\n                precedes of comments with //.\n              The changed functions/parts of the code to look at are:\n                - The definition of the wasm file base directory\n                - The definition of the out and err functions\n                - The read of the arguments passed through the Module\n                - The postRun function\n                - The read of the wasm file name passed through the Module\n                - The handleException function\n                - The get_char function\n                - The run function\nLast Update: 22/07/2022\n*/\n\nvar Module = (() => {\n    // The base directory to the wasm file\n    var _scriptDir = window.location.href.match(/proof-visualizer\\//)\n        ? window.location.href\n        : window.location.href + 'proof-visualizer/';\n\n    // This function is responsible for running the web assembly\n    return function (Module) {\n        Module = Module || {};\n\n        var Module = typeof Module != 'undefined' ? Module : {};\n        var readyPromiseResolve, readyPromiseReject;\n        Module['ready'] = new Promise(function (resolve, reject) {\n            readyPromiseResolve = resolve;\n            readyPromiseReject = reject;\n        });\n        var moduleOverrides = Object.assign({}, Module);\n        var arguments_ = [];\n        var thisProgram = './this.program';\n        var quit_ = (status, toThrow) => {\n            throw toThrow;\n        };\n        var ENVIRONMENT_IS_WEB = true;\n        var ENVIRONMENT_IS_WORKER = false;\n        var scriptDirectory = '';\n        function locateFile(path) {\n            return scriptDirectory + path;\n        }\n        var read_, readAsync, readBinary, setWindowTitle;\n        if (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n            if (ENVIRONMENT_IS_WORKER) {\n                scriptDirectory = self.location.href;\n            } else if (typeof document != 'undefined' && document.currentScript) {\n                scriptDirectory = document.currentScript.src;\n            }\n            if (_scriptDir) {\n                scriptDirectory = _scriptDir;\n            }\n            if (scriptDirectory.indexOf('blob:') !== 0) {\n                scriptDirectory = scriptDirectory.substr(0, scriptDirectory.replace(/[?#].*/, '').lastIndexOf('/') + 1);\n            } else {\n                scriptDirectory = '';\n            }\n            {\n                read_ = (url) => {\n                    var xhr = new XMLHttpRequest();\n                    xhr.open('GET', url, false);\n                    xhr.send(null);\n                    return xhr.responseText;\n                };\n                if (ENVIRONMENT_IS_WORKER) {\n                    readBinary = (url) => {\n                        var xhr = new XMLHttpRequest();\n                        xhr.open('GET', url, false);\n                        xhr.responseType = 'arraybuffer';\n                        xhr.send(null);\n                        return new Uint8Array(xhr.response);\n                    };\n                }\n                readAsync = (url, onload, onerror) => {\n                    var xhr = new XMLHttpRequest();\n                    xhr.open('GET', url, true);\n                    xhr.responseType = 'arraybuffer';\n                    xhr.onload = () => {\n                        if (xhr.status == 200 || (xhr.status == 0 && xhr.response)) {\n                            onload(xhr.response);\n                            return;\n                        }\n                        onerror();\n                    };\n                    xhr.onerror = onerror;\n                    xhr.send(null);\n                };\n            }\n            setWindowTitle = (title) => (document.title = title);\n        } else {\n        }\n        // The out variable is the function that updates the stdout varible\n        // (it's in the react scope) and its argument is a string (the content\n        //  of the current stdout line to be written)\n        var out = Module['out'];\n        // The err is the same thing as out, but related to stderr\n        var err = Module['err'];\n        Object.assign(Module, moduleOverrides);\n        moduleOverrides = null;\n        // Assign the arguments passed through the Module (defined in the react\n        // scope) to a local variable. These arguments are arranged in an array\n        // of strings\n        if (Module['arguments']) arguments_ = Module['arguments'];\n        var wasmBinary;\n        var noExitRuntime = true;\n        if (typeof WebAssembly != 'object') {\n            abort('no native wasm support detected');\n        }\n        var wasmMemory;\n        var ABORT = false;\n        var EXITSTATUS;\n        function assert(condition, text) {\n            if (!condition) {\n                abort(text);\n            }\n        }\n        function getCFunc(ident) {\n            var func = Module['_' + ident];\n            return func;\n        }\n        function ccall(ident, returnType, argTypes, args, opts) {\n            var toC = {\n                string: function (str) {\n                    var ret = 0;\n                    if (str !== null && str !== undefined && str !== 0) {\n                        var len = (str.length << 2) + 1;\n                        ret = stackAlloc(len);\n                        stringToUTF8(str, ret, len);\n                    }\n                    return ret;\n                },\n                array: function (arr) {\n                    var ret = stackAlloc(arr.length);\n                    writeArrayToMemory(arr, ret);\n                    return ret;\n                },\n            };\n            function convertReturnValue(ret) {\n                if (returnType === 'string') {\n                    return UTF8ToString(ret);\n                }\n                if (returnType === 'boolean') return Boolean(ret);\n                return ret;\n            }\n            var func = getCFunc(ident);\n            var cArgs = [];\n            var stack = 0;\n            if (args) {\n                for (var i = 0; i < args.length; i++) {\n                    var converter = toC[argTypes[i]];\n                    if (converter) {\n                        if (stack === 0) stack = stackSave();\n                        cArgs[i] = converter(args[i]);\n                    } else {\n                        cArgs[i] = args[i];\n                    }\n                }\n            }\n            var ret = func.apply(null, cArgs);\n            function onDone(ret) {\n                if (stack !== 0) stackRestore(stack);\n                return convertReturnValue(ret);\n            }\n            ret = onDone(ret);\n            return ret;\n        }\n        function cwrap(ident, returnType, argTypes, opts) {\n            argTypes = argTypes || [];\n            var numericArgs = argTypes.every(function (type) {\n                return type === 'number';\n            });\n            var numericRet = returnType !== 'string';\n            if (numericRet && numericArgs && !opts) {\n                return getCFunc(ident);\n            }\n            return function () {\n                return ccall(ident, returnType, argTypes, arguments, opts);\n            };\n        }\n        var UTF8Decoder = typeof TextDecoder != 'undefined' ? new TextDecoder('utf8') : undefined;\n        function UTF8ArrayToString(heapOrArray, idx, maxBytesToRead) {\n            var endIdx = idx + maxBytesToRead;\n            var endPtr = idx;\n            while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n            if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n                return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n            } else {\n                var str = '';\n                while (idx < endPtr) {\n                    var u0 = heapOrArray[idx++];\n                    if (!(u0 & 128)) {\n                        str += String.fromCharCode(u0);\n                        continue;\n                    }\n                    var u1 = heapOrArray[idx++] & 63;\n                    if ((u0 & 224) == 192) {\n                        str += String.fromCharCode(((u0 & 31) << 6) | u1);\n                        continue;\n                    }\n                    var u2 = heapOrArray[idx++] & 63;\n                    if ((u0 & 240) == 224) {\n                        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n                    } else {\n                        u0 = ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n                    }\n                    if (u0 < 65536) {\n                        str += String.fromCharCode(u0);\n                    } else {\n                        var ch = u0 - 65536;\n                        str += String.fromCharCode(55296 | (ch >> 10), 56320 | (ch & 1023));\n                    }\n                }\n            }\n            return str;\n        }\n        function UTF8ToString(ptr, maxBytesToRead) {\n            return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : '';\n        }\n        function stringToUTF8Array(str, heap, outIdx, maxBytesToWrite) {\n            if (!(maxBytesToWrite > 0)) return 0;\n            var startIdx = outIdx;\n            var endIdx = outIdx + maxBytesToWrite - 1;\n            for (var i = 0; i < str.length; ++i) {\n                var u = str.charCodeAt(i);\n                if (u >= 55296 && u <= 57343) {\n                    var u1 = str.charCodeAt(++i);\n                    u = (65536 + ((u & 1023) << 10)) | (u1 & 1023);\n                }\n                if (u <= 127) {\n                    if (outIdx >= endIdx) break;\n                    heap[outIdx++] = u;\n                } else if (u <= 2047) {\n                    if (outIdx + 1 >= endIdx) break;\n                    heap[outIdx++] = 192 | (u >> 6);\n                    heap[outIdx++] = 128 | (u & 63);\n                } else if (u <= 65535) {\n                    if (outIdx + 2 >= endIdx) break;\n                    heap[outIdx++] = 224 | (u >> 12);\n                    heap[outIdx++] = 128 | ((u >> 6) & 63);\n                    heap[outIdx++] = 128 | (u & 63);\n                } else {\n                    if (outIdx + 3 >= endIdx) break;\n                    heap[outIdx++] = 240 | (u >> 18);\n                    heap[outIdx++] = 128 | ((u >> 12) & 63);\n                    heap[outIdx++] = 128 | ((u >> 6) & 63);\n                    heap[outIdx++] = 128 | (u & 63);\n                }\n            }\n            heap[outIdx] = 0;\n            return outIdx - startIdx;\n        }\n        function stringToUTF8(str, outPtr, maxBytesToWrite) {\n            return stringToUTF8Array(str, HEAPU8, outPtr, maxBytesToWrite);\n        }\n        function lengthBytesUTF8(str) {\n            var len = 0;\n            for (var i = 0; i < str.length; ++i) {\n                var u = str.charCodeAt(i);\n                if (u >= 55296 && u <= 57343) u = (65536 + ((u & 1023) << 10)) | (str.charCodeAt(++i) & 1023);\n                if (u <= 127) ++len;\n                else if (u <= 2047) len += 2;\n                else if (u <= 65535) len += 3;\n                else len += 4;\n            }\n            return len;\n        }\n        function allocateUTF8OnStack(str) {\n            var size = lengthBytesUTF8(str) + 1;\n            var ret = stackAlloc(size);\n            stringToUTF8Array(str, HEAP8, ret, size);\n            return ret;\n        }\n        function writeArrayToMemory(array, buffer) {\n            HEAP8.set(array, buffer);\n        }\n        function writeAsciiToMemory(str, buffer, dontAddNull) {\n            for (var i = 0; i < str.length; ++i) {\n                HEAP8[buffer++ >> 0] = str.charCodeAt(i);\n            }\n            if (!dontAddNull) HEAP8[buffer >> 0] = 0;\n        }\n        var buffer, HEAP8, HEAPU8, HEAP16, HEAPU16, HEAP32, HEAPU32, HEAPF32, HEAPF64;\n        function updateGlobalBufferAndViews(buf) {\n            buffer = buf;\n            Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n            Module['HEAP16'] = HEAP16 = new Int16Array(buf);\n            Module['HEAP32'] = HEAP32 = new Int32Array(buf);\n            Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n            Module['HEAPU16'] = HEAPU16 = new Uint16Array(buf);\n            Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n            Module['HEAPF32'] = HEAPF32 = new Float32Array(buf);\n            Module['HEAPF64'] = HEAPF64 = new Float64Array(buf);\n        }\n        var wasmTable;\n        var __ATPRERUN__ = [];\n        var __ATINIT__ = [];\n        var __ATMAIN__ = [];\n        var __ATPOSTRUN__ = [];\n        var runtimeInitialized = false;\n        function keepRuntimeAlive() {\n            return noExitRuntime;\n        }\n        function preRun() {\n            callRuntimeCallbacks(__ATPRERUN__);\n        }\n        function initRuntime() {\n            runtimeInitialized = true;\n            if (!Module['noFSInit'] && !FS.init.initialized) FS.init();\n            FS.ignorePermissions = false;\n            TTY.init();\n            PIPEFS.root = FS.mount(PIPEFS, {}, null);\n            callRuntimeCallbacks(__ATINIT__);\n        }\n        function preMain() {\n            callRuntimeCallbacks(__ATMAIN__);\n        }\n        // Function called after the cvc5 execution and no error happend\n        function postRun() {\n            callRuntimeCallbacks(__ATPOSTRUN__);\n            // Handle with the post cvc5 (end of execution) operations in the\n            // react scope. Signs that no error happend.\n            Module['postCVC5'](false);\n        }\n        function addOnInit(cb) {\n            __ATINIT__.unshift(cb);\n        }\n        var runDependencies = 0;\n        var runDependencyWatcher = null;\n        var dependenciesFulfilled = null;\n        function getUniqueRunDependency(id) {\n            return id;\n        }\n        function addRunDependency(id) {\n            runDependencies++;\n        }\n        function removeRunDependency(id) {\n            runDependencies--;\n            if (runDependencies == 0) {\n                if (runDependencyWatcher !== null) {\n                    clearInterval(runDependencyWatcher);\n                    runDependencyWatcher = null;\n                }\n                if (dependenciesFulfilled) {\n                    var callback = dependenciesFulfilled;\n                    dependenciesFulfilled = null;\n                    callback();\n                }\n            }\n        }\n        function abort(what) {\n            what = 'Aborted(' + what + ')';\n            err(what);\n            ABORT = true;\n            EXITSTATUS = 1;\n            what += '. Build with -sASSERTIONS for more info.';\n            var e = new WebAssembly.RuntimeError(what);\n            readyPromiseReject(e);\n            throw e;\n        }\n        var dataURIPrefix = 'data:application/octet-stream;base64,';\n        function isDataURI(filename) {\n            return filename.startsWith(dataURIPrefix);\n        }\n        var wasmBinaryFile;\n        // Definition of the binary file name\n        wasmBinaryFile = Module['binaryFileName'];\n        if (!isDataURI(wasmBinaryFile)) {\n            wasmBinaryFile = locateFile(wasmBinaryFile);\n        }\n        function getBinary(file) {\n            try {\n                if (file == wasmBinaryFile && wasmBinary) {\n                    return new Uint8Array(wasmBinary);\n                }\n                if (readBinary) {\n                    return readBinary(file);\n                } else {\n                    throw 'both async and sync fetching of the wasm failed';\n                }\n            } catch (err) {\n                abort(err);\n            }\n        }\n        function getBinaryPromise() {\n            if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER)) {\n                if (typeof fetch == 'function') {\n                    return fetch(wasmBinaryFile, { credentials: 'same-origin' })\n                        .then(function (response) {\n                            if (!response['ok']) {\n                                throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n                            }\n                            return response['arrayBuffer']();\n                        })\n                        .catch(function () {\n                            return getBinary(wasmBinaryFile);\n                        });\n                }\n            }\n            return Promise.resolve().then(function () {\n                return getBinary(wasmBinaryFile);\n            });\n        }\n        function createWasm() {\n            var info = { a: asmLibraryArg };\n            function receiveInstance(instance, module) {\n                var exports = instance.exports;\n                Module['asm'] = exports;\n                wasmMemory = Module['asm']['A'];\n                updateGlobalBufferAndViews(wasmMemory.buffer);\n                wasmTable = Module['asm']['C'];\n                addOnInit(Module['asm']['B']);\n                removeRunDependency('wasm-instantiate');\n            }\n            addRunDependency('wasm-instantiate');\n            function receiveInstantiationResult(result) {\n                receiveInstance(result['instance']);\n            }\n            function instantiateArrayBuffer(receiver) {\n                return getBinaryPromise()\n                    .then(function (binary) {\n                        return WebAssembly.instantiate(binary, info);\n                    })\n                    .then(function (instance) {\n                        return instance;\n                    })\n                    .then(receiver, function (reason) {\n                        err('failed to asynchronously prepare wasm: ' + reason);\n                        abort(reason);\n                    });\n            }\n            function instantiateAsync() {\n                if (\n                    !wasmBinary &&\n                    typeof WebAssembly.instantiateStreaming == 'function' &&\n                    !isDataURI(wasmBinaryFile) &&\n                    typeof fetch == 'function'\n                ) {\n                    return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(function (response) {\n                        var result = WebAssembly.instantiateStreaming(response, info);\n                        return result.then(receiveInstantiationResult, function (reason) {\n                            err('wasm streaming compile failed: ' + reason);\n                            err('falling back to ArrayBuffer instantiation');\n                            return instantiateArrayBuffer(receiveInstantiationResult);\n                        });\n                    });\n                } else {\n                    return instantiateArrayBuffer(receiveInstantiationResult);\n                }\n            }\n            if (Module['instantiateWasm']) {\n                try {\n                    var exports = Module['instantiateWasm'](info, receiveInstance);\n                    return exports;\n                } catch (e) {\n                    err('Module.instantiateWasm callback failed with error: ' + e);\n                    return false;\n                }\n            }\n            instantiateAsync().catch(readyPromiseReject);\n            return {};\n        }\n        var tempDouble;\n        var tempI64;\n        function callRuntimeCallbacks(callbacks) {\n            while (callbacks.length > 0) {\n                callbacks.shift()(Module);\n            }\n        }\n        var wasmTableMirror = [];\n        function getWasmTableEntry(funcPtr) {\n            var func = wasmTableMirror[funcPtr];\n            if (!func) {\n                if (funcPtr >= wasmTableMirror.length) wasmTableMirror.length = funcPtr + 1;\n                wasmTableMirror[funcPtr] = func = wasmTable.get(funcPtr);\n            }\n            return func;\n        }\n        // Function called after the cvc5 execution when an error happend\n        function handleException(e) {\n            if (e instanceof ExitStatus || e == 'unwind') {\n                return EXITSTATUS;\n            }\n            // Handle with the post cvc5 (end of execution) operations in the\n            // react scope and signs that a error happend.\n            Module['postCVC5'](true);\n            quit_(1, e);\n        }\n        function ___call_sighandler(fp, sig) {\n            getWasmTableEntry(fp)(sig);\n        }\n        function ___cxa_allocate_exception(size) {\n            return _malloc(size + 24) + 24;\n        }\n        function ExceptionInfo(excPtr) {\n            this.excPtr = excPtr;\n            this.ptr = excPtr - 24;\n            this.set_type = function (type) {\n                HEAPU32[(this.ptr + 4) >> 2] = type;\n            };\n            this.get_type = function () {\n                return HEAPU32[(this.ptr + 4) >> 2];\n            };\n            this.set_destructor = function (destructor) {\n                HEAPU32[(this.ptr + 8) >> 2] = destructor;\n            };\n            this.get_destructor = function () {\n                return HEAPU32[(this.ptr + 8) >> 2];\n            };\n            this.set_refcount = function (refcount) {\n                HEAP32[this.ptr >> 2] = refcount;\n            };\n            this.set_caught = function (caught) {\n                caught = caught ? 1 : 0;\n                HEAP8[(this.ptr + 12) >> 0] = caught;\n            };\n            this.get_caught = function () {\n                return HEAP8[(this.ptr + 12) >> 0] != 0;\n            };\n            this.set_rethrown = function (rethrown) {\n                rethrown = rethrown ? 1 : 0;\n                HEAP8[(this.ptr + 13) >> 0] = rethrown;\n            };\n            this.get_rethrown = function () {\n                return HEAP8[(this.ptr + 13) >> 0] != 0;\n            };\n            this.init = function (type, destructor) {\n                this.set_adjusted_ptr(0);\n                this.set_type(type);\n                this.set_destructor(destructor);\n                this.set_refcount(0);\n                this.set_caught(false);\n                this.set_rethrown(false);\n            };\n            this.add_ref = function () {\n                var value = HEAP32[this.ptr >> 2];\n                HEAP32[this.ptr >> 2] = value + 1;\n            };\n            this.release_ref = function () {\n                var prev = HEAP32[this.ptr >> 2];\n                HEAP32[this.ptr >> 2] = prev - 1;\n                return prev === 1;\n            };\n            this.set_adjusted_ptr = function (adjustedPtr) {\n                HEAPU32[(this.ptr + 16) >> 2] = adjustedPtr;\n            };\n            this.get_adjusted_ptr = function () {\n                return HEAPU32[(this.ptr + 16) >> 2];\n            };\n            this.get_exception_ptr = function () {\n                var isPointer = ___cxa_is_pointer_type(this.get_type());\n                if (isPointer) {\n                    return HEAPU32[this.excPtr >> 2];\n                }\n                var adjusted = this.get_adjusted_ptr();\n                if (adjusted !== 0) return adjusted;\n                return this.excPtr;\n            };\n        }\n        var exceptionLast = 0;\n        var uncaughtExceptionCount = 0;\n        function ___cxa_throw(ptr, type, destructor) {\n            var info = new ExceptionInfo(ptr);\n            info.init(type, destructor);\n            exceptionLast = ptr;\n            uncaughtExceptionCount++;\n            throw ptr;\n        }\n        var PATH = {\n            isAbs: (path) => path.charAt(0) === '/',\n            splitPath: (filename) => {\n                var splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n                return splitPathRe.exec(filename).slice(1);\n            },\n            normalizeArray: (parts, allowAboveRoot) => {\n                var up = 0;\n                for (var i = parts.length - 1; i >= 0; i--) {\n                    var last = parts[i];\n                    if (last === '.') {\n                        parts.splice(i, 1);\n                    } else if (last === '..') {\n                        parts.splice(i, 1);\n                        up++;\n                    } else if (up) {\n                        parts.splice(i, 1);\n                        up--;\n                    }\n                }\n                if (allowAboveRoot) {\n                    for (; up; up--) {\n                        parts.unshift('..');\n                    }\n                }\n                return parts;\n            },\n            normalize: (path) => {\n                var isAbsolute = PATH.isAbs(path),\n                    trailingSlash = path.substr(-1) === '/';\n                path = PATH.normalizeArray(\n                    path.split('/').filter((p) => !!p),\n                    !isAbsolute,\n                ).join('/');\n                if (!path && !isAbsolute) {\n                    path = '.';\n                }\n                if (path && trailingSlash) {\n                    path += '/';\n                }\n                return (isAbsolute ? '/' : '') + path;\n            },\n            dirname: (path) => {\n                var result = PATH.splitPath(path),\n                    root = result[0],\n                    dir = result[1];\n                if (!root && !dir) {\n                    return '.';\n                }\n                if (dir) {\n                    dir = dir.substr(0, dir.length - 1);\n                }\n                return root + dir;\n            },\n            basename: (path) => {\n                if (path === '/') return '/';\n                path = PATH.normalize(path);\n                path = path.replace(/\\/$/, '');\n                var lastSlash = path.lastIndexOf('/');\n                if (lastSlash === -1) return path;\n                return path.substr(lastSlash + 1);\n            },\n            join: function () {\n                var paths = Array.prototype.slice.call(arguments, 0);\n                return PATH.normalize(paths.join('/'));\n            },\n            join2: (l, r) => {\n                return PATH.normalize(l + '/' + r);\n            },\n        };\n        function getRandomDevice() {\n            if (typeof crypto == 'object' && typeof crypto['getRandomValues'] == 'function') {\n                var randomBuffer = new Uint8Array(1);\n                return function () {\n                    crypto.getRandomValues(randomBuffer);\n                    return randomBuffer[0];\n                };\n            } else\n                return function () {\n                    abort('randomDevice');\n                };\n        }\n        var PATH_FS = {\n            resolve: function () {\n                var resolvedPath = '',\n                    resolvedAbsolute = false;\n                for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n                    var path = i >= 0 ? arguments[i] : FS.cwd();\n                    if (typeof path != 'string') {\n                        throw new TypeError('Arguments to path.resolve must be strings');\n                    } else if (!path) {\n                        return '';\n                    }\n                    resolvedPath = path + '/' + resolvedPath;\n                    resolvedAbsolute = PATH.isAbs(path);\n                }\n                resolvedPath = PATH.normalizeArray(\n                    resolvedPath.split('/').filter((p) => !!p),\n                    !resolvedAbsolute,\n                ).join('/');\n                return (resolvedAbsolute ? '/' : '') + resolvedPath || '.';\n            },\n            relative: (from, to) => {\n                from = PATH_FS.resolve(from).substr(1);\n                to = PATH_FS.resolve(to).substr(1);\n                function trim(arr) {\n                    var start = 0;\n                    for (; start < arr.length; start++) {\n                        if (arr[start] !== '') break;\n                    }\n                    var end = arr.length - 1;\n                    for (; end >= 0; end--) {\n                        if (arr[end] !== '') break;\n                    }\n                    if (start > end) return [];\n                    return arr.slice(start, end - start + 1);\n                }\n                var fromParts = trim(from.split('/'));\n                var toParts = trim(to.split('/'));\n                var length = Math.min(fromParts.length, toParts.length);\n                var samePartsLength = length;\n                for (var i = 0; i < length; i++) {\n                    if (fromParts[i] !== toParts[i]) {\n                        samePartsLength = i;\n                        break;\n                    }\n                }\n                var outputParts = [];\n                for (var i = samePartsLength; i < fromParts.length; i++) {\n                    outputParts.push('..');\n                }\n                outputParts = outputParts.concat(toParts.slice(samePartsLength));\n                return outputParts.join('/');\n            },\n        };\n        var TTY = {\n            ttys: [],\n            init: function () {},\n            shutdown: function () {},\n            register: function (dev, ops) {\n                TTY.ttys[dev] = { input: [], output: [], ops: ops };\n                FS.registerDevice(dev, TTY.stream_ops);\n            },\n            stream_ops: {\n                open: function (stream) {\n                    var tty = TTY.ttys[stream.node.rdev];\n                    if (!tty) {\n                        throw new FS.ErrnoError(43);\n                    }\n                    stream.tty = tty;\n                    stream.seekable = false;\n                },\n                close: function (stream) {\n                    stream.tty.ops.flush(stream.tty);\n                },\n                flush: function (stream) {\n                    stream.tty.ops.flush(stream.tty);\n                },\n                read: function (stream, buffer, offset, length, pos) {\n                    if (!stream.tty || !stream.tty.ops.get_char) {\n                        throw new FS.ErrnoError(60);\n                    }\n                    var bytesRead = 0;\n                    for (var i = 0; i < length; i++) {\n                        var result;\n                        try {\n                            result = stream.tty.ops.get_char(stream.tty);\n                        } catch (e) {\n                            throw new FS.ErrnoError(29);\n                        }\n                        if (result === undefined && bytesRead === 0) {\n                            throw new FS.ErrnoError(6);\n                        }\n                        if (result === null || result === undefined) break;\n                        bytesRead++;\n                        buffer[offset + i] = result;\n                    }\n                    if (bytesRead) {\n                        stream.node.timestamp = Date.now();\n                    }\n                    return bytesRead;\n                },\n                write: function (stream, buffer, offset, length, pos) {\n                    if (!stream.tty || !stream.tty.ops.put_char) {\n                        throw new FS.ErrnoError(60);\n                    }\n                    try {\n                        for (var i = 0; i < length; i++) {\n                            stream.tty.ops.put_char(stream.tty, buffer[offset + i]);\n                        }\n                    } catch (e) {\n                        throw new FS.ErrnoError(29);\n                    }\n                    if (length) {\n                        stream.node.timestamp = Date.now();\n                    }\n                    return i;\n                },\n            },\n            default_tty_ops: {\n                get_char: function (tty) {\n                    if (!tty.input.length) {\n                        var result = null;\n                        if (typeof window != 'undefined' && typeof window.prompt == 'function') {\n                            // Read the smt text send through the Module and\n                            //  pass it to the web assembly binary program as a\n                            //  'stdin' buffer\n                            result = Module['proofTxt'];\n                            // Call a function that cleans the 'stdout' variable\n                            //  in the react scope only a single time (at the\n                            //  first time it's called).\n                            // It's necessary becasuse cvc5, when running in the\n                            //  browser, identify at first time that there is no\n                            //  content in the 'stdin', then it generates an\n                            //  default cvc5 message about the library. This\n                            //  function only make sure that this 'trash' message\n                            //  is removed from the output.\n                            Module['cleanStdout']();\n                            if (result !== null) {\n                                result += '\\n';\n                            }\n                        } else if (typeof readline == 'function') {\n                            result = readline();\n                            if (result !== null) {\n                                result += '\\n';\n                            }\n                        }\n                        if (!result) {\n                            return null;\n                        }\n                        tty.input = intArrayFromString(result, true);\n                    }\n                    return tty.input.shift();\n                },\n                put_char: function (tty, val) {\n                    if (val === null || val === 10) {\n                        out(UTF8ArrayToString(tty.output, 0));\n                        tty.output = [];\n                    } else {\n                        if (val != 0) tty.output.push(val);\n                    }\n                },\n                flush: function (tty) {\n                    if (tty.output && tty.output.length > 0) {\n                        out(UTF8ArrayToString(tty.output, 0));\n                        tty.output = [];\n                    }\n                },\n            },\n            default_tty1_ops: {\n                put_char: function (tty, val) {\n                    if (val === null || val === 10) {\n                        err(UTF8ArrayToString(tty.output, 0));\n                        tty.output = [];\n                    } else {\n                        if (val != 0) tty.output.push(val);\n                    }\n                },\n                flush: function (tty) {\n                    if (tty.output && tty.output.length > 0) {\n                        err(UTF8ArrayToString(tty.output, 0));\n                        tty.output = [];\n                    }\n                },\n            },\n        };\n        function mmapAlloc(size) {\n            abort();\n        }\n        var MEMFS = {\n            ops_table: null,\n            mount: function (mount) {\n                return MEMFS.createNode(null, '/', 16384 | 511, 0);\n            },\n            createNode: function (parent, name, mode, dev) {\n                if (FS.isBlkdev(mode) || FS.isFIFO(mode)) {\n                    throw new FS.ErrnoError(63);\n                }\n                if (!MEMFS.ops_table) {\n                    MEMFS.ops_table = {\n                        dir: {\n                            node: {\n                                getattr: MEMFS.node_ops.getattr,\n                                setattr: MEMFS.node_ops.setattr,\n                                lookup: MEMFS.node_ops.lookup,\n                                mknod: MEMFS.node_ops.mknod,\n                                rename: MEMFS.node_ops.rename,\n                                unlink: MEMFS.node_ops.unlink,\n                                rmdir: MEMFS.node_ops.rmdir,\n                                readdir: MEMFS.node_ops.readdir,\n                                symlink: MEMFS.node_ops.symlink,\n                            },\n                            stream: { llseek: MEMFS.stream_ops.llseek },\n                        },\n                        file: {\n                            node: { getattr: MEMFS.node_ops.getattr, setattr: MEMFS.node_ops.setattr },\n                            stream: {\n                                llseek: MEMFS.stream_ops.llseek,\n                                read: MEMFS.stream_ops.read,\n                                write: MEMFS.stream_ops.write,\n                                allocate: MEMFS.stream_ops.allocate,\n                                mmap: MEMFS.stream_ops.mmap,\n                                msync: MEMFS.stream_ops.msync,\n                            },\n                        },\n                        link: {\n                            node: {\n                                getattr: MEMFS.node_ops.getattr,\n                                setattr: MEMFS.node_ops.setattr,\n                                readlink: MEMFS.node_ops.readlink,\n                            },\n                            stream: {},\n                        },\n                        chrdev: {\n                            node: { getattr: MEMFS.node_ops.getattr, setattr: MEMFS.node_ops.setattr },\n                            stream: FS.chrdev_stream_ops,\n                        },\n                    };\n                }\n                var node = FS.createNode(parent, name, mode, dev);\n                if (FS.isDir(node.mode)) {\n                    node.node_ops = MEMFS.ops_table.dir.node;\n                    node.stream_ops = MEMFS.ops_table.dir.stream;\n                    node.contents = {};\n                } else if (FS.isFile(node.mode)) {\n                    node.node_ops = MEMFS.ops_table.file.node;\n                    node.stream_ops = MEMFS.ops_table.file.stream;\n                    node.usedBytes = 0;\n                    node.contents = null;\n                } else if (FS.isLink(node.mode)) {\n                    node.node_ops = MEMFS.ops_table.link.node;\n                    node.stream_ops = MEMFS.ops_table.link.stream;\n                } else if (FS.isChrdev(node.mode)) {\n                    node.node_ops = MEMFS.ops_table.chrdev.node;\n                    node.stream_ops = MEMFS.ops_table.chrdev.stream;\n                }\n                node.timestamp = Date.now();\n                if (parent) {\n                    parent.contents[name] = node;\n                    parent.timestamp = node.timestamp;\n                }\n                return node;\n            },\n            getFileDataAsTypedArray: function (node) {\n                if (!node.contents) return new Uint8Array(0);\n                if (node.contents.subarray) return node.contents.subarray(0, node.usedBytes);\n                return new Uint8Array(node.contents);\n            },\n            expandFileStorage: function (node, newCapacity) {\n                var prevCapacity = node.contents ? node.contents.length : 0;\n                if (prevCapacity >= newCapacity) return;\n                var CAPACITY_DOUBLING_MAX = 1024 * 1024;\n                newCapacity = Math.max(\n                    newCapacity,\n                    (prevCapacity * (prevCapacity < CAPACITY_DOUBLING_MAX ? 2 : 1.125)) >>> 0,\n                );\n                if (prevCapacity != 0) newCapacity = Math.max(newCapacity, 256);\n                var oldContents = node.contents;\n                node.contents = new Uint8Array(newCapacity);\n                if (node.usedBytes > 0) node.contents.set(oldContents.subarray(0, node.usedBytes), 0);\n            },\n            resizeFileStorage: function (node, newSize) {\n                if (node.usedBytes == newSize) return;\n                if (newSize == 0) {\n                    node.contents = null;\n                    node.usedBytes = 0;\n                } else {\n                    var oldContents = node.contents;\n                    node.contents = new Uint8Array(newSize);\n                    if (oldContents) {\n                        node.contents.set(oldContents.subarray(0, Math.min(newSize, node.usedBytes)));\n                    }\n                    node.usedBytes = newSize;\n                }\n            },\n            node_ops: {\n                getattr: function (node) {\n                    var attr = {};\n                    attr.dev = FS.isChrdev(node.mode) ? node.id : 1;\n                    attr.ino = node.id;\n                    attr.mode = node.mode;\n                    attr.nlink = 1;\n                    attr.uid = 0;\n                    attr.gid = 0;\n                    attr.rdev = node.rdev;\n                    if (FS.isDir(node.mode)) {\n                        attr.size = 4096;\n                    } else if (FS.isFile(node.mode)) {\n                        attr.size = node.usedBytes;\n                    } else if (FS.isLink(node.mode)) {\n                        attr.size = node.link.length;\n                    } else {\n                        attr.size = 0;\n                    }\n                    attr.atime = new Date(node.timestamp);\n                    attr.mtime = new Date(node.timestamp);\n                    attr.ctime = new Date(node.timestamp);\n                    attr.blksize = 4096;\n                    attr.blocks = Math.ceil(attr.size / attr.blksize);\n                    return attr;\n                },\n                setattr: function (node, attr) {\n                    if (attr.mode !== undefined) {\n                        node.mode = attr.mode;\n                    }\n                    if (attr.timestamp !== undefined) {\n                        node.timestamp = attr.timestamp;\n                    }\n                    if (attr.size !== undefined) {\n                        MEMFS.resizeFileStorage(node, attr.size);\n                    }\n                },\n                lookup: function (parent, name) {\n                    throw FS.genericErrors[44];\n                },\n                mknod: function (parent, name, mode, dev) {\n                    return MEMFS.createNode(parent, name, mode, dev);\n                },\n                rename: function (old_node, new_dir, new_name) {\n                    if (FS.isDir(old_node.mode)) {\n                        var new_node;\n                        try {\n                            new_node = FS.lookupNode(new_dir, new_name);\n                        } catch (e) {}\n                        if (new_node) {\n                            for (var i in new_node.contents) {\n                                throw new FS.ErrnoError(55);\n                            }\n                        }\n                    }\n                    delete old_node.parent.contents[old_node.name];\n                    old_node.parent.timestamp = Date.now();\n                    old_node.name = new_name;\n                    new_dir.contents[new_name] = old_node;\n                    new_dir.timestamp = old_node.parent.timestamp;\n                    old_node.parent = new_dir;\n                },\n                unlink: function (parent, name) {\n                    delete parent.contents[name];\n                    parent.timestamp = Date.now();\n                },\n                rmdir: function (parent, name) {\n                    var node = FS.lookupNode(parent, name);\n                    for (var i in node.contents) {\n                        throw new FS.ErrnoError(55);\n                    }\n                    delete parent.contents[name];\n                    parent.timestamp = Date.now();\n                },\n                readdir: function (node) {\n                    var entries = ['.', '..'];\n                    for (var key in node.contents) {\n                        if (!node.contents.hasOwnProperty(key)) {\n                            continue;\n                        }\n                        entries.push(key);\n                    }\n                    return entries;\n                },\n                symlink: function (parent, newname, oldpath) {\n                    var node = MEMFS.createNode(parent, newname, 511 | 40960, 0);\n                    node.link = oldpath;\n                    return node;\n                },\n                readlink: function (node) {\n                    if (!FS.isLink(node.mode)) {\n                        throw new FS.ErrnoError(28);\n                    }\n                    return node.link;\n                },\n            },\n            stream_ops: {\n                read: function (stream, buffer, offset, length, position) {\n                    var contents = stream.node.contents;\n                    if (position >= stream.node.usedBytes) return 0;\n                    var size = Math.min(stream.node.usedBytes - position, length);\n                    if (size > 8 && contents.subarray) {\n                        buffer.set(contents.subarray(position, position + size), offset);\n                    } else {\n                        for (var i = 0; i < size; i++) buffer[offset + i] = contents[position + i];\n                    }\n                    return size;\n                },\n                write: function (stream, buffer, offset, length, position, canOwn) {\n                    if (!length) return 0;\n                    var node = stream.node;\n                    node.timestamp = Date.now();\n                    if (buffer.subarray && (!node.contents || node.contents.subarray)) {\n                        if (canOwn) {\n                            node.contents = buffer.subarray(offset, offset + length);\n                            node.usedBytes = length;\n                            return length;\n                        } else if (node.usedBytes === 0 && position === 0) {\n                            node.contents = buffer.slice(offset, offset + length);\n                            node.usedBytes = length;\n                            return length;\n                        } else if (position + length <= node.usedBytes) {\n                            node.contents.set(buffer.subarray(offset, offset + length), position);\n                            return length;\n                        }\n                    }\n                    MEMFS.expandFileStorage(node, position + length);\n                    if (node.contents.subarray && buffer.subarray) {\n                        node.contents.set(buffer.subarray(offset, offset + length), position);\n                    } else {\n                        for (var i = 0; i < length; i++) {\n                            node.contents[position + i] = buffer[offset + i];\n                        }\n                    }\n                    node.usedBytes = Math.max(node.usedBytes, position + length);\n                    return length;\n                },\n                llseek: function (stream, offset, whence) {\n                    var position = offset;\n                    if (whence === 1) {\n                        position += stream.position;\n                    } else if (whence === 2) {\n                        if (FS.isFile(stream.node.mode)) {\n                            position += stream.node.usedBytes;\n                        }\n                    }\n                    if (position < 0) {\n                        throw new FS.ErrnoError(28);\n                    }\n                    return position;\n                },\n                allocate: function (stream, offset, length) {\n                    MEMFS.expandFileStorage(stream.node, offset + length);\n                    stream.node.usedBytes = Math.max(stream.node.usedBytes, offset + length);\n                },\n                mmap: function (stream, length, position, prot, flags) {\n                    if (!FS.isFile(stream.node.mode)) {\n                        throw new FS.ErrnoError(43);\n                    }\n                    var ptr;\n                    var allocated;\n                    var contents = stream.node.contents;\n                    if (!(flags & 2) && contents.buffer === buffer) {\n                        allocated = false;\n                        ptr = contents.byteOffset;\n                    } else {\n                        if (position > 0 || position + length < contents.length) {\n                            if (contents.subarray) {\n                                contents = contents.subarray(position, position + length);\n                            } else {\n                                contents = Array.prototype.slice.call(contents, position, position + length);\n                            }\n                        }\n                        allocated = true;\n                        ptr = mmapAlloc(length);\n                        if (!ptr) {\n                            throw new FS.ErrnoError(48);\n                        }\n                        HEAP8.set(contents, ptr);\n                    }\n                    return { ptr: ptr, allocated: allocated };\n                },\n                msync: function (stream, buffer, offset, length, mmapFlags) {\n                    if (!FS.isFile(stream.node.mode)) {\n                        throw new FS.ErrnoError(43);\n                    }\n                    if (mmapFlags & 2) {\n                        return 0;\n                    }\n                    var bytesWritten = MEMFS.stream_ops.write(stream, buffer, 0, length, offset, false);\n                    return 0;\n                },\n            },\n        };\n        function asyncLoad(url, onload, onerror, noRunDep) {\n            var dep = !noRunDep ? getUniqueRunDependency('al ' + url) : '';\n            readAsync(\n                url,\n                function (arrayBuffer) {\n                    assert(arrayBuffer, 'Loading data file \"' + url + '\" failed (no arrayBuffer).');\n                    onload(new Uint8Array(arrayBuffer));\n                    if (dep) removeRunDependency(dep);\n                },\n                function (event) {\n                    if (onerror) {\n                        onerror();\n                    } else {\n                        throw 'Loading data file \"' + url + '\" failed.';\n                    }\n                },\n            );\n            if (dep) addRunDependency(dep);\n        }\n        var FS = {\n            root: null,\n            mounts: [],\n            devices: {},\n            streams: [],\n            nextInode: 1,\n            nameTable: null,\n            currentPath: '/',\n            initialized: false,\n            ignorePermissions: true,\n            ErrnoError: null,\n            genericErrors: {},\n            filesystems: null,\n            syncFSRequests: 0,\n            lookupPath: (path, opts = {}) => {\n                path = PATH_FS.resolve(FS.cwd(), path);\n                if (!path) return { path: '', node: null };\n                var defaults = { follow_mount: true, recurse_count: 0 };\n                opts = Object.assign(defaults, opts);\n                if (opts.recurse_count > 8) {\n                    throw new FS.ErrnoError(32);\n                }\n                var parts = PATH.normalizeArray(\n                    path.split('/').filter((p) => !!p),\n                    false,\n                );\n                var current = FS.root;\n                var current_path = '/';\n                for (var i = 0; i < parts.length; i++) {\n                    var islast = i === parts.length - 1;\n                    if (islast && opts.parent) {\n                        break;\n                    }\n                    current = FS.lookupNode(current, parts[i]);\n                    current_path = PATH.join2(current_path, parts[i]);\n                    if (FS.isMountpoint(current)) {\n                        if (!islast || (islast && opts.follow_mount)) {\n                            current = current.mounted.root;\n                        }\n                    }\n                    if (!islast || opts.follow) {\n                        var count = 0;\n                        while (FS.isLink(current.mode)) {\n                            var link = FS.readlink(current_path);\n                            current_path = PATH_FS.resolve(PATH.dirname(current_path), link);\n                            var lookup = FS.lookupPath(current_path, { recurse_count: opts.recurse_count + 1 });\n                            current = lookup.node;\n                            if (count++ > 40) {\n                                throw new FS.ErrnoError(32);\n                            }\n                        }\n                    }\n                }\n                return { path: current_path, node: current };\n            },\n            getPath: (node) => {\n                var path;\n                while (true) {\n                    if (FS.isRoot(node)) {\n                        var mount = node.mount.mountpoint;\n                        if (!path) return mount;\n                        return mount[mount.length - 1] !== '/' ? mount + '/' + path : mount + path;\n                    }\n                    path = path ? node.name + '/' + path : node.name;\n                    node = node.parent;\n                }\n            },\n            hashName: (parentid, name) => {\n                var hash = 0;\n                for (var i = 0; i < name.length; i++) {\n                    hash = ((hash << 5) - hash + name.charCodeAt(i)) | 0;\n                }\n                return ((parentid + hash) >>> 0) % FS.nameTable.length;\n            },\n            hashAddNode: (node) => {\n                var hash = FS.hashName(node.parent.id, node.name);\n                node.name_next = FS.nameTable[hash];\n                FS.nameTable[hash] = node;\n            },\n            hashRemoveNode: (node) => {\n                var hash = FS.hashName(node.parent.id, node.name);\n                if (FS.nameTable[hash] === node) {\n                    FS.nameTable[hash] = node.name_next;\n                } else {\n                    var current = FS.nameTable[hash];\n                    while (current) {\n                        if (current.name_next === node) {\n                            current.name_next = node.name_next;\n                            break;\n                        }\n                        current = current.name_next;\n                    }\n                }\n            },\n            lookupNode: (parent, name) => {\n                var errCode = FS.mayLookup(parent);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode, parent);\n                }\n                var hash = FS.hashName(parent.id, name);\n                for (var node = FS.nameTable[hash]; node; node = node.name_next) {\n                    var nodeName = node.name;\n                    if (node.parent.id === parent.id && nodeName === name) {\n                        return node;\n                    }\n                }\n                return FS.lookup(parent, name);\n            },\n            createNode: (parent, name, mode, rdev) => {\n                var node = new FS.FSNode(parent, name, mode, rdev);\n                FS.hashAddNode(node);\n                return node;\n            },\n            destroyNode: (node) => {\n                FS.hashRemoveNode(node);\n            },\n            isRoot: (node) => {\n                return node === node.parent;\n            },\n            isMountpoint: (node) => {\n                return !!node.mounted;\n            },\n            isFile: (mode) => {\n                return (mode & 61440) === 32768;\n            },\n            isDir: (mode) => {\n                return (mode & 61440) === 16384;\n            },\n            isLink: (mode) => {\n                return (mode & 61440) === 40960;\n            },\n            isChrdev: (mode) => {\n                return (mode & 61440) === 8192;\n            },\n            isBlkdev: (mode) => {\n                return (mode & 61440) === 24576;\n            },\n            isFIFO: (mode) => {\n                return (mode & 61440) === 4096;\n            },\n            isSocket: (mode) => {\n                return (mode & 49152) === 49152;\n            },\n            flagModes: { r: 0, 'r+': 2, w: 577, 'w+': 578, a: 1089, 'a+': 1090 },\n            modeStringToFlags: (str) => {\n                var flags = FS.flagModes[str];\n                if (typeof flags == 'undefined') {\n                    throw new Error('Unknown file open mode: ' + str);\n                }\n                return flags;\n            },\n            flagsToPermissionString: (flag) => {\n                var perms = ['r', 'w', 'rw'][flag & 3];\n                if (flag & 512) {\n                    perms += 'w';\n                }\n                return perms;\n            },\n            nodePermissions: (node, perms) => {\n                if (FS.ignorePermissions) {\n                    return 0;\n                }\n                if (perms.includes('r') && !(node.mode & 292)) {\n                    return 2;\n                } else if (perms.includes('w') && !(node.mode & 146)) {\n                    return 2;\n                } else if (perms.includes('x') && !(node.mode & 73)) {\n                    return 2;\n                }\n                return 0;\n            },\n            mayLookup: (dir) => {\n                var errCode = FS.nodePermissions(dir, 'x');\n                if (errCode) return errCode;\n                if (!dir.node_ops.lookup) return 2;\n                return 0;\n            },\n            mayCreate: (dir, name) => {\n                try {\n                    var node = FS.lookupNode(dir, name);\n                    return 20;\n                } catch (e) {}\n                return FS.nodePermissions(dir, 'wx');\n            },\n            mayDelete: (dir, name, isdir) => {\n                var node;\n                try {\n                    node = FS.lookupNode(dir, name);\n                } catch (e) {\n                    return e.errno;\n                }\n                var errCode = FS.nodePermissions(dir, 'wx');\n                if (errCode) {\n                    return errCode;\n                }\n                if (isdir) {\n                    if (!FS.isDir(node.mode)) {\n                        return 54;\n                    }\n                    if (FS.isRoot(node) || FS.getPath(node) === FS.cwd()) {\n                        return 10;\n                    }\n                } else {\n                    if (FS.isDir(node.mode)) {\n                        return 31;\n                    }\n                }\n                return 0;\n            },\n            mayOpen: (node, flags) => {\n                if (!node) {\n                    return 44;\n                }\n                if (FS.isLink(node.mode)) {\n                    return 32;\n                } else if (FS.isDir(node.mode)) {\n                    if (FS.flagsToPermissionString(flags) !== 'r' || flags & 512) {\n                        return 31;\n                    }\n                }\n                return FS.nodePermissions(node, FS.flagsToPermissionString(flags));\n            },\n            MAX_OPEN_FDS: 4096,\n            nextfd: (fd_start = 0, fd_end = FS.MAX_OPEN_FDS) => {\n                for (var fd = fd_start; fd <= fd_end; fd++) {\n                    if (!FS.streams[fd]) {\n                        return fd;\n                    }\n                }\n                throw new FS.ErrnoError(33);\n            },\n            getStream: (fd) => FS.streams[fd],\n            createStream: (stream, fd_start, fd_end) => {\n                if (!FS.FSStream) {\n                    FS.FSStream = function () {\n                        this.shared = {};\n                    };\n                    FS.FSStream.prototype = {};\n                    Object.defineProperties(FS.FSStream.prototype, {\n                        object: {\n                            get: function () {\n                                return this.node;\n                            },\n                            set: function (val) {\n                                this.node = val;\n                            },\n                        },\n                        isRead: {\n                            get: function () {\n                                return (this.flags & 2097155) !== 1;\n                            },\n                        },\n                        isWrite: {\n                            get: function () {\n                                return (this.flags & 2097155) !== 0;\n                            },\n                        },\n                        isAppend: {\n                            get: function () {\n                                return this.flags & 1024;\n                            },\n                        },\n                        flags: {\n                            get: function () {\n                                return this.shared.flags;\n                            },\n                            set: function (val) {\n                                this.shared.flags = val;\n                            },\n                        },\n                        position: {\n                            get: function () {\n                                return this.shared.position;\n                            },\n                            set: function (val) {\n                                this.shared.position = val;\n                            },\n                        },\n                    });\n                }\n                stream = Object.assign(new FS.FSStream(), stream);\n                var fd = FS.nextfd(fd_start, fd_end);\n                stream.fd = fd;\n                FS.streams[fd] = stream;\n                return stream;\n            },\n            closeStream: (fd) => {\n                FS.streams[fd] = null;\n            },\n            chrdev_stream_ops: {\n                open: (stream) => {\n                    var device = FS.getDevice(stream.node.rdev);\n                    stream.stream_ops = device.stream_ops;\n                    if (stream.stream_ops.open) {\n                        stream.stream_ops.open(stream);\n                    }\n                },\n                llseek: () => {\n                    throw new FS.ErrnoError(70);\n                },\n            },\n            major: (dev) => dev >> 8,\n            minor: (dev) => dev & 255,\n            makedev: (ma, mi) => (ma << 8) | mi,\n            registerDevice: (dev, ops) => {\n                FS.devices[dev] = { stream_ops: ops };\n            },\n            getDevice: (dev) => FS.devices[dev],\n            getMounts: (mount) => {\n                var mounts = [];\n                var check = [mount];\n                while (check.length) {\n                    var m = check.pop();\n                    mounts.push(m);\n                    check.push.apply(check, m.mounts);\n                }\n                return mounts;\n            },\n            syncfs: (populate, callback) => {\n                if (typeof populate == 'function') {\n                    callback = populate;\n                    populate = false;\n                }\n                FS.syncFSRequests++;\n                if (FS.syncFSRequests > 1) {\n                    err(\n                        'warning: ' +\n                            FS.syncFSRequests +\n                            ' FS.syncfs operations in flight at once, probably just doing extra work',\n                    );\n                }\n                var mounts = FS.getMounts(FS.root.mount);\n                var completed = 0;\n                function doCallback(errCode) {\n                    FS.syncFSRequests--;\n                    return callback(errCode);\n                }\n                function done(errCode) {\n                    if (errCode) {\n                        if (!done.errored) {\n                            done.errored = true;\n                            return doCallback(errCode);\n                        }\n                        return;\n                    }\n                    if (++completed >= mounts.length) {\n                        doCallback(null);\n                    }\n                }\n                mounts.forEach((mount) => {\n                    if (!mount.type.syncfs) {\n                        return done(null);\n                    }\n                    mount.type.syncfs(mount, populate, done);\n                });\n            },\n            mount: (type, opts, mountpoint) => {\n                var root = mountpoint === '/';\n                var pseudo = !mountpoint;\n                var node;\n                if (root && FS.root) {\n                    throw new FS.ErrnoError(10);\n                } else if (!root && !pseudo) {\n                    var lookup = FS.lookupPath(mountpoint, { follow_mount: false });\n                    mountpoint = lookup.path;\n                    node = lookup.node;\n                    if (FS.isMountpoint(node)) {\n                        throw new FS.ErrnoError(10);\n                    }\n                    if (!FS.isDir(node.mode)) {\n                        throw new FS.ErrnoError(54);\n                    }\n                }\n                var mount = { type: type, opts: opts, mountpoint: mountpoint, mounts: [] };\n                var mountRoot = type.mount(mount);\n                mountRoot.mount = mount;\n                mount.root = mountRoot;\n                if (root) {\n                    FS.root = mountRoot;\n                } else if (node) {\n                    node.mounted = mount;\n                    if (node.mount) {\n                        node.mount.mounts.push(mount);\n                    }\n                }\n                return mountRoot;\n            },\n            unmount: (mountpoint) => {\n                var lookup = FS.lookupPath(mountpoint, { follow_mount: false });\n                if (!FS.isMountpoint(lookup.node)) {\n                    throw new FS.ErrnoError(28);\n                }\n                var node = lookup.node;\n                var mount = node.mounted;\n                var mounts = FS.getMounts(mount);\n                Object.keys(FS.nameTable).forEach((hash) => {\n                    var current = FS.nameTable[hash];\n                    while (current) {\n                        var next = current.name_next;\n                        if (mounts.includes(current.mount)) {\n                            FS.destroyNode(current);\n                        }\n                        current = next;\n                    }\n                });\n                node.mounted = null;\n                var idx = node.mount.mounts.indexOf(mount);\n                node.mount.mounts.splice(idx, 1);\n            },\n            lookup: (parent, name) => {\n                return parent.node_ops.lookup(parent, name);\n            },\n            mknod: (path, mode, dev) => {\n                var lookup = FS.lookupPath(path, { parent: true });\n                var parent = lookup.node;\n                var name = PATH.basename(path);\n                if (!name || name === '.' || name === '..') {\n                    throw new FS.ErrnoError(28);\n                }\n                var errCode = FS.mayCreate(parent, name);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                if (!parent.node_ops.mknod) {\n                    throw new FS.ErrnoError(63);\n                }\n                return parent.node_ops.mknod(parent, name, mode, dev);\n            },\n            create: (path, mode) => {\n                mode = mode !== undefined ? mode : 438;\n                mode &= 4095;\n                mode |= 32768;\n                return FS.mknod(path, mode, 0);\n            },\n            mkdir: (path, mode) => {\n                mode = mode !== undefined ? mode : 511;\n                mode &= 511 | 512;\n                mode |= 16384;\n                return FS.mknod(path, mode, 0);\n            },\n            mkdirTree: (path, mode) => {\n                var dirs = path.split('/');\n                var d = '';\n                for (var i = 0; i < dirs.length; ++i) {\n                    if (!dirs[i]) continue;\n                    d += '/' + dirs[i];\n                    try {\n                        FS.mkdir(d, mode);\n                    } catch (e) {\n                        if (e.errno != 20) throw e;\n                    }\n                }\n            },\n            mkdev: (path, mode, dev) => {\n                if (typeof dev == 'undefined') {\n                    dev = mode;\n                    mode = 438;\n                }\n                mode |= 8192;\n                return FS.mknod(path, mode, dev);\n            },\n            symlink: (oldpath, newpath) => {\n                if (!PATH_FS.resolve(oldpath)) {\n                    throw new FS.ErrnoError(44);\n                }\n                var lookup = FS.lookupPath(newpath, { parent: true });\n                var parent = lookup.node;\n                if (!parent) {\n                    throw new FS.ErrnoError(44);\n                }\n                var newname = PATH.basename(newpath);\n                var errCode = FS.mayCreate(parent, newname);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                if (!parent.node_ops.symlink) {\n                    throw new FS.ErrnoError(63);\n                }\n                return parent.node_ops.symlink(parent, newname, oldpath);\n            },\n            rename: (old_path, new_path) => {\n                var old_dirname = PATH.dirname(old_path);\n                var new_dirname = PATH.dirname(new_path);\n                var old_name = PATH.basename(old_path);\n                var new_name = PATH.basename(new_path);\n                var lookup, old_dir, new_dir;\n                lookup = FS.lookupPath(old_path, { parent: true });\n                old_dir = lookup.node;\n                lookup = FS.lookupPath(new_path, { parent: true });\n                new_dir = lookup.node;\n                if (!old_dir || !new_dir) throw new FS.ErrnoError(44);\n                if (old_dir.mount !== new_dir.mount) {\n                    throw new FS.ErrnoError(75);\n                }\n                var old_node = FS.lookupNode(old_dir, old_name);\n                var relative = PATH_FS.relative(old_path, new_dirname);\n                if (relative.charAt(0) !== '.') {\n                    throw new FS.ErrnoError(28);\n                }\n                relative = PATH_FS.relative(new_path, old_dirname);\n                if (relative.charAt(0) !== '.') {\n                    throw new FS.ErrnoError(55);\n                }\n                var new_node;\n                try {\n                    new_node = FS.lookupNode(new_dir, new_name);\n                } catch (e) {}\n                if (old_node === new_node) {\n                    return;\n                }\n                var isdir = FS.isDir(old_node.mode);\n                var errCode = FS.mayDelete(old_dir, old_name, isdir);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                errCode = new_node ? FS.mayDelete(new_dir, new_name, isdir) : FS.mayCreate(new_dir, new_name);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                if (!old_dir.node_ops.rename) {\n                    throw new FS.ErrnoError(63);\n                }\n                if (FS.isMountpoint(old_node) || (new_node && FS.isMountpoint(new_node))) {\n                    throw new FS.ErrnoError(10);\n                }\n                if (new_dir !== old_dir) {\n                    errCode = FS.nodePermissions(old_dir, 'w');\n                    if (errCode) {\n                        throw new FS.ErrnoError(errCode);\n                    }\n                }\n                FS.hashRemoveNode(old_node);\n                try {\n                    old_dir.node_ops.rename(old_node, new_dir, new_name);\n                } catch (e) {\n                    throw e;\n                } finally {\n                    FS.hashAddNode(old_node);\n                }\n            },\n            rmdir: (path) => {\n                var lookup = FS.lookupPath(path, { parent: true });\n                var parent = lookup.node;\n                var name = PATH.basename(path);\n                var node = FS.lookupNode(parent, name);\n                var errCode = FS.mayDelete(parent, name, true);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                if (!parent.node_ops.rmdir) {\n                    throw new FS.ErrnoError(63);\n                }\n                if (FS.isMountpoint(node)) {\n                    throw new FS.ErrnoError(10);\n                }\n                parent.node_ops.rmdir(parent, name);\n                FS.destroyNode(node);\n            },\n            readdir: (path) => {\n                var lookup = FS.lookupPath(path, { follow: true });\n                var node = lookup.node;\n                if (!node.node_ops.readdir) {\n                    throw new FS.ErrnoError(54);\n                }\n                return node.node_ops.readdir(node);\n            },\n            unlink: (path) => {\n                var lookup = FS.lookupPath(path, { parent: true });\n                var parent = lookup.node;\n                if (!parent) {\n                    throw new FS.ErrnoError(44);\n                }\n                var name = PATH.basename(path);\n                var node = FS.lookupNode(parent, name);\n                var errCode = FS.mayDelete(parent, name, false);\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                if (!parent.node_ops.unlink) {\n                    throw new FS.ErrnoError(63);\n                }\n                if (FS.isMountpoint(node)) {\n                    throw new FS.ErrnoError(10);\n                }\n                parent.node_ops.unlink(parent, name);\n                FS.destroyNode(node);\n            },\n            readlink: (path) => {\n                var lookup = FS.lookupPath(path);\n                var link = lookup.node;\n                if (!link) {\n                    throw new FS.ErrnoError(44);\n                }\n                if (!link.node_ops.readlink) {\n                    throw new FS.ErrnoError(28);\n                }\n                return PATH_FS.resolve(FS.getPath(link.parent), link.node_ops.readlink(link));\n            },\n            stat: (path, dontFollow) => {\n                var lookup = FS.lookupPath(path, { follow: !dontFollow });\n                var node = lookup.node;\n                if (!node) {\n                    throw new FS.ErrnoError(44);\n                }\n                if (!node.node_ops.getattr) {\n                    throw new FS.ErrnoError(63);\n                }\n                return node.node_ops.getattr(node);\n            },\n            lstat: (path) => {\n                return FS.stat(path, true);\n            },\n            chmod: (path, mode, dontFollow) => {\n                var node;\n                if (typeof path == 'string') {\n                    var lookup = FS.lookupPath(path, { follow: !dontFollow });\n                    node = lookup.node;\n                } else {\n                    node = path;\n                }\n                if (!node.node_ops.setattr) {\n                    throw new FS.ErrnoError(63);\n                }\n                node.node_ops.setattr(node, { mode: (mode & 4095) | (node.mode & ~4095), timestamp: Date.now() });\n            },\n            lchmod: (path, mode) => {\n                FS.chmod(path, mode, true);\n            },\n            fchmod: (fd, mode) => {\n                var stream = FS.getStream(fd);\n                if (!stream) {\n                    throw new FS.ErrnoError(8);\n                }\n                FS.chmod(stream.node, mode);\n            },\n            chown: (path, uid, gid, dontFollow) => {\n                var node;\n                if (typeof path == 'string') {\n                    var lookup = FS.lookupPath(path, { follow: !dontFollow });\n                    node = lookup.node;\n                } else {\n                    node = path;\n                }\n                if (!node.node_ops.setattr) {\n                    throw new FS.ErrnoError(63);\n                }\n                node.node_ops.setattr(node, { timestamp: Date.now() });\n            },\n            lchown: (path, uid, gid) => {\n                FS.chown(path, uid, gid, true);\n            },\n            fchown: (fd, uid, gid) => {\n                var stream = FS.getStream(fd);\n                if (!stream) {\n                    throw new FS.ErrnoError(8);\n                }\n                FS.chown(stream.node, uid, gid);\n            },\n            truncate: (path, len) => {\n                if (len < 0) {\n                    throw new FS.ErrnoError(28);\n                }\n                var node;\n                if (typeof path == 'string') {\n                    var lookup = FS.lookupPath(path, { follow: true });\n                    node = lookup.node;\n                } else {\n                    node = path;\n                }\n                if (!node.node_ops.setattr) {\n                    throw new FS.ErrnoError(63);\n                }\n                if (FS.isDir(node.mode)) {\n                    throw new FS.ErrnoError(31);\n                }\n                if (!FS.isFile(node.mode)) {\n                    throw new FS.ErrnoError(28);\n                }\n                var errCode = FS.nodePermissions(node, 'w');\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                node.node_ops.setattr(node, { size: len, timestamp: Date.now() });\n            },\n            ftruncate: (fd, len) => {\n                var stream = FS.getStream(fd);\n                if (!stream) {\n                    throw new FS.ErrnoError(8);\n                }\n                if ((stream.flags & 2097155) === 0) {\n                    throw new FS.ErrnoError(28);\n                }\n                FS.truncate(stream.node, len);\n            },\n            utime: (path, atime, mtime) => {\n                var lookup = FS.lookupPath(path, { follow: true });\n                var node = lookup.node;\n                node.node_ops.setattr(node, { timestamp: Math.max(atime, mtime) });\n            },\n            open: (path, flags, mode) => {\n                if (path === '') {\n                    throw new FS.ErrnoError(44);\n                }\n                flags = typeof flags == 'string' ? FS.modeStringToFlags(flags) : flags;\n                mode = typeof mode == 'undefined' ? 438 : mode;\n                if (flags & 64) {\n                    mode = (mode & 4095) | 32768;\n                } else {\n                    mode = 0;\n                }\n                var node;\n                if (typeof path == 'object') {\n                    node = path;\n                } else {\n                    path = PATH.normalize(path);\n                    try {\n                        var lookup = FS.lookupPath(path, { follow: !(flags & 131072) });\n                        node = lookup.node;\n                    } catch (e) {}\n                }\n                var created = false;\n                if (flags & 64) {\n                    if (node) {\n                        if (flags & 128) {\n                            throw new FS.ErrnoError(20);\n                        }\n                    } else {\n                        node = FS.mknod(path, mode, 0);\n                        created = true;\n                    }\n                }\n                if (!node) {\n                    throw new FS.ErrnoError(44);\n                }\n                if (FS.isChrdev(node.mode)) {\n                    flags &= ~512;\n                }\n                if (flags & 65536 && !FS.isDir(node.mode)) {\n                    throw new FS.ErrnoError(54);\n                }\n                if (!created) {\n                    var errCode = FS.mayOpen(node, flags);\n                    if (errCode) {\n                        throw new FS.ErrnoError(errCode);\n                    }\n                }\n                if (flags & 512 && !created) {\n                    FS.truncate(node, 0);\n                }\n                flags &= ~(128 | 512 | 131072);\n                var stream = FS.createStream({\n                    node: node,\n                    path: FS.getPath(node),\n                    flags: flags,\n                    seekable: true,\n                    position: 0,\n                    stream_ops: node.stream_ops,\n                    ungotten: [],\n                    error: false,\n                });\n                if (stream.stream_ops.open) {\n                    stream.stream_ops.open(stream);\n                }\n                if (Module['logReadFiles'] && !(flags & 1)) {\n                    if (!FS.readFiles) FS.readFiles = {};\n                    if (!(path in FS.readFiles)) {\n                        FS.readFiles[path] = 1;\n                    }\n                }\n                return stream;\n            },\n            close: (stream) => {\n                if (FS.isClosed(stream)) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (stream.getdents) stream.getdents = null;\n                try {\n                    if (stream.stream_ops.close) {\n                        stream.stream_ops.close(stream);\n                    }\n                } catch (e) {\n                    throw e;\n                } finally {\n                    FS.closeStream(stream.fd);\n                }\n                stream.fd = null;\n            },\n            isClosed: (stream) => {\n                return stream.fd === null;\n            },\n            llseek: (stream, offset, whence) => {\n                if (FS.isClosed(stream)) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (!stream.seekable || !stream.stream_ops.llseek) {\n                    throw new FS.ErrnoError(70);\n                }\n                if (whence != 0 && whence != 1 && whence != 2) {\n                    throw new FS.ErrnoError(28);\n                }\n                stream.position = stream.stream_ops.llseek(stream, offset, whence);\n                stream.ungotten = [];\n                return stream.position;\n            },\n            read: (stream, buffer, offset, length, position) => {\n                if (length < 0 || position < 0) {\n                    throw new FS.ErrnoError(28);\n                }\n                if (FS.isClosed(stream)) {\n                    throw new FS.ErrnoError(8);\n                }\n                if ((stream.flags & 2097155) === 1) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (FS.isDir(stream.node.mode)) {\n                    throw new FS.ErrnoError(31);\n                }\n                if (!stream.stream_ops.read) {\n                    throw new FS.ErrnoError(28);\n                }\n                var seeking = typeof position != 'undefined';\n                if (!seeking) {\n                    position = stream.position;\n                } else if (!stream.seekable) {\n                    throw new FS.ErrnoError(70);\n                }\n                var bytesRead = stream.stream_ops.read(stream, buffer, offset, length, position);\n                if (!seeking) stream.position += bytesRead;\n                return bytesRead;\n            },\n            write: (stream, buffer, offset, length, position, canOwn) => {\n                if (length < 0 || position < 0) {\n                    throw new FS.ErrnoError(28);\n                }\n                if (FS.isClosed(stream)) {\n                    throw new FS.ErrnoError(8);\n                }\n                if ((stream.flags & 2097155) === 0) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (FS.isDir(stream.node.mode)) {\n                    throw new FS.ErrnoError(31);\n                }\n                if (!stream.stream_ops.write) {\n                    throw new FS.ErrnoError(28);\n                }\n                if (stream.seekable && stream.flags & 1024) {\n                    FS.llseek(stream, 0, 2);\n                }\n                var seeking = typeof position != 'undefined';\n                if (!seeking) {\n                    position = stream.position;\n                } else if (!stream.seekable) {\n                    throw new FS.ErrnoError(70);\n                }\n                var bytesWritten = stream.stream_ops.write(stream, buffer, offset, length, position, canOwn);\n                if (!seeking) stream.position += bytesWritten;\n                return bytesWritten;\n            },\n            allocate: (stream, offset, length) => {\n                if (FS.isClosed(stream)) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (offset < 0 || length <= 0) {\n                    throw new FS.ErrnoError(28);\n                }\n                if ((stream.flags & 2097155) === 0) {\n                    throw new FS.ErrnoError(8);\n                }\n                if (!FS.isFile(stream.node.mode) && !FS.isDir(stream.node.mode)) {\n                    throw new FS.ErrnoError(43);\n                }\n                if (!stream.stream_ops.allocate) {\n                    throw new FS.ErrnoError(138);\n                }\n                stream.stream_ops.allocate(stream, offset, length);\n            },\n            mmap: (stream, length, position, prot, flags) => {\n                if ((prot & 2) !== 0 && (flags & 2) === 0 && (stream.flags & 2097155) !== 2) {\n                    throw new FS.ErrnoError(2);\n                }\n                if ((stream.flags & 2097155) === 1) {\n                    throw new FS.ErrnoError(2);\n                }\n                if (!stream.stream_ops.mmap) {\n                    throw new FS.ErrnoError(43);\n                }\n                return stream.stream_ops.mmap(stream, length, position, prot, flags);\n            },\n            msync: (stream, buffer, offset, length, mmapFlags) => {\n                if (!stream || !stream.stream_ops.msync) {\n                    return 0;\n                }\n                return stream.stream_ops.msync(stream, buffer, offset, length, mmapFlags);\n            },\n            munmap: (stream) => 0,\n            ioctl: (stream, cmd, arg) => {\n                if (!stream.stream_ops.ioctl) {\n                    throw new FS.ErrnoError(59);\n                }\n                return stream.stream_ops.ioctl(stream, cmd, arg);\n            },\n            readFile: (path, opts = {}) => {\n                opts.flags = opts.flags || 0;\n                opts.encoding = opts.encoding || 'binary';\n                if (opts.encoding !== 'utf8' && opts.encoding !== 'binary') {\n                    throw new Error('Invalid encoding type \"' + opts.encoding + '\"');\n                }\n                var ret;\n                var stream = FS.open(path, opts.flags);\n                var stat = FS.stat(path);\n                var length = stat.size;\n                var buf = new Uint8Array(length);\n                FS.read(stream, buf, 0, length, 0);\n                if (opts.encoding === 'utf8') {\n                    ret = UTF8ArrayToString(buf, 0);\n                } else if (opts.encoding === 'binary') {\n                    ret = buf;\n                }\n                FS.close(stream);\n                return ret;\n            },\n            writeFile: (path, data, opts = {}) => {\n                opts.flags = opts.flags || 577;\n                var stream = FS.open(path, opts.flags, opts.mode);\n                if (typeof data == 'string') {\n                    var buf = new Uint8Array(lengthBytesUTF8(data) + 1);\n                    var actualNumBytes = stringToUTF8Array(data, buf, 0, buf.length);\n                    FS.write(stream, buf, 0, actualNumBytes, undefined, opts.canOwn);\n                } else if (ArrayBuffer.isView(data)) {\n                    FS.write(stream, data, 0, data.byteLength, undefined, opts.canOwn);\n                } else {\n                    throw new Error('Unsupported data type');\n                }\n                FS.close(stream);\n            },\n            cwd: () => FS.currentPath,\n            chdir: (path) => {\n                var lookup = FS.lookupPath(path, { follow: true });\n                if (lookup.node === null) {\n                    throw new FS.ErrnoError(44);\n                }\n                if (!FS.isDir(lookup.node.mode)) {\n                    throw new FS.ErrnoError(54);\n                }\n                var errCode = FS.nodePermissions(lookup.node, 'x');\n                if (errCode) {\n                    throw new FS.ErrnoError(errCode);\n                }\n                FS.currentPath = lookup.path;\n            },\n            createDefaultDirectories: () => {\n                FS.mkdir('/tmp');\n                FS.mkdir('/home');\n                FS.mkdir('/home/web_user');\n            },\n            createDefaultDevices: () => {\n                FS.mkdir('/dev');\n                FS.registerDevice(FS.makedev(1, 3), {\n                    read: () => 0,\n                    write: (stream, buffer, offset, length, pos) => length,\n                });\n                FS.mkdev('/dev/null', FS.makedev(1, 3));\n                TTY.register(FS.makedev(5, 0), TTY.default_tty_ops);\n                TTY.register(FS.makedev(6, 0), TTY.default_tty1_ops);\n                FS.mkdev('/dev/tty', FS.makedev(5, 0));\n                FS.mkdev('/dev/tty1', FS.makedev(6, 0));\n                var random_device = getRandomDevice();\n                FS.createDevice('/dev', 'random', random_device);\n                FS.createDevice('/dev', 'urandom', random_device);\n                FS.mkdir('/dev/shm');\n                FS.mkdir('/dev/shm/tmp');\n            },\n            createSpecialDirectories: () => {\n                FS.mkdir('/proc');\n                var proc_self = FS.mkdir('/proc/self');\n                FS.mkdir('/proc/self/fd');\n                FS.mount(\n                    {\n                        mount: () => {\n                            var node = FS.createNode(proc_self, 'fd', 16384 | 511, 73);\n                            node.node_ops = {\n                                lookup: (parent, name) => {\n                                    var fd = +name;\n                                    var stream = FS.getStream(fd);\n                                    if (!stream) throw new FS.ErrnoError(8);\n                                    var ret = {\n                                        parent: null,\n                                        mount: { mountpoint: 'fake' },\n                                        node_ops: { readlink: () => stream.path },\n                                    };\n                                    ret.parent = ret;\n                                    return ret;\n                                },\n                            };\n                            return node;\n                        },\n                    },\n                    {},\n                    '/proc/self/fd',\n                );\n            },\n            createStandardStreams: () => {\n                if (Module['stdin']) {\n                    FS.createDevice('/dev', 'stdin', Module['stdin']);\n                } else {\n                    FS.symlink('/dev/tty', '/dev/stdin');\n                }\n                if (Module['stdout']) {\n                    FS.createDevice('/dev', 'stdout', null, Module['stdout']);\n                } else {\n                    FS.symlink('/dev/tty', '/dev/stdout');\n                }\n                if (Module['stderr']) {\n                    FS.createDevice('/dev', 'stderr', null, Module['stderr']);\n                } else {\n                    FS.symlink('/dev/tty1', '/dev/stderr');\n                }\n                var stdin = FS.open('/dev/stdin', 0);\n                var stdout = FS.open('/dev/stdout', 1);\n                var stderr = FS.open('/dev/stderr', 1);\n            },\n            ensureErrnoError: () => {\n                if (FS.ErrnoError) return;\n                FS.ErrnoError = function ErrnoError(errno, node) {\n                    this.node = node;\n                    this.setErrno = function (errno) {\n                        this.errno = errno;\n                    };\n                    this.setErrno(errno);\n                    this.message = 'FS error';\n                };\n                FS.ErrnoError.prototype = new Error();\n                FS.ErrnoError.prototype.constructor = FS.ErrnoError;\n                [44].forEach((code) => {\n                    FS.genericErrors[code] = new FS.ErrnoError(code);\n                    FS.genericErrors[code].stack = '<generic error, no stack>';\n                });\n            },\n            staticInit: () => {\n                FS.ensureErrnoError();\n                FS.nameTable = new Array(4096);\n                FS.mount(MEMFS, {}, '/');\n                FS.createDefaultDirectories();\n                FS.createDefaultDevices();\n                FS.createSpecialDirectories();\n                FS.filesystems = { MEMFS: MEMFS };\n            },\n            init: (input, output, error) => {\n                FS.init.initialized = true;\n                FS.ensureErrnoError();\n                Module['stdin'] = input || Module['stdin'];\n                Module['stdout'] = output || Module['stdout'];\n                Module['stderr'] = error || Module['stderr'];\n                FS.createStandardStreams();\n            },\n            quit: () => {\n                FS.init.initialized = false;\n                for (var i = 0; i < FS.streams.length; i++) {\n                    var stream = FS.streams[i];\n                    if (!stream) {\n                        continue;\n                    }\n                    FS.close(stream);\n                }\n            },\n            getMode: (canRead, canWrite) => {\n                var mode = 0;\n                if (canRead) mode |= 292 | 73;\n                if (canWrite) mode |= 146;\n                return mode;\n            },\n            findObject: (path, dontResolveLastLink) => {\n                var ret = FS.analyzePath(path, dontResolveLastLink);\n                if (ret.exists) {\n                    return ret.object;\n                } else {\n                    return null;\n                }\n            },\n            analyzePath: (path, dontResolveLastLink) => {\n                try {\n                    var lookup = FS.lookupPath(path, { follow: !dontResolveLastLink });\n                    path = lookup.path;\n                } catch (e) {}\n                var ret = {\n                    isRoot: false,\n                    exists: false,\n                    error: 0,\n                    name: null,\n                    path: null,\n                    object: null,\n                    parentExists: false,\n                    parentPath: null,\n                    parentObject: null,\n                };\n                try {\n                    var lookup = FS.lookupPath(path, { parent: true });\n                    ret.parentExists = true;\n                    ret.parentPath = lookup.path;\n                    ret.parentObject = lookup.node;\n                    ret.name = PATH.basename(path);\n                    lookup = FS.lookupPath(path, { follow: !dontResolveLastLink });\n                    ret.exists = true;\n                    ret.path = lookup.path;\n                    ret.object = lookup.node;\n                    ret.name = lookup.node.name;\n                    ret.isRoot = lookup.path === '/';\n                } catch (e) {\n                    ret.error = e.errno;\n                }\n                return ret;\n            },\n            createPath: (parent, path, canRead, canWrite) => {\n                parent = typeof parent == 'string' ? parent : FS.getPath(parent);\n                var parts = path.split('/').reverse();\n                while (parts.length) {\n                    var part = parts.pop();\n                    if (!part) continue;\n                    var current = PATH.join2(parent, part);\n                    try {\n                        FS.mkdir(current);\n                    } catch (e) {}\n                    parent = current;\n                }\n                return current;\n            },\n            createFile: (parent, name, properties, canRead, canWrite) => {\n                var path = PATH.join2(typeof parent == 'string' ? parent : FS.getPath(parent), name);\n                var mode = FS.getMode(canRead, canWrite);\n                return FS.create(path, mode);\n            },\n            createDataFile: (parent, name, data, canRead, canWrite, canOwn) => {\n                var path = name;\n                if (parent) {\n                    parent = typeof parent == 'string' ? parent : FS.getPath(parent);\n                    path = name ? PATH.join2(parent, name) : parent;\n                }\n                var mode = FS.getMode(canRead, canWrite);\n                var node = FS.create(path, mode);\n                if (data) {\n                    if (typeof data == 'string') {\n                        var arr = new Array(data.length);\n                        for (var i = 0, len = data.length; i < len; ++i) arr[i] = data.charCodeAt(i);\n                        data = arr;\n                    }\n                    FS.chmod(node, mode | 146);\n                    var stream = FS.open(node, 577);\n                    FS.write(stream, data, 0, data.length, 0, canOwn);\n                    FS.close(stream);\n                    FS.chmod(node, mode);\n                }\n                return node;\n            },\n            createDevice: (parent, name, input, output) => {\n                var path = PATH.join2(typeof parent == 'string' ? parent : FS.getPath(parent), name);\n                var mode = FS.getMode(!!input, !!output);\n                if (!FS.createDevice.major) FS.createDevice.major = 64;\n                var dev = FS.makedev(FS.createDevice.major++, 0);\n                FS.registerDevice(dev, {\n                    open: (stream) => {\n                        stream.seekable = false;\n                    },\n                    close: (stream) => {\n                        if (output && output.buffer && output.buffer.length) {\n                            output(10);\n                        }\n                    },\n                    read: (stream, buffer, offset, length, pos) => {\n                        var bytesRead = 0;\n                        for (var i = 0; i < length; i++) {\n                            var result;\n                            try {\n                                result = input();\n                            } catch (e) {\n                                throw new FS.ErrnoError(29);\n                            }\n                            if (result === undefined && bytesRead === 0) {\n                                throw new FS.ErrnoError(6);\n                            }\n                            if (result === null || result === undefined) break;\n                            bytesRead++;\n                            buffer[offset + i] = result;\n                        }\n                        if (bytesRead) {\n                            stream.node.timestamp = Date.now();\n                        }\n                        return bytesRead;\n                    },\n                    write: (stream, buffer, offset, length, pos) => {\n                        for (var i = 0; i < length; i++) {\n                            try {\n                                output(buffer[offset + i]);\n                            } catch (e) {\n                                throw new FS.ErrnoError(29);\n                            }\n                        }\n                        if (length) {\n                            stream.node.timestamp = Date.now();\n                        }\n                        return i;\n                    },\n                });\n                return FS.mkdev(path, mode, dev);\n            },\n            forceLoadFile: (obj) => {\n                if (obj.isDevice || obj.isFolder || obj.link || obj.contents) return true;\n                if (typeof XMLHttpRequest != 'undefined') {\n                    throw new Error(\n                        'Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.',\n                    );\n                } else if (read_) {\n                    try {\n                        obj.contents = intArrayFromString(read_(obj.url), true);\n                        obj.usedBytes = obj.contents.length;\n                    } catch (e) {\n                        throw new FS.ErrnoError(29);\n                    }\n                } else {\n                    throw new Error('Cannot load without read() or XMLHttpRequest.');\n                }\n            },\n            createLazyFile: (parent, name, url, canRead, canWrite) => {\n                function LazyUint8Array() {\n                    this.lengthKnown = false;\n                    this.chunks = [];\n                }\n                LazyUint8Array.prototype.get = function LazyUint8Array_get(idx) {\n                    if (idx > this.length - 1 || idx < 0) {\n                        return undefined;\n                    }\n                    var chunkOffset = idx % this.chunkSize;\n                    var chunkNum = (idx / this.chunkSize) | 0;\n                    return this.getter(chunkNum)[chunkOffset];\n                };\n                LazyUint8Array.prototype.setDataGetter = function LazyUint8Array_setDataGetter(getter) {\n                    this.getter = getter;\n                };\n                LazyUint8Array.prototype.cacheLength = function LazyUint8Array_cacheLength() {\n                    var xhr = new XMLHttpRequest();\n                    xhr.open('HEAD', url, false);\n                    xhr.send(null);\n                    if (!((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304))\n                        throw new Error(\"Couldn't load \" + url + '. Status: ' + xhr.status);\n                    var datalength = Number(xhr.getResponseHeader('Content-length'));\n                    var header;\n                    var hasByteServing = (header = xhr.getResponseHeader('Accept-Ranges')) && header === 'bytes';\n                    var usesGzip = (header = xhr.getResponseHeader('Content-Encoding')) && header === 'gzip';\n                    var chunkSize = 1024 * 1024;\n                    if (!hasByteServing) chunkSize = datalength;\n                    var doXHR = (from, to) => {\n                        if (from > to)\n                            throw new Error('invalid range (' + from + ', ' + to + ') or no bytes requested!');\n                        if (to > datalength - 1)\n                            throw new Error('only ' + datalength + ' bytes available! programmer error!');\n                        var xhr = new XMLHttpRequest();\n                        xhr.open('GET', url, false);\n                        if (datalength !== chunkSize) xhr.setRequestHeader('Range', 'bytes=' + from + '-' + to);\n                        xhr.responseType = 'arraybuffer';\n                        if (xhr.overrideMimeType) {\n                            xhr.overrideMimeType('text/plain; charset=x-user-defined');\n                        }\n                        xhr.send(null);\n                        if (!((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304))\n                            throw new Error(\"Couldn't load \" + url + '. Status: ' + xhr.status);\n                        if (xhr.response !== undefined) {\n                            return new Uint8Array(xhr.response || []);\n                        } else {\n                            return intArrayFromString(xhr.responseText || '', true);\n                        }\n                    };\n                    var lazyArray = this;\n                    lazyArray.setDataGetter((chunkNum) => {\n                        var start = chunkNum * chunkSize;\n                        var end = (chunkNum + 1) * chunkSize - 1;\n                        end = Math.min(end, datalength - 1);\n                        if (typeof lazyArray.chunks[chunkNum] == 'undefined') {\n                            lazyArray.chunks[chunkNum] = doXHR(start, end);\n                        }\n                        if (typeof lazyArray.chunks[chunkNum] == 'undefined') throw new Error('doXHR failed!');\n                        return lazyArray.chunks[chunkNum];\n                    });\n                    if (usesGzip || !datalength) {\n                        chunkSize = datalength = 1;\n                        datalength = this.getter(0).length;\n                        chunkSize = datalength;\n                        out('LazyFiles on gzip forces download of the whole file when length is accessed');\n                    }\n                    this._length = datalength;\n                    this._chunkSize = chunkSize;\n                    this.lengthKnown = true;\n                };\n                if (typeof XMLHttpRequest != 'undefined') {\n                    if (!ENVIRONMENT_IS_WORKER)\n                        throw 'Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc';\n                    var lazyArray = new LazyUint8Array();\n                    Object.defineProperties(lazyArray, {\n                        length: {\n                            get: function () {\n                                if (!this.lengthKnown) {\n                                    this.cacheLength();\n                                }\n                                return this._length;\n                            },\n                        },\n                        chunkSize: {\n                            get: function () {\n                                if (!this.lengthKnown) {\n                                    this.cacheLength();\n                                }\n                                return this._chunkSize;\n                            },\n                        },\n                    });\n                    var properties = { isDevice: false, contents: lazyArray };\n                } else {\n                    var properties = { isDevice: false, url: url };\n                }\n                var node = FS.createFile(parent, name, properties, canRead, canWrite);\n                if (properties.contents) {\n                    node.contents = properties.contents;\n                } else if (properties.url) {\n                    node.contents = null;\n                    node.url = properties.url;\n                }\n                Object.defineProperties(node, {\n                    usedBytes: {\n                        get: function () {\n                            return this.contents.length;\n                        },\n                    },\n                });\n                var stream_ops = {};\n                var keys = Object.keys(node.stream_ops);\n                keys.forEach((key) => {\n                    var fn = node.stream_ops[key];\n                    stream_ops[key] = function forceLoadLazyFile() {\n                        FS.forceLoadFile(node);\n                        return fn.apply(null, arguments);\n                    };\n                });\n                function writeChunks(stream, buffer, offset, length, position) {\n                    var contents = stream.node.contents;\n                    if (position >= contents.length) return 0;\n                    var size = Math.min(contents.length - position, length);\n                    if (contents.slice) {\n                        for (var i = 0; i < size; i++) {\n                            buffer[offset + i] = contents[position + i];\n                        }\n                    } else {\n                        for (var i = 0; i < size; i++) {\n                            buffer[offset + i] = contents.get(position + i);\n                        }\n                    }\n                    return size;\n                }\n                stream_ops.read = (stream, buffer, offset, length, position) => {\n                    FS.forceLoadFile(node);\n                    return writeChunks(stream, buffer, offset, length, position);\n                };\n                stream_ops.mmap = (stream, length, position, prot, flags) => {\n                    FS.forceLoadFile(node);\n                    var ptr = mmapAlloc(length);\n                    if (!ptr) {\n                        throw new FS.ErrnoError(48);\n                    }\n                    writeChunks(stream, HEAP8, ptr, length, position);\n                    return { ptr: ptr, allocated: true };\n                };\n                node.stream_ops = stream_ops;\n                return node;\n            },\n            createPreloadedFile: (\n                parent,\n                name,\n                url,\n                canRead,\n                canWrite,\n                onload,\n                onerror,\n                dontCreateFile,\n                canOwn,\n                preFinish,\n            ) => {\n                var fullname = name ? PATH_FS.resolve(PATH.join2(parent, name)) : parent;\n                var dep = getUniqueRunDependency('cp ' + fullname);\n                function processData(byteArray) {\n                    function finish(byteArray) {\n                        if (preFinish) preFinish();\n                        if (!dontCreateFile) {\n                            FS.createDataFile(parent, name, byteArray, canRead, canWrite, canOwn);\n                        }\n                        if (onload) onload();\n                        removeRunDependency(dep);\n                    }\n                    if (\n                        Browser.handledByPreloadPlugin(byteArray, fullname, finish, () => {\n                            if (onerror) onerror();\n                            removeRunDependency(dep);\n                        })\n                    ) {\n                        return;\n                    }\n                    finish(byteArray);\n                }\n                addRunDependency(dep);\n                if (typeof url == 'string') {\n                    asyncLoad(url, (byteArray) => processData(byteArray), onerror);\n                } else {\n                    processData(url);\n                }\n            },\n            indexedDB: () => {\n                return window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n            },\n            DB_NAME: () => {\n                return 'EM_FS_' + window.location.pathname;\n            },\n            DB_VERSION: 20,\n            DB_STORE_NAME: 'FILE_DATA',\n            saveFilesToDB: (paths, onload, onerror) => {\n                onload = onload || (() => {});\n                onerror = onerror || (() => {});\n                var indexedDB = FS.indexedDB();\n                try {\n                    var openRequest = indexedDB.open(FS.DB_NAME(), FS.DB_VERSION);\n                } catch (e) {\n                    return onerror(e);\n                }\n                openRequest.onupgradeneeded = () => {\n                    out('creating db');\n                    var db = openRequest.result;\n                    db.createObjectStore(FS.DB_STORE_NAME);\n                };\n                openRequest.onsuccess = () => {\n                    var db = openRequest.result;\n                    var transaction = db.transaction([FS.DB_STORE_NAME], 'readwrite');\n                    var files = transaction.objectStore(FS.DB_STORE_NAME);\n                    var ok = 0,\n                        fail = 0,\n                        total = paths.length;\n                    function finish() {\n                        if (fail == 0) onload();\n                        else onerror();\n                    }\n                    paths.forEach((path) => {\n                        var putRequest = files.put(FS.analyzePath(path).object.contents, path);\n                        putRequest.onsuccess = () => {\n                            ok++;\n                            if (ok + fail == total) finish();\n                        };\n                        putRequest.onerror = () => {\n                            fail++;\n                            if (ok + fail == total) finish();\n                        };\n                    });\n                    transaction.onerror = onerror;\n                };\n                openRequest.onerror = onerror;\n            },\n            loadFilesFromDB: (paths, onload, onerror) => {\n                onload = onload || (() => {});\n                onerror = onerror || (() => {});\n                var indexedDB = FS.indexedDB();\n                try {\n                    var openRequest = indexedDB.open(FS.DB_NAME(), FS.DB_VERSION);\n                } catch (e) {\n                    return onerror(e);\n                }\n                openRequest.onupgradeneeded = onerror;\n                openRequest.onsuccess = () => {\n                    var db = openRequest.result;\n                    try {\n                        var transaction = db.transaction([FS.DB_STORE_NAME], 'readonly');\n                    } catch (e) {\n                        onerror(e);\n                        return;\n                    }\n                    var files = transaction.objectStore(FS.DB_STORE_NAME);\n                    var ok = 0,\n                        fail = 0,\n                        total = paths.length;\n                    function finish() {\n                        if (fail == 0) onload();\n                        else onerror();\n                    }\n                    paths.forEach((path) => {\n                        var getRequest = files.get(path);\n                        getRequest.onsuccess = () => {\n                            if (FS.analyzePath(path).exists) {\n                                FS.unlink(path);\n                            }\n                            FS.createDataFile(\n                                PATH.dirname(path),\n                                PATH.basename(path),\n                                getRequest.result,\n                                true,\n                                true,\n                                true,\n                            );\n                            ok++;\n                            if (ok + fail == total) finish();\n                        };\n                        getRequest.onerror = () => {\n                            fail++;\n                            if (ok + fail == total) finish();\n                        };\n                    });\n                    transaction.onerror = onerror;\n                };\n                openRequest.onerror = onerror;\n            },\n        };\n        var SYSCALLS = {\n            DEFAULT_POLLMASK: 5,\n            calculateAt: function (dirfd, path, allowEmpty) {\n                if (PATH.isAbs(path)) {\n                    return path;\n                }\n                var dir;\n                if (dirfd === -100) {\n                    dir = FS.cwd();\n                } else {\n                    var dirstream = FS.getStream(dirfd);\n                    if (!dirstream) throw new FS.ErrnoError(8);\n                    dir = dirstream.path;\n                }\n                if (path.length == 0) {\n                    if (!allowEmpty) {\n                        throw new FS.ErrnoError(44);\n                    }\n                    return dir;\n                }\n                return PATH.join2(dir, path);\n            },\n            doStat: function (func, path, buf) {\n                try {\n                    var stat = func(path);\n                } catch (e) {\n                    if (e && e.node && PATH.normalize(path) !== PATH.normalize(FS.getPath(e.node))) {\n                        return -54;\n                    }\n                    throw e;\n                }\n                HEAP32[buf >> 2] = stat.dev;\n                HEAP32[(buf + 4) >> 2] = 0;\n                HEAP32[(buf + 8) >> 2] = stat.ino;\n                HEAP32[(buf + 12) >> 2] = stat.mode;\n                HEAP32[(buf + 16) >> 2] = stat.nlink;\n                HEAP32[(buf + 20) >> 2] = stat.uid;\n                HEAP32[(buf + 24) >> 2] = stat.gid;\n                HEAP32[(buf + 28) >> 2] = stat.rdev;\n                HEAP32[(buf + 32) >> 2] = 0;\n                (tempI64 = [\n                    stat.size >>> 0,\n                    ((tempDouble = stat.size),\n                    +Math.abs(tempDouble) >= 1\n                        ? tempDouble > 0\n                            ? (Math.min(+Math.floor(tempDouble / 4294967296), 4294967295) | 0) >>> 0\n                            : ~~+Math.ceil((tempDouble - +(~~tempDouble >>> 0)) / 4294967296) >>> 0\n                        : 0),\n                ]),\n                    (HEAP32[(buf + 40) >> 2] = tempI64[0]),\n                    (HEAP32[(buf + 44) >> 2] = tempI64[1]);\n                HEAP32[(buf + 48) >> 2] = 4096;\n                HEAP32[(buf + 52) >> 2] = stat.blocks;\n                HEAP32[(buf + 56) >> 2] = (stat.atime.getTime() / 1e3) | 0;\n                HEAP32[(buf + 60) >> 2] = 0;\n                HEAP32[(buf + 64) >> 2] = (stat.mtime.getTime() / 1e3) | 0;\n                HEAP32[(buf + 68) >> 2] = 0;\n                HEAP32[(buf + 72) >> 2] = (stat.ctime.getTime() / 1e3) | 0;\n                HEAP32[(buf + 76) >> 2] = 0;\n                (tempI64 = [\n                    stat.ino >>> 0,\n                    ((tempDouble = stat.ino),\n                    +Math.abs(tempDouble) >= 1\n                        ? tempDouble > 0\n                            ? (Math.min(+Math.floor(tempDouble / 4294967296), 4294967295) | 0) >>> 0\n                            : ~~+Math.ceil((tempDouble - +(~~tempDouble >>> 0)) / 4294967296) >>> 0\n                        : 0),\n                ]),\n                    (HEAP32[(buf + 80) >> 2] = tempI64[0]),\n                    (HEAP32[(buf + 84) >> 2] = tempI64[1]);\n                return 0;\n            },\n            doMsync: function (addr, stream, len, flags, offset) {\n                var buffer = HEAPU8.slice(addr, addr + len);\n                FS.msync(stream, buffer, offset, len, flags);\n            },\n            varargs: undefined,\n            get: function () {\n                SYSCALLS.varargs += 4;\n                var ret = HEAP32[(SYSCALLS.varargs - 4) >> 2];\n                return ret;\n            },\n            getStr: function (ptr) {\n                var ret = UTF8ToString(ptr);\n                return ret;\n            },\n            getStreamFromFD: function (fd) {\n                var stream = FS.getStream(fd);\n                if (!stream) throw new FS.ErrnoError(8);\n                return stream;\n            },\n        };\n        function setErrNo(value) {\n            HEAP32[___errno_location() >> 2] = value;\n            return value;\n        }\n        function ___syscall_fcntl64(fd, cmd, varargs) {\n            SYSCALLS.varargs = varargs;\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                switch (cmd) {\n                    case 0: {\n                        var arg = SYSCALLS.get();\n                        if (arg < 0) {\n                            return -28;\n                        }\n                        var newStream;\n                        newStream = FS.createStream(stream, arg);\n                        return newStream.fd;\n                    }\n                    case 1:\n                    case 2:\n                        return 0;\n                    case 3:\n                        return stream.flags;\n                    case 4: {\n                        var arg = SYSCALLS.get();\n                        stream.flags |= arg;\n                        return 0;\n                    }\n                    case 5: {\n                        var arg = SYSCALLS.get();\n                        var offset = 0;\n                        HEAP16[(arg + offset) >> 1] = 2;\n                        return 0;\n                    }\n                    case 6:\n                    case 7:\n                        return 0;\n                    case 16:\n                    case 8:\n                        return -28;\n                    case 9:\n                        setErrNo(28);\n                        return -1;\n                    default: {\n                        return -28;\n                    }\n                }\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function ___syscall_ioctl(fd, op, varargs) {\n            SYSCALLS.varargs = varargs;\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                switch (op) {\n                    case 21509:\n                    case 21505: {\n                        if (!stream.tty) return -59;\n                        return 0;\n                    }\n                    case 21510:\n                    case 21511:\n                    case 21512:\n                    case 21506:\n                    case 21507:\n                    case 21508: {\n                        if (!stream.tty) return -59;\n                        return 0;\n                    }\n                    case 21519: {\n                        if (!stream.tty) return -59;\n                        var argp = SYSCALLS.get();\n                        HEAP32[argp >> 2] = 0;\n                        return 0;\n                    }\n                    case 21520: {\n                        if (!stream.tty) return -59;\n                        return -28;\n                    }\n                    case 21531: {\n                        var argp = SYSCALLS.get();\n                        return FS.ioctl(stream, op, argp);\n                    }\n                    case 21523: {\n                        if (!stream.tty) return -59;\n                        return 0;\n                    }\n                    case 21524: {\n                        if (!stream.tty) return -59;\n                        return 0;\n                    }\n                    default:\n                        abort('bad ioctl syscall ' + op);\n                }\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function ___syscall_openat(dirfd, path, flags, varargs) {\n            SYSCALLS.varargs = varargs;\n            try {\n                path = SYSCALLS.getStr(path);\n                path = SYSCALLS.calculateAt(dirfd, path);\n                var mode = varargs ? SYSCALLS.get() : 0;\n                return FS.open(path, flags, mode).fd;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        var PIPEFS = {\n            BUCKET_BUFFER_SIZE: 8192,\n            mount: function (mount) {\n                return FS.createNode(null, '/', 16384 | 511, 0);\n            },\n            createPipe: function () {\n                var pipe = { buckets: [], refcnt: 2 };\n                pipe.buckets.push({ buffer: new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE), offset: 0, roffset: 0 });\n                var rName = PIPEFS.nextname();\n                var wName = PIPEFS.nextname();\n                var rNode = FS.createNode(PIPEFS.root, rName, 4096, 0);\n                var wNode = FS.createNode(PIPEFS.root, wName, 4096, 0);\n                rNode.pipe = pipe;\n                wNode.pipe = pipe;\n                var readableStream = FS.createStream({\n                    path: rName,\n                    node: rNode,\n                    flags: 0,\n                    seekable: false,\n                    stream_ops: PIPEFS.stream_ops,\n                });\n                rNode.stream = readableStream;\n                var writableStream = FS.createStream({\n                    path: wName,\n                    node: wNode,\n                    flags: 1,\n                    seekable: false,\n                    stream_ops: PIPEFS.stream_ops,\n                });\n                wNode.stream = writableStream;\n                return { readable_fd: readableStream.fd, writable_fd: writableStream.fd };\n            },\n            stream_ops: {\n                poll: function (stream) {\n                    var pipe = stream.node.pipe;\n                    if ((stream.flags & 2097155) === 1) {\n                        return 256 | 4;\n                    } else {\n                        if (pipe.buckets.length > 0) {\n                            for (var i = 0; i < pipe.buckets.length; i++) {\n                                var bucket = pipe.buckets[i];\n                                if (bucket.offset - bucket.roffset > 0) {\n                                    return 64 | 1;\n                                }\n                            }\n                        }\n                    }\n                    return 0;\n                },\n                ioctl: function (stream, request, varargs) {\n                    return 28;\n                },\n                fsync: function (stream) {\n                    return 28;\n                },\n                read: function (stream, buffer, offset, length, position) {\n                    var pipe = stream.node.pipe;\n                    var currentLength = 0;\n                    for (var i = 0; i < pipe.buckets.length; i++) {\n                        var bucket = pipe.buckets[i];\n                        currentLength += bucket.offset - bucket.roffset;\n                    }\n                    assert(buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer));\n                    var data = buffer.subarray(offset, offset + length);\n                    if (length <= 0) {\n                        return 0;\n                    }\n                    if (currentLength == 0) {\n                        throw new FS.ErrnoError(6);\n                    }\n                    var toRead = Math.min(currentLength, length);\n                    var totalRead = toRead;\n                    var toRemove = 0;\n                    for (var i = 0; i < pipe.buckets.length; i++) {\n                        var currBucket = pipe.buckets[i];\n                        var bucketSize = currBucket.offset - currBucket.roffset;\n                        if (toRead <= bucketSize) {\n                            var tmpSlice = currBucket.buffer.subarray(currBucket.roffset, currBucket.offset);\n                            if (toRead < bucketSize) {\n                                tmpSlice = tmpSlice.subarray(0, toRead);\n                                currBucket.roffset += toRead;\n                            } else {\n                                toRemove++;\n                            }\n                            data.set(tmpSlice);\n                            break;\n                        } else {\n                            var tmpSlice = currBucket.buffer.subarray(currBucket.roffset, currBucket.offset);\n                            data.set(tmpSlice);\n                            data = data.subarray(tmpSlice.byteLength);\n                            toRead -= tmpSlice.byteLength;\n                            toRemove++;\n                        }\n                    }\n                    if (toRemove && toRemove == pipe.buckets.length) {\n                        toRemove--;\n                        pipe.buckets[toRemove].offset = 0;\n                        pipe.buckets[toRemove].roffset = 0;\n                    }\n                    pipe.buckets.splice(0, toRemove);\n                    return totalRead;\n                },\n                write: function (stream, buffer, offset, length, position) {\n                    var pipe = stream.node.pipe;\n                    assert(buffer instanceof ArrayBuffer || ArrayBuffer.isView(buffer));\n                    var data = buffer.subarray(offset, offset + length);\n                    var dataLen = data.byteLength;\n                    if (dataLen <= 0) {\n                        return 0;\n                    }\n                    var currBucket = null;\n                    if (pipe.buckets.length == 0) {\n                        currBucket = { buffer: new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE), offset: 0, roffset: 0 };\n                        pipe.buckets.push(currBucket);\n                    } else {\n                        currBucket = pipe.buckets[pipe.buckets.length - 1];\n                    }\n                    assert(currBucket.offset <= PIPEFS.BUCKET_BUFFER_SIZE);\n                    var freeBytesInCurrBuffer = PIPEFS.BUCKET_BUFFER_SIZE - currBucket.offset;\n                    if (freeBytesInCurrBuffer >= dataLen) {\n                        currBucket.buffer.set(data, currBucket.offset);\n                        currBucket.offset += dataLen;\n                        return dataLen;\n                    } else if (freeBytesInCurrBuffer > 0) {\n                        currBucket.buffer.set(data.subarray(0, freeBytesInCurrBuffer), currBucket.offset);\n                        currBucket.offset += freeBytesInCurrBuffer;\n                        data = data.subarray(freeBytesInCurrBuffer, data.byteLength);\n                    }\n                    var numBuckets = (data.byteLength / PIPEFS.BUCKET_BUFFER_SIZE) | 0;\n                    var remElements = data.byteLength % PIPEFS.BUCKET_BUFFER_SIZE;\n                    for (var i = 0; i < numBuckets; i++) {\n                        var newBucket = {\n                            buffer: new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),\n                            offset: PIPEFS.BUCKET_BUFFER_SIZE,\n                            roffset: 0,\n                        };\n                        pipe.buckets.push(newBucket);\n                        newBucket.buffer.set(data.subarray(0, PIPEFS.BUCKET_BUFFER_SIZE));\n                        data = data.subarray(PIPEFS.BUCKET_BUFFER_SIZE, data.byteLength);\n                    }\n                    if (remElements > 0) {\n                        var newBucket = {\n                            buffer: new Uint8Array(PIPEFS.BUCKET_BUFFER_SIZE),\n                            offset: data.byteLength,\n                            roffset: 0,\n                        };\n                        pipe.buckets.push(newBucket);\n                        newBucket.buffer.set(data);\n                    }\n                    return dataLen;\n                },\n                close: function (stream) {\n                    var pipe = stream.node.pipe;\n                    pipe.refcnt--;\n                    if (pipe.refcnt === 0) {\n                        pipe.buckets = null;\n                    }\n                },\n            },\n            nextname: function () {\n                if (!PIPEFS.nextname.current) {\n                    PIPEFS.nextname.current = 0;\n                }\n                return 'pipe[' + PIPEFS.nextname.current++ + ']';\n            },\n        };\n        function ___syscall_pipe(fdPtr) {\n            try {\n                if (fdPtr == 0) {\n                    throw new FS.ErrnoError(21);\n                }\n                var res = PIPEFS.createPipe();\n                HEAP32[fdPtr >> 2] = res.readable_fd;\n                HEAP32[(fdPtr + 4) >> 2] = res.writable_fd;\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function ___syscall_rmdir(path) {\n            try {\n                path = SYSCALLS.getStr(path);\n                FS.rmdir(path);\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function ___syscall_stat64(path, buf) {\n            try {\n                path = SYSCALLS.getStr(path);\n                return SYSCALLS.doStat(FS.stat, path, buf);\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function ___syscall_unlinkat(dirfd, path, flags) {\n            try {\n                path = SYSCALLS.getStr(path);\n                path = SYSCALLS.calculateAt(dirfd, path);\n                if (flags === 0) {\n                    FS.unlink(path);\n                } else if (flags === 512) {\n                    FS.rmdir(path);\n                } else {\n                    abort('Invalid flags passed to unlinkat');\n                }\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return -e.errno;\n            }\n        }\n        function __emscripten_date_now() {\n            return Date.now();\n        }\n        var nowIsMonotonic = true;\n        function __emscripten_get_now_is_monotonic() {\n            return nowIsMonotonic;\n        }\n        function _abort() {\n            abort('');\n        }\n        var _emscripten_get_now;\n        _emscripten_get_now = () => performance.now();\n        function _emscripten_memcpy_big(dest, src, num) {\n            HEAPU8.copyWithin(dest, src, src + num);\n        }\n        function abortOnCannotGrowMemory(requestedSize) {\n            abort('OOM');\n        }\n        function _emscripten_resize_heap(requestedSize) {\n            var oldSize = HEAPU8.length;\n            requestedSize = requestedSize >>> 0;\n            abortOnCannotGrowMemory(requestedSize);\n        }\n        var ENV = {};\n        function getExecutableName() {\n            return thisProgram || './this.program';\n        }\n        function getEnvStrings() {\n            if (!getEnvStrings.strings) {\n                var lang =\n                    ((typeof navigator == 'object' && navigator.languages && navigator.languages[0]) || 'C').replace(\n                        '-',\n                        '_',\n                    ) + '.UTF-8';\n                var env = {\n                    USER: 'web_user',\n                    LOGNAME: 'web_user',\n                    PATH: '/',\n                    PWD: '/',\n                    HOME: '/home/web_user',\n                    LANG: lang,\n                    _: getExecutableName(),\n                };\n                for (var x in ENV) {\n                    if (ENV[x] === undefined) delete env[x];\n                    else env[x] = ENV[x];\n                }\n                var strings = [];\n                for (var x in env) {\n                    strings.push(x + '=' + env[x]);\n                }\n                getEnvStrings.strings = strings;\n            }\n            return getEnvStrings.strings;\n        }\n        function _environ_get(__environ, environ_buf) {\n            var bufSize = 0;\n            getEnvStrings().forEach(function (string, i) {\n                var ptr = environ_buf + bufSize;\n                HEAPU32[(__environ + i * 4) >> 2] = ptr;\n                writeAsciiToMemory(string, ptr);\n                bufSize += string.length + 1;\n            });\n            return 0;\n        }\n        function _environ_sizes_get(penviron_count, penviron_buf_size) {\n            var strings = getEnvStrings();\n            HEAPU32[penviron_count >> 2] = strings.length;\n            var bufSize = 0;\n            strings.forEach(function (string) {\n                bufSize += string.length + 1;\n            });\n            HEAPU32[penviron_buf_size >> 2] = bufSize;\n            return 0;\n        }\n        function _exit(status) {\n            exit(status);\n        }\n        function _fd_close(fd) {\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                FS.close(stream);\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return e.errno;\n            }\n        }\n        function _fd_fdstat_get(fd, pbuf) {\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                var type = stream.tty ? 2 : FS.isDir(stream.mode) ? 3 : FS.isLink(stream.mode) ? 7 : 4;\n                HEAP8[pbuf >> 0] = type;\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return e.errno;\n            }\n        }\n        function doReadv(stream, iov, iovcnt, offset) {\n            var ret = 0;\n            for (var i = 0; i < iovcnt; i++) {\n                var ptr = HEAPU32[iov >> 2];\n                var len = HEAPU32[(iov + 4) >> 2];\n                iov += 8;\n                var curr = FS.read(stream, HEAP8, ptr, len, offset);\n                if (curr < 0) return -1;\n                ret += curr;\n                if (curr < len) break;\n            }\n            return ret;\n        }\n        function _fd_read(fd, iov, iovcnt, pnum) {\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                var num = doReadv(stream, iov, iovcnt);\n                HEAP32[pnum >> 2] = num;\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return e.errno;\n            }\n        }\n        function convertI32PairToI53Checked(lo, hi) {\n            return (hi + 2097152) >>> 0 < 4194305 - !!lo ? (lo >>> 0) + hi * 4294967296 : NaN;\n        }\n        function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {\n            try {\n                var offset = convertI32PairToI53Checked(offset_low, offset_high);\n                if (isNaN(offset)) return 61;\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                FS.llseek(stream, offset, whence);\n                (tempI64 = [\n                    stream.position >>> 0,\n                    ((tempDouble = stream.position),\n                    +Math.abs(tempDouble) >= 1\n                        ? tempDouble > 0\n                            ? (Math.min(+Math.floor(tempDouble / 4294967296), 4294967295) | 0) >>> 0\n                            : ~~+Math.ceil((tempDouble - +(~~tempDouble >>> 0)) / 4294967296) >>> 0\n                        : 0),\n                ]),\n                    (HEAP32[newOffset >> 2] = tempI64[0]),\n                    (HEAP32[(newOffset + 4) >> 2] = tempI64[1]);\n                if (stream.getdents && offset === 0 && whence === 0) stream.getdents = null;\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return e.errno;\n            }\n        }\n        function doWritev(stream, iov, iovcnt, offset) {\n            var ret = 0;\n            for (var i = 0; i < iovcnt; i++) {\n                var ptr = HEAPU32[iov >> 2];\n                var len = HEAPU32[(iov + 4) >> 2];\n                iov += 8;\n                var curr = FS.write(stream, HEAP8, ptr, len, offset);\n                if (curr < 0) return -1;\n                ret += curr;\n            }\n            return ret;\n        }\n        function _fd_write(fd, iov, iovcnt, pnum) {\n            try {\n                var stream = SYSCALLS.getStreamFromFD(fd);\n                var num = doWritev(stream, iov, iovcnt);\n                HEAPU32[pnum >> 2] = num;\n                return 0;\n            } catch (e) {\n                if (typeof FS == 'undefined' || !(e instanceof FS.ErrnoError)) throw e;\n                return e.errno;\n            }\n        }\n        function _proc_exit(code) {\n            procExit(code);\n        }\n        function __isLeapYear(year) {\n            return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n        }\n        function __arraySum(array, index) {\n            var sum = 0;\n            for (var i = 0; i <= index; sum += array[i++]) {}\n            return sum;\n        }\n        var __MONTH_DAYS_LEAP = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        var __MONTH_DAYS_REGULAR = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        function __addDays(date, days) {\n            var newDate = new Date(date.getTime());\n            while (days > 0) {\n                var leap = __isLeapYear(newDate.getFullYear());\n                var currentMonth = newDate.getMonth();\n                var daysInCurrentMonth = (leap ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR)[currentMonth];\n                if (days > daysInCurrentMonth - newDate.getDate()) {\n                    days -= daysInCurrentMonth - newDate.getDate() + 1;\n                    newDate.setDate(1);\n                    if (currentMonth < 11) {\n                        newDate.setMonth(currentMonth + 1);\n                    } else {\n                        newDate.setMonth(0);\n                        newDate.setFullYear(newDate.getFullYear() + 1);\n                    }\n                } else {\n                    newDate.setDate(newDate.getDate() + days);\n                    return newDate;\n                }\n            }\n            return newDate;\n        }\n        function _strftime(s, maxsize, format, tm) {\n            var tm_zone = HEAP32[(tm + 40) >> 2];\n            var date = {\n                tm_sec: HEAP32[tm >> 2],\n                tm_min: HEAP32[(tm + 4) >> 2],\n                tm_hour: HEAP32[(tm + 8) >> 2],\n                tm_mday: HEAP32[(tm + 12) >> 2],\n                tm_mon: HEAP32[(tm + 16) >> 2],\n                tm_year: HEAP32[(tm + 20) >> 2],\n                tm_wday: HEAP32[(tm + 24) >> 2],\n                tm_yday: HEAP32[(tm + 28) >> 2],\n                tm_isdst: HEAP32[(tm + 32) >> 2],\n                tm_gmtoff: HEAP32[(tm + 36) >> 2],\n                tm_zone: tm_zone ? UTF8ToString(tm_zone) : '',\n            };\n            var pattern = UTF8ToString(format);\n            var EXPANSION_RULES_1 = {\n                '%c': '%a %b %d %H:%M:%S %Y',\n                '%D': '%m/%d/%y',\n                '%F': '%Y-%m-%d',\n                '%h': '%b',\n                '%r': '%I:%M:%S %p',\n                '%R': '%H:%M',\n                '%T': '%H:%M:%S',\n                '%x': '%m/%d/%y',\n                '%X': '%H:%M:%S',\n                '%Ec': '%c',\n                '%EC': '%C',\n                '%Ex': '%m/%d/%y',\n                '%EX': '%H:%M:%S',\n                '%Ey': '%y',\n                '%EY': '%Y',\n                '%Od': '%d',\n                '%Oe': '%e',\n                '%OH': '%H',\n                '%OI': '%I',\n                '%Om': '%m',\n                '%OM': '%M',\n                '%OS': '%S',\n                '%Ou': '%u',\n                '%OU': '%U',\n                '%OV': '%V',\n                '%Ow': '%w',\n                '%OW': '%W',\n                '%Oy': '%y',\n            };\n            for (var rule in EXPANSION_RULES_1) {\n                pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_1[rule]);\n            }\n            var WEEKDAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n            var MONTHS = [\n                'January',\n                'February',\n                'March',\n                'April',\n                'May',\n                'June',\n                'July',\n                'August',\n                'September',\n                'October',\n                'November',\n                'December',\n            ];\n            function leadingSomething(value, digits, character) {\n                var str = typeof value == 'number' ? value.toString() : value || '';\n                while (str.length < digits) {\n                    str = character[0] + str;\n                }\n                return str;\n            }\n            function leadingNulls(value, digits) {\n                return leadingSomething(value, digits, '0');\n            }\n            function compareByDay(date1, date2) {\n                function sgn(value) {\n                    return value < 0 ? -1 : value > 0 ? 1 : 0;\n                }\n                var compare;\n                if ((compare = sgn(date1.getFullYear() - date2.getFullYear())) === 0) {\n                    if ((compare = sgn(date1.getMonth() - date2.getMonth())) === 0) {\n                        compare = sgn(date1.getDate() - date2.getDate());\n                    }\n                }\n                return compare;\n            }\n            function getFirstWeekStartDate(janFourth) {\n                switch (janFourth.getDay()) {\n                    case 0:\n                        return new Date(janFourth.getFullYear() - 1, 11, 29);\n                    case 1:\n                        return janFourth;\n                    case 2:\n                        return new Date(janFourth.getFullYear(), 0, 3);\n                    case 3:\n                        return new Date(janFourth.getFullYear(), 0, 2);\n                    case 4:\n                        return new Date(janFourth.getFullYear(), 0, 1);\n                    case 5:\n                        return new Date(janFourth.getFullYear() - 1, 11, 31);\n                    case 6:\n                        return new Date(janFourth.getFullYear() - 1, 11, 30);\n                }\n            }\n            function getWeekBasedYear(date) {\n                var thisDate = __addDays(new Date(date.tm_year + 1900, 0, 1), date.tm_yday);\n                var janFourthThisYear = new Date(thisDate.getFullYear(), 0, 4);\n                var janFourthNextYear = new Date(thisDate.getFullYear() + 1, 0, 4);\n                var firstWeekStartThisYear = getFirstWeekStartDate(janFourthThisYear);\n                var firstWeekStartNextYear = getFirstWeekStartDate(janFourthNextYear);\n                if (compareByDay(firstWeekStartThisYear, thisDate) <= 0) {\n                    if (compareByDay(firstWeekStartNextYear, thisDate) <= 0) {\n                        return thisDate.getFullYear() + 1;\n                    } else {\n                        return thisDate.getFullYear();\n                    }\n                } else {\n                    return thisDate.getFullYear() - 1;\n                }\n            }\n            var EXPANSION_RULES_2 = {\n                '%a': function (date) {\n                    return WEEKDAYS[date.tm_wday].substring(0, 3);\n                },\n                '%A': function (date) {\n                    return WEEKDAYS[date.tm_wday];\n                },\n                '%b': function (date) {\n                    return MONTHS[date.tm_mon].substring(0, 3);\n                },\n                '%B': function (date) {\n                    return MONTHS[date.tm_mon];\n                },\n                '%C': function (date) {\n                    var year = date.tm_year + 1900;\n                    return leadingNulls((year / 100) | 0, 2);\n                },\n                '%d': function (date) {\n                    return leadingNulls(date.tm_mday, 2);\n                },\n                '%e': function (date) {\n                    return leadingSomething(date.tm_mday, 2, ' ');\n                },\n                '%g': function (date) {\n                    return getWeekBasedYear(date).toString().substring(2);\n                },\n                '%G': function (date) {\n                    return getWeekBasedYear(date);\n                },\n                '%H': function (date) {\n                    return leadingNulls(date.tm_hour, 2);\n                },\n                '%I': function (date) {\n                    var twelveHour = date.tm_hour;\n                    if (twelveHour == 0) twelveHour = 12;\n                    else if (twelveHour > 12) twelveHour -= 12;\n                    return leadingNulls(twelveHour, 2);\n                },\n                '%j': function (date) {\n                    return leadingNulls(\n                        date.tm_mday +\n                            __arraySum(\n                                __isLeapYear(date.tm_year + 1900) ? __MONTH_DAYS_LEAP : __MONTH_DAYS_REGULAR,\n                                date.tm_mon - 1,\n                            ),\n                        3,\n                    );\n                },\n                '%m': function (date) {\n                    return leadingNulls(date.tm_mon + 1, 2);\n                },\n                '%M': function (date) {\n                    return leadingNulls(date.tm_min, 2);\n                },\n                '%n': function () {\n                    return '\\n';\n                },\n                '%p': function (date) {\n                    if (date.tm_hour >= 0 && date.tm_hour < 12) {\n                        return 'AM';\n                    } else {\n                        return 'PM';\n                    }\n                },\n                '%S': function (date) {\n                    return leadingNulls(date.tm_sec, 2);\n                },\n                '%t': function () {\n                    return '\\t';\n                },\n                '%u': function (date) {\n                    return date.tm_wday || 7;\n                },\n                '%U': function (date) {\n                    var days = date.tm_yday + 7 - date.tm_wday;\n                    return leadingNulls(Math.floor(days / 7), 2);\n                },\n                '%V': function (date) {\n                    var val = Math.floor((date.tm_yday + 7 - ((date.tm_wday + 6) % 7)) / 7);\n                    if ((date.tm_wday + 371 - date.tm_yday - 2) % 7 <= 2) {\n                        val++;\n                    }\n                    if (!val) {\n                        val = 52;\n                        var dec31 = (date.tm_wday + 7 - date.tm_yday - 1) % 7;\n                        if (dec31 == 4 || (dec31 == 5 && __isLeapYear((date.tm_year % 400) - 1))) {\n                            val++;\n                        }\n                    } else if (val == 53) {\n                        var jan1 = (date.tm_wday + 371 - date.tm_yday) % 7;\n                        if (jan1 != 4 && (jan1 != 3 || !__isLeapYear(date.tm_year))) val = 1;\n                    }\n                    return leadingNulls(val, 2);\n                },\n                '%w': function (date) {\n                    return date.tm_wday;\n                },\n                '%W': function (date) {\n                    var days = date.tm_yday + 7 - ((date.tm_wday + 6) % 7);\n                    return leadingNulls(Math.floor(days / 7), 2);\n                },\n                '%y': function (date) {\n                    return (date.tm_year + 1900).toString().substring(2);\n                },\n                '%Y': function (date) {\n                    return date.tm_year + 1900;\n                },\n                '%z': function (date) {\n                    var off = date.tm_gmtoff;\n                    var ahead = off >= 0;\n                    off = Math.abs(off) / 60;\n                    off = (off / 60) * 100 + (off % 60);\n                    return (ahead ? '+' : '-') + String('0000' + off).slice(-4);\n                },\n                '%Z': function (date) {\n                    return date.tm_zone;\n                },\n                '%%': function () {\n                    return '%';\n                },\n            };\n            pattern = pattern.replace(/%%/g, '\\0\\0');\n            for (var rule in EXPANSION_RULES_2) {\n                if (pattern.includes(rule)) {\n                    pattern = pattern.replace(new RegExp(rule, 'g'), EXPANSION_RULES_2[rule](date));\n                }\n            }\n            pattern = pattern.replace(/\\0\\0/g, '%');\n            var bytes = intArrayFromString(pattern, false);\n            if (bytes.length > maxsize) {\n                return 0;\n            }\n            writeArrayToMemory(bytes, s);\n            return bytes.length - 1;\n        }\n        function _strftime_l(s, maxsize, format, tm) {\n            return _strftime(s, maxsize, format, tm);\n        }\n        var FSNode = function (parent, name, mode, rdev) {\n            if (!parent) {\n                parent = this;\n            }\n            this.parent = parent;\n            this.mount = parent.mount;\n            this.mounted = null;\n            this.id = FS.nextInode++;\n            this.name = name;\n            this.mode = mode;\n            this.node_ops = {};\n            this.stream_ops = {};\n            this.rdev = rdev;\n        };\n        var readMode = 292 | 73;\n        var writeMode = 146;\n        Object.defineProperties(FSNode.prototype, {\n            read: {\n                get: function () {\n                    return (this.mode & readMode) === readMode;\n                },\n                set: function (val) {\n                    val ? (this.mode |= readMode) : (this.mode &= ~readMode);\n                },\n            },\n            write: {\n                get: function () {\n                    return (this.mode & writeMode) === writeMode;\n                },\n                set: function (val) {\n                    val ? (this.mode |= writeMode) : (this.mode &= ~writeMode);\n                },\n            },\n            isFolder: {\n                get: function () {\n                    return FS.isDir(this.mode);\n                },\n            },\n            isDevice: {\n                get: function () {\n                    return FS.isChrdev(this.mode);\n                },\n            },\n        });\n        FS.FSNode = FSNode;\n        FS.staticInit();\n        function intArrayFromString(stringy, dontAddNull, length) {\n            var len = length > 0 ? length : lengthBytesUTF8(stringy) + 1;\n            var u8array = new Array(len);\n            var numBytesWritten = stringToUTF8Array(stringy, u8array, 0, u8array.length);\n            if (dontAddNull) u8array.length = numBytesWritten;\n            return u8array;\n        }\n        var asmLibraryArg = {\n            s: ___call_sighandler,\n            a: ___cxa_allocate_exception,\n            b: ___cxa_throw,\n            h: ___syscall_fcntl64,\n            y: ___syscall_ioctl,\n            z: ___syscall_openat,\n            t: ___syscall_pipe,\n            q: ___syscall_rmdir,\n            p: ___syscall_stat64,\n            r: ___syscall_unlinkat,\n            e: __emscripten_date_now,\n            j: __emscripten_get_now_is_monotonic,\n            c: _abort,\n            i: _emscripten_get_now,\n            k: _emscripten_memcpy_big,\n            o: _emscripten_resize_heap,\n            v: _environ_get,\n            w: _environ_sizes_get,\n            d: _exit,\n            g: _fd_close,\n            u: _fd_fdstat_get,\n            x: _fd_read,\n            m: _fd_seek,\n            f: _fd_write,\n            l: _proc_exit,\n            n: _strftime_l,\n        };\n        var asm = createWasm();\n        var ___wasm_call_ctors = (Module['___wasm_call_ctors'] = function () {\n            return (___wasm_call_ctors = Module['___wasm_call_ctors'] = Module['asm']['B']).apply(null, arguments);\n        });\n        var _main = (Module['_main'] = function () {\n            return (_main = Module['_main'] = Module['asm']['D']).apply(null, arguments);\n        });\n        var ___errno_location = (Module['___errno_location'] = function () {\n            return (___errno_location = Module['___errno_location'] = Module['asm']['E']).apply(null, arguments);\n        });\n        var _malloc = (Module['_malloc'] = function () {\n            return (_malloc = Module['_malloc'] = Module['asm']['F']).apply(null, arguments);\n        });\n        var stackSave = (Module['stackSave'] = function () {\n            return (stackSave = Module['stackSave'] = Module['asm']['G']).apply(null, arguments);\n        });\n        var stackRestore = (Module['stackRestore'] = function () {\n            return (stackRestore = Module['stackRestore'] = Module['asm']['H']).apply(null, arguments);\n        });\n        var stackAlloc = (Module['stackAlloc'] = function () {\n            return (stackAlloc = Module['stackAlloc'] = Module['asm']['I']).apply(null, arguments);\n        });\n        var ___cxa_is_pointer_type = (Module['___cxa_is_pointer_type'] = function () {\n            return (___cxa_is_pointer_type = Module['___cxa_is_pointer_type'] = Module['asm']['J']).apply(\n                null,\n                arguments,\n            );\n        });\n        Module['ccall'] = ccall;\n        Module['cwrap'] = cwrap;\n        var calledRun;\n        function ExitStatus(status) {\n            this.name = 'ExitStatus';\n            this.message = 'Program terminated with exit(' + status + ')';\n            this.status = status;\n        }\n        var calledMain = false;\n        dependenciesFulfilled = function runCaller() {\n            if (!calledRun) run();\n            if (!calledRun) dependenciesFulfilled = runCaller;\n        };\n        function callMain(args) {\n            var entryFunction = Module['_main'];\n            args = args || [];\n            args.unshift(thisProgram);\n            var argc = args.length;\n            var argv = stackAlloc((argc + 1) * 4);\n            var argv_ptr = argv >> 2;\n            args.forEach((arg) => {\n                HEAP32[argv_ptr++] = allocateUTF8OnStack(arg);\n            });\n            HEAP32[argv_ptr] = 0;\n            try {\n                var ret = entryFunction(argc, argv);\n                exit(ret, true);\n                return ret;\n            } catch (e) {\n                return handleException(e);\n            } finally {\n                calledMain = true;\n            }\n        }\n        // Function responsable for running the cvc5 web assembly code with the\n        //  arguments passed to the Module.\n        function run(args) {\n            // Get the arguments passed to the Module (an array of strings)\n            args = args || arguments_;\n            if (runDependencies > 0) {\n                return;\n            }\n            preRun();\n            if (runDependencies > 0) {\n                return;\n            }\n            function doRun() {\n                if (calledRun) return;\n                calledRun = true;\n                Module['calledRun'] = true;\n                if (ABORT) return;\n                initRuntime();\n                preMain();\n                readyPromiseResolve(Module);\n                // Call the execution of the main function\n                if (shouldRunNow) callMain(args);\n                // Call the post run function when no error happen\n                postRun();\n            }\n            {\n                doRun();\n            }\n        }\n        Module['run'] = run;\n        function exit(status, implicit) {\n            EXITSTATUS = status;\n            procExit(status);\n        }\n        function procExit(code) {\n            EXITSTATUS = code;\n            if (!keepRuntimeAlive()) {\n                ABORT = true;\n            }\n            quit_(code, new ExitStatus(code));\n        }\n        var shouldRunNow = true;\n        run();\n\n        return Module.ready;\n    };\n})();\nif (typeof exports === 'object' && typeof module === 'object') module.exports = Module;\nelse if (typeof define === 'function' && define['amd'])\n    define([], function () {\n        return Module;\n    });\nelse if (typeof exports === 'object') exports['Module'] = Module;\n","export enum drawerHelpersKind {\r\n    RULE,\r\n    ARGS,\r\n    CONC,\r\n    ALL,\r\n}\r\n\r\nexport enum renderLetKind {\r\n    EXPAND,\r\n    REVERT,\r\n}\r\n\r\nexport enum ClusterKind {\r\n    NONE,\r\n    SAT,\r\n    CNF,\r\n    TL,\r\n    PP,\r\n    IN,\r\n}\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport type { RootState, AppDispatch } from './store';\r\n\r\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from '../../store';\r\nimport { FileState } from '../../../interfaces/interfaces';\r\n\r\nconst initialState: FileState = {\r\n    name: 'ex.smt2',\r\n    value: 'digraph proof {\\n\\trankdir=\"BT\";\\n\\tnode [shape=record];\\n\\t0 [label=\"{SCOPE((not a), a)|(not (and (not a) a))}\", class = \" basic \", comment = \"{\\'subProofQty\\':1}\" ];\\n\\t1 [label=\"{CHAIN_RESOLUTION(true, a)|false}\", class = \" propositional \", comment = \"{\\'subProofQty\\':2}\" ];\\n\\t2 [label=\"{ASSUME(a)|a}\", comment = \"{\\'subProofQty\\':0}\"];\\n\\t3 [label=\"{ASSUME((not a))|(not a)}\", comment = \"{\\'subProofQty\\':0}\"];\\n\\t1->0;\\n\\t2->1;\\n\\t3->1;\\n}',\r\n    filesCount: 0,\r\n};\r\n\r\nexport const fileSlice = createSlice({\r\n    name: 'file',\r\n    initialState,\r\n    // The `reducers` field lets us define reducers and generate associated actions\r\n    reducers: {\r\n        set: (state, action: PayloadAction<{ name: string; value: string }>) => {\r\n            state.name = action.payload.name;\r\n            if (state.value !== action.payload.value) {\r\n                state.value = action.payload.value;\r\n                state.filesCount++;\r\n            }\r\n        },\r\n    },\r\n});\r\n\r\nexport const { set } = fileSlice.actions;\r\n\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectFileName = (state: RootState): string => state.file.name;\r\n\r\nexport const selectFileExtension = (state: RootState): string => {\r\n    const ext = state.file.name.split('.').pop();\r\n    return ext ? ext : '';\r\n};\r\n\r\nexport const selectDot = (state: RootState): string =>\r\n    state.file.name.split('.').pop() === 'json' ? JSON.parse(state.file.value).dot : state.file.value;\r\n\r\nexport const selectFile = (state: RootState): string => state.file.value;\r\n\r\nexport const selectFileCount = (state: RootState): number => state.file.filesCount;\r\n\r\nexport default fileSlice.reducer;\r\n","import { ClusterKind } from '../../../interfaces/enum';\r\nimport { NodeInterface, ProofState } from '../../../interfaces/interfaces';\r\n\r\ninterface ClusterColorMap {\r\n    [type: number]: string;\r\n}\r\n\r\nfunction removeEscapedCharacters(s: string): string {\r\n    let newS = '';\r\n    for (let i = 0; i < s.length; i += 1) {\r\n        if (\r\n            !(\r\n                s[i] === '\\\\' &&\r\n                (s[i + 1] === '\"' ||\r\n                    s[i + 1] === '>' ||\r\n                    s[i + 1] === '<' ||\r\n                    s[i + 1] === '{' ||\r\n                    s[i + 1] === '}' ||\r\n                    s[i + 1] === '|')\r\n            )\r\n        ) {\r\n            newS += s[i];\r\n        }\r\n    }\r\n\r\n    return newS;\r\n}\r\n\r\nexport function processDot(dot: string): [NodeInterface[], ProofState['letMap'], ClusterColorMap] {\r\n    const nodes: NodeInterface[] = [\r\n        {\r\n            id: 0,\r\n            conclusion: '',\r\n            rule: '',\r\n            args: '',\r\n            children: [],\r\n            parents: [NaN],\r\n            descendants: 0,\r\n            dependencies: [],\r\n            clusterType: ClusterKind.NONE,\r\n        },\r\n    ];\r\n    let comment: string | null = dot.slice(dot.indexOf('comment='));\r\n    comment = comment\r\n        ? removeEscapedCharacters(\r\n              removeEscapedCharacters(comment.slice(comment.indexOf('=') + 2, comment.indexOf(';') - 1)),\r\n          )\r\n        : null;\r\n\r\n    const clustersInfos: ClusterColorMap = {};\r\n    const lines = dot\r\n        .slice(dot.indexOf('{') + 1, dot.lastIndexOf('}') - 2)\r\n        .replace(/(\\n|\\t)/gm, '')\r\n        .split(';');\r\n    lines.forEach((line) => {\r\n        if (line.search('subgraph') !== -1) {\r\n            // Get the label of this node subgraph\r\n            let label = '';\r\n            let idx = line.indexOf('label=\"') + 7;\r\n            while (line[idx] !== '\"') {\r\n                label += line[idx];\r\n                idx++;\r\n            }\r\n\r\n            // Get the label of this node subgraph\r\n            let color = '';\r\n            idx = line.indexOf('bgcolor=\"') + 9;\r\n            while (line[idx] !== '\"') {\r\n                color += line[idx];\r\n                idx++;\r\n            }\r\n\r\n            // Get the nodes ID's\r\n            const numbers = line\r\n                .substring(idx + 1, line.length - 1)\r\n                .split(/\\s/)\r\n                .filter((str) => str.length)\r\n                .map((num) => Number(num));\r\n\r\n            let thisType: ClusterKind;\r\n            switch (label) {\r\n                case 'SAT':\r\n                    thisType = ClusterKind.SAT;\r\n                    break;\r\n                case 'CNF':\r\n                    thisType = ClusterKind.CNF;\r\n                    break;\r\n                case 'TL':\r\n                    thisType = ClusterKind.TL;\r\n                    break;\r\n                case 'PP':\r\n                    thisType = ClusterKind.PP;\r\n                    break;\r\n                case 'IN':\r\n                    thisType = ClusterKind.IN;\r\n                    break;\r\n                default:\r\n                    thisType = ClusterKind.NONE;\r\n            }\r\n\r\n            // Assign the type for each node\r\n            numbers.forEach((num) => {\r\n                nodes[num].clusterType = thisType;\r\n            });\r\n            clustersInfos[thisType] = color;\r\n        } else if (line.search('label') !== -1) {\r\n            const id = parseInt(line.slice(0, line.indexOf('[')).trim());\r\n            const attributes = line.slice(line.indexOf('[') + 1, line.lastIndexOf(']')).trim();\r\n\r\n            let label = attributes.slice(attributes.search(/[^\\\\]\"/) + 3);\r\n            label = label.slice(0, label.search(/[^\\\\]\"/));\r\n            let [conclusion, rule, args] = ['', '', ''];\r\n            [conclusion, rule] = label.split(/\\|/);\r\n            [rule, args] = rule.indexOf(' :args ') != -1 ? rule.split(' :args ') : [rule, ''];\r\n\r\n            const comment: string = removeEscapedCharacters(line.slice(line.indexOf('comment'), line.lastIndexOf('\"')));\r\n            const commentJSON = JSON.parse(comment.slice(comment.indexOf('\"') + 1).replace(/'/g, '\"'));\r\n\r\n            if (!nodes[id]) {\r\n                nodes[id] = {\r\n                    id: id,\r\n                    conclusion: '',\r\n                    rule: '',\r\n                    args: '',\r\n                    children: [],\r\n                    parents: [NaN],\r\n                    descendants: 0,\r\n                    dependencies: [],\r\n                    clusterType: ClusterKind.NONE,\r\n                };\r\n            }\r\n            nodes[id].conclusion = removeEscapedCharacters(conclusion);\r\n            nodes[id].rule = removeEscapedCharacters(rule);\r\n            nodes[id].args = removeEscapedCharacters(args);\r\n            nodes[id].descendants = commentJSON.subProofQty;\r\n        } else if (line.search('->') !== -1) {\r\n            const [child, parent] = line.split('->').map((x) => parseInt(x.trim()));\r\n            nodes[parent].children.push(child);\r\n            // If there isn't a child node\r\n            if (!nodes[child]) {\r\n                nodes[child] = {\r\n                    id: child,\r\n                    conclusion: '',\r\n                    rule: '',\r\n                    args: '',\r\n                    children: [],\r\n                    parents: [],\r\n                    descendants: 0,\r\n                    dependencies: [],\r\n                    clusterType: ClusterKind.NONE,\r\n                };\r\n            }\r\n            // If there is and is an invalid parent\r\n            else if (isNaN(nodes[child].parents[0])) {\r\n                nodes[child].parents = [];\r\n            }\r\n            nodes[child].parents.push(parent);\r\n        }\r\n    });\r\n\r\n    return comment ? [nodes, JSON.parse(comment)['letMap'], clustersInfos] : [nodes, {}, clustersInfos];\r\n}\r\n\r\nexport const piNodeParents = (\r\n    proof: NodeInterface[],\r\n    hiddenNodesArray: number[],\r\n    dependencies: { [parentId: number]: number[] } = {},\r\n): number[] => {\r\n    const parents = hiddenNodesArray\r\n        // Concat all the parents\r\n        .reduce((acc: number[], hiddenNode) => {\r\n            let haveHiddenParent = false;\r\n\r\n            proof[hiddenNode].parents.forEach((parent) => {\r\n                // If this parent is a hidden node\r\n                if (hiddenNodesArray.indexOf(parent) !== -1) {\r\n                    haveHiddenParent = true;\r\n                } else {\r\n                    dependencies[parent]\r\n                        ? dependencies[parent].push(hiddenNode)\r\n                        : (dependencies[parent] = [hiddenNode]);\r\n                }\r\n            });\r\n\r\n            if (haveHiddenParent) return acc;\r\n            return acc.concat(proof[hiddenNode].parents);\r\n        }, [])\r\n        // Filter the duplicated elements\r\n        .filter((parent, i, self) => self.indexOf(parent) === i)\r\n        // Only the parents that aren't in he hidden nodes array remains\r\n        .filter((parent) => hiddenNodesArray.indexOf(parent) === -1);\r\n\r\n    // Removes the pi node parents from the dependencies\r\n    Object.keys(dependencies).forEach((parent) => {\r\n        const n = Number(parent);\r\n        if (parents.indexOf(n) !== -1) delete dependencies[n];\r\n    });\r\n\r\n    return parents;\r\n};\r\n\r\nexport const descendants = (proof: NodeInterface[], nodeId: number): number[] => {\r\n    return proof[nodeId].children.concat(\r\n        proof[nodeId].children.reduce((acc: number[], childId) => acc.concat(descendants(proof, childId)), []),\r\n    );\r\n};\r\n\r\nexport const piNodeChildren = (proof: NodeInterface[], hiddenNodesArray: number[]): number[] => {\r\n    const children = hiddenNodesArray\r\n        // Get all the childrens\r\n        .reduce((acc: number[], hiddenNode) => acc.concat(proof[hiddenNode].children), [])\r\n        // Exclude the childrens that are part of the hidden nodes\r\n        .filter((child) => hiddenNodesArray.indexOf(child) === -1);\r\n    return children;\r\n};\r\n\r\nexport const findNodesClusters = (proof: NodeInterface[], hiddenNodesArray: number[]): number[][] => {\r\n    const hiddenNodes = [...hiddenNodesArray];\r\n    const clusters: number[][] = [];\r\n    let clusteredNodes = 0;\r\n    const parents = hiddenNodes.map((hiddenNode) => proof[hiddenNode].parents);\r\n\r\n    // Cluster the nodes based on similiar parents\r\n    parents.forEach((parent, clusterID) => {\r\n        // If not all of the nodes where clustered and is a non empty cluster\r\n        if (clusteredNodes !== parents.length && parents[clusterID].length) {\r\n            clusters.push([]);\r\n            parents.forEach((p, hiddenID) => {\r\n                // If those nodes have some parent in commom and they weren't verified yet\r\n                if (parents[hiddenID].length && parent.some((_p) => p.indexOf(_p) !== -1)) {\r\n                    clusters[clusters.length - 1].push(hiddenNodes[hiddenID]);\r\n                    // Removes these parents from the array, making shure they will not get verified again (already clustered)\r\n                    parents[hiddenID] = [];\r\n                    // Increases the number o clustered nodes\r\n                    clusteredNodes++;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    let pastCluster: number[][] = [];\r\n    // Cluster the nodes until there aren't changes being made\r\n    while (JSON.stringify(pastCluster) != JSON.stringify(clusters)) {\r\n        pastCluster = [...clusters];\r\n        clusters.forEach((cluster, clusterID) => {\r\n            const clusterParents = proof[cluster[0]].parents;\r\n\r\n            // For each cluster\r\n            clusters.forEach((parentCluster, id) => {\r\n                // If this parentCluster (cluster) is parent of the current cluster\r\n                if (parentCluster.some((hiddenID) => clusterParents.indexOf(hiddenID) !== -1)) {\r\n                    // Group the nodes couple in one single cluster (the parent cluster)\r\n                    clusters[id] = clusters[id].concat(clusters[clusterID]);\r\n                    clusters.splice(clusterID, 1);\r\n                    clusterID--;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // Filter the nodes with length 1\r\n    return clusters.filter((cluster) => cluster.length > 1);\r\n};\r\n\r\nexport const groupPiNodeDependencies = (\r\n    proof: NodeInterface[],\r\n    hiddenNodesArray: number[],\r\n): NodeInterface['dependencies'] => {\r\n    const piNodeDependencies: NodeInterface['dependencies'] = [];\r\n    const depMap: { [piID: number]: number } = {};\r\n\r\n    // Copy all the hidden nodes dependencies to the new pi node\r\n    proof.forEach((node) => {\r\n        // Search for all the hidden nodes that have deps\r\n        if (hiddenNodesArray.indexOf(node.id) !== -1 && node.dependencies.length) {\r\n            // For each dependence in this node\r\n            node.dependencies.forEach((dep) => {\r\n                // This pi node dependence wasn't inserted yet\r\n                if (Object.keys(depMap).indexOf(String(dep.piId)) === -1) {\r\n                    piNodeDependencies.push(dep);\r\n                    depMap[dep.piId] = piNodeDependencies.length - 1;\r\n                }\r\n                // Concat the nodes inside the pi node already inserted\r\n                else {\r\n                    piNodeDependencies[depMap[dep.piId]].depsId = piNodeDependencies[depMap[dep.piId]].depsId.concat(\r\n                        dep.depsId,\r\n                    );\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return piNodeDependencies;\r\n};\r\n\r\nexport const sliceNodesCluster = (\r\n    proof: NodeInterface[],\r\n    clusterMap: number[],\r\n    nodeId = 0,\r\n    slicedClusters: number[][] = [],\r\n): number[][] => {\r\n    const currentNode = proof[nodeId];\r\n\r\n    // If the node id is valid and wasn't inserted yet\r\n    if (nodeId && clusterMap[currentNode.id] === -1) {\r\n        // Get all parents with the same type\r\n        const parentsClusters: { [parentID: number]: number } = {};\r\n        for (let i = 0; i < currentNode.parents.length; i++) {\r\n            const p = currentNode.parents[i];\r\n            if (proof[p].clusterType === currentNode.clusterType) {\r\n                parentsClusters[p] = clusterMap[p];\r\n                break;\r\n            }\r\n        }\r\n\r\n        const keys = Object.keys(parentsClusters);\r\n\r\n        // If the current node has the same type as (at least) one of it's parents\r\n        if (keys.length) {\r\n            // Put the current node in the cluster of the first parent with the same type\r\n            const target = parentsClusters[Number(keys[0])];\r\n            slicedClusters[target].push(currentNode.id);\r\n            clusterMap[currentNode.id] = target;\r\n        }\r\n        // Parent with different type\r\n        else {\r\n            const clusterID = slicedClusters.length;\r\n            clusterMap[currentNode.id] = clusterID;\r\n            slicedClusters.push([currentNode.id]);\r\n\r\n            // Add the brothers with the same type in the same cluster\r\n            proof[currentNode.parents[0]].children.forEach((c) => {\r\n                // If the brother node has the same type as the current one\r\n                if (proof[c].clusterType === currentNode.clusterType && c !== currentNode.id) {\r\n                    slicedClusters[clusterID].push(c);\r\n                    clusterMap[c] = clusterID;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    currentNode.children.forEach((child) => {\r\n        sliceNodesCluster(proof, clusterMap, child, slicedClusters);\r\n    });\r\n    return slicedClusters;\r\n};\r\n\r\nexport const extractTheoryLemmas = (\r\n    proof: NodeInterface[],\r\n    clusters: ProofState['clustersInfos'],\r\n    haveCluster: boolean,\r\n): ProofState['theoryLemmaMap'] => {\r\n    // If have clusters registered\r\n    if (haveCluster) {\r\n        return [proof[0].conclusion].concat(\r\n            clusters.filter((c) => c.type === ClusterKind.TL).map((c) => proof[c.hiddenNodes[0]].conclusion),\r\n        );\r\n    } else {\r\n        return proof.filter((n) => n.rule === 'SCOPE').map((n) => n.conclusion);\r\n    }\r\n};\r\n","export const colorConverter = (colorName: string): string => {\r\n    let color = '#fff';\r\n    switch (colorName) {\r\n        case 'red':\r\n            color = '#f72b34';\r\n            break;\r\n        case 'orange':\r\n            color = '#ff8334';\r\n            break;\r\n        case 'yellow':\r\n            color = '#ffc149';\r\n            break;\r\n        case 'green':\r\n            color = '#60aa51';\r\n            break;\r\n        case 'blue':\r\n            color = '#0097e4';\r\n            break;\r\n        case 'purple':\r\n            color = '#a73da5';\r\n            break;\r\n        case 'brown':\r\n            color = '#a95a49';\r\n            break;\r\n        case 'black':\r\n            color = '#464646';\r\n            break;\r\n\r\n        case 'white':\r\n            color = '#f0f0f0';\r\n            break;\r\n    }\r\n    return color;\r\n};\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from '../../store';\r\nimport {\r\n    processDot,\r\n    piNodeChildren,\r\n    piNodeParents,\r\n    descendants,\r\n    findNodesClusters,\r\n    groupPiNodeDependencies,\r\n    sliceNodesCluster,\r\n    extractTheoryLemmas,\r\n} from './auxi';\r\nimport { NodeInterface, ProofState } from '../../../interfaces/interfaces';\r\nimport { colorConverter } from '../theme/auxi';\r\nimport { ClusterKind } from '../../../interfaces/enum';\r\n\r\nconst initialState: ProofState = {\r\n    proof: [],\r\n    view: 'full',\r\n    style: 'graph',\r\n    hiddenNodes: [],\r\n    letMap: {},\r\n    theoryLemmaMap: [],\r\n    visualInfo: [],\r\n    clustersInfos: [],\r\n    smt: '',\r\n};\r\n\r\nexport const proofSlice = createSlice({\r\n    name: 'proof',\r\n    initialState,\r\n\r\n    reducers: {\r\n        process: (state, action: PayloadAction<string>) => {\r\n            // Reset the state\r\n            state.clustersInfos = [];\r\n\r\n            let proofJSON;\r\n            let dot = action.payload;\r\n            let isJSON = false;\r\n\r\n            // If the payload is a .json file\r\n            if (dot.indexOf('{\"dot\":\"') !== -1) {\r\n                proofJSON = JSON.parse(dot);\r\n                dot = proofJSON.dot;\r\n                isJSON = true;\r\n            }\r\n\r\n            const [proof, letMap, clustersColors] = processDot(dot);\r\n            state.proof = proof;\r\n            state.letMap = letMap;\r\n            state.view = 'full';\r\n\r\n            // If there are clusters\r\n            let clusters: number[][] = [];\r\n            if (Object.keys(clustersColors).length) {\r\n                state.view = 'clustered';\r\n\r\n                // Slice the clusters\r\n                const clustersMap: number[] = Array(state.proof.length).fill(-1);\r\n                clusters = sliceNodesCluster(state.proof, clustersMap);\r\n\r\n                // Maps the cluster infos\r\n                clusters.forEach((cluster) => {\r\n                    const type = state.proof[cluster[0]].clusterType;\r\n                    state.clustersInfos.push({\r\n                        hiddenNodes: cluster,\r\n                        type: type,\r\n                        color: colorConverter(clustersColors[type]),\r\n                    });\r\n                });\r\n\r\n                // Extract the theory lemmas\r\n                state.theoryLemmaMap = extractTheoryLemmas(state.proof, state.clustersInfos, true);\r\n            } else {\r\n                state.theoryLemmaMap = extractTheoryLemmas(state.proof, state.clustersInfos, false);\r\n            }\r\n\r\n            if (isJSON) {\r\n                state.view = proofJSON.view;\r\n                state.hiddenNodes = proofJSON.hiddenNodes;\r\n                state.visualInfo = proofJSON.visualInfo;\r\n            }\r\n            // Is .dot\r\n            else {\r\n                state.hiddenNodes = clusters.filter((c) => c.length > 1);\r\n\r\n                // Init the visual info\r\n                const visualInfo: ProofState['visualInfo'] = {};\r\n                state.proof.forEach((node) => {\r\n                    visualInfo[node.id] = {\r\n                        color: '#fff',\r\n                        x: 0,\r\n                        y: 0,\r\n                        selected: false,\r\n                    };\r\n                });\r\n\r\n                let size = state.proof.length;\r\n                state.clustersInfos.forEach((cluster) => {\r\n                    visualInfo[cluster.hiddenNodes.length !== 1 ? size++ : cluster.hiddenNodes[0]] = {\r\n                        color: cluster.color,\r\n                        x: 0,\r\n                        y: 0,\r\n                        selected: false,\r\n                    };\r\n                });\r\n\r\n                state.visualInfo = visualInfo;\r\n            }\r\n        },\r\n        hideNodes: (state, action: PayloadAction<number[]>) => {\r\n            const toHideNodes = action.payload.filter(\r\n                (id) =>\r\n                    id > 0 &&\r\n                    id < state.proof.length &&\r\n                    state.hiddenNodes.every((hiddenNodesArray) => hiddenNodesArray.indexOf(id) === -1),\r\n            );\r\n\r\n            const clusters = findNodesClusters(state.proof, toHideNodes);\r\n            state.hiddenNodes = state.hiddenNodes\r\n                .concat(clusters)\r\n                .filter((hiddenNodesArray) => hiddenNodesArray.length > 0);\r\n\r\n            // Set the visual info for the new pi nodes\r\n            const piNodeId = Object.keys(state.visualInfo).length;\r\n            for (let i = 0; i < clusters.length; i++) {\r\n                state.visualInfo = {\r\n                    ...state.visualInfo,\r\n                    [piNodeId + i]: {\r\n                        color: '#555',\r\n                        x: 0,\r\n                        y: 0,\r\n                        selected: false,\r\n                    },\r\n                };\r\n            }\r\n\r\n            // Unselect the selected nodes\r\n            toHideNodes.forEach(\r\n                (id) =>\r\n                    (state.visualInfo[id] = {\r\n                        ...state.visualInfo[id],\r\n                        selected: false,\r\n                    }),\r\n            );\r\n        },\r\n        foldAllDescendants: (state, action: PayloadAction<number>) => {\r\n            state.hiddenNodes = state.hiddenNodes\r\n                .concat([\r\n                    [action.payload, ...descendants(state.proof, action.payload)].filter(\r\n                        (id, index, self) =>\r\n                            id > 0 &&\r\n                            id < state.proof.length &&\r\n                            state.hiddenNodes.every((hiddenNodesArray) => hiddenNodesArray.indexOf(id) === -1) &&\r\n                            self.indexOf(id) === index,\r\n                    ),\r\n                ])\r\n                .filter((hiddenNodesArray) => hiddenNodesArray.length > 0);\r\n\r\n            // Set the visual info for the new pi node and the root node\r\n            const piNodeId = Object.keys(state.visualInfo).length;\r\n            state.visualInfo = {\r\n                ...state.visualInfo,\r\n                [action.payload]: {\r\n                    ...state.visualInfo[action.payload],\r\n                    selected: false,\r\n                },\r\n                [piNodeId]: {\r\n                    color: '#555',\r\n                    x: 0,\r\n                    y: 0,\r\n                    selected: false,\r\n                },\r\n            };\r\n        },\r\n        unhideNodes: (state, action: PayloadAction<{ pi: number; hiddens: number[] }>) => {\r\n            const { pi, hiddens } = action.payload;\r\n            state.hiddenNodes = state.hiddenNodes\r\n                .map((hiddenNodesArray) => hiddenNodesArray.filter((id) => hiddens.indexOf(id) === -1))\r\n                .filter((hiddenNodesArray) => hiddenNodesArray.length > 0);\r\n\r\n            const color = state.visualInfo[pi].color;\r\n            // Make sure the ids are realocated\r\n            const size = Object.keys(state.visualInfo).length;\r\n            for (let i = pi; i < size - 1; i++) {\r\n                state.visualInfo[i] = state.visualInfo[i + 1];\r\n            }\r\n            // Delete the last position\r\n            delete state.visualInfo[size - 1];\r\n\r\n            // Unselect the hidden nodes and set their color equal to the pi node\r\n            hiddens.forEach(\r\n                (id) =>\r\n                    (state.visualInfo[id] = {\r\n                        ...state.visualInfo[id],\r\n                        color: color !== '#555' ? color : state.visualInfo[id].color,\r\n                        selected: false,\r\n                    }),\r\n            );\r\n        },\r\n        setVisualInfo: (state, action: PayloadAction<ProofState['visualInfo']>) => {\r\n            state.visualInfo = action.payload;\r\n        },\r\n        selectNodes: (state, action: PayloadAction<number[]>) => {\r\n            const len = Object.keys(state.visualInfo).length;\r\n            action.payload.forEach((id) => {\r\n                if (id >= 0 && id < len) {\r\n                    state.visualInfo[id].selected = true;\r\n                }\r\n            });\r\n        },\r\n        unselectNodes: (state, action: PayloadAction<number[]>) => {\r\n            const len = Object.keys(state.visualInfo).length;\r\n            action.payload.forEach((id) => {\r\n                if (id >= 0 && id < len) {\r\n                    state.visualInfo[id].selected = false;\r\n                }\r\n            });\r\n        },\r\n        changeStyle: (state, action: PayloadAction<ProofState['style']>) => {\r\n            switch (action.payload) {\r\n                case 'graph':\r\n                    state.style = 'graph';\r\n                    break;\r\n                case 'directory':\r\n                    state.style = 'directory';\r\n                    break;\r\n            }\r\n        },\r\n        applyView: (state, action: PayloadAction<ProofState['view']>) => {\r\n            const visualInfoSize = Object.keys(state.visualInfo).length;\r\n            const proofSize = state.proof.length;\r\n            // Delete all the pi nodes\r\n            for (let i = 0; i < visualInfoSize - proofSize; i++) {\r\n                delete state.visualInfo[proofSize + i];\r\n            }\r\n\r\n            switch (action.payload) {\r\n                // View without hidden Nodes\r\n                case 'full':\r\n                    if (state.hiddenNodes.length || state.view === 'colored-full') {\r\n                        state.proof.forEach((node) => {\r\n                            state.visualInfo[node.id] = {\r\n                                color: '#fff',\r\n                                x: 0,\r\n                                y: 0,\r\n                                selected: false,\r\n                            };\r\n                        });\r\n\r\n                        state.hiddenNodes = [];\r\n                    }\r\n                    state.view = 'full';\r\n                    break;\r\n                // Cluster all the nodes in your respective group\r\n                case 'clustered':\r\n                    // If there are clusters infos\r\n                    if (state.clustersInfos.length) {\r\n                        state.view = 'clustered';\r\n\r\n                        state.hiddenNodes = [];\r\n                        let size = Object.keys(state.visualInfo).length;\r\n\r\n                        state.clustersInfos.forEach((cluster) => {\r\n                            if (cluster.hiddenNodes.length !== 1) {\r\n                                state.visualInfo[size++] = {\r\n                                    color: cluster.color,\r\n                                    x: 0,\r\n                                    y: 0,\r\n                                    selected: false,\r\n                                };\r\n\r\n                                state.hiddenNodes.push(cluster.hiddenNodes);\r\n                            }\r\n                            // Cluster with 1 node\r\n                            else {\r\n                                state.visualInfo[cluster.hiddenNodes[0]] = {\r\n                                    color: cluster.color,\r\n                                    x: 0,\r\n                                    y: 0,\r\n                                    selected: false,\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n                // Apply full view but apply the clustrer color\r\n                case 'colored-full':\r\n                    state.view = 'colored-full';\r\n                    state.hiddenNodes = [];\r\n\r\n                    // If there are clusters infos\r\n                    if (state.clustersInfos.length) {\r\n                        state.clustersInfos.forEach((cluster) => {\r\n                            cluster.hiddenNodes.forEach((node) => {\r\n                                state.visualInfo[node] = {\r\n                                    color: cluster.color,\r\n                                    x: 0,\r\n                                    y: 0,\r\n                                    selected: false,\r\n                                };\r\n                            });\r\n                        });\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n        applyColor: (state, action: PayloadAction<string>) => {\r\n            Object.keys(state.visualInfo).forEach((id) => {\r\n                if (state.visualInfo[Number(id)].selected) {\r\n                    state.visualInfo[Number(id)].color = action.payload;\r\n                    state.visualInfo[Number(id)].selected = false;\r\n                }\r\n            });\r\n        },\r\n        setSmt: (state, action: PayloadAction<string>) => {\r\n            state.smt = action.payload;\r\n        },\r\n    },\r\n});\r\n\r\nexport const {\r\n    process,\r\n    hideNodes,\r\n    foldAllDescendants,\r\n    unhideNodes,\r\n    setVisualInfo,\r\n    selectNodes,\r\n    unselectNodes,\r\n    changeStyle,\r\n    applyView,\r\n    applyColor,\r\n    setSmt,\r\n} = proofSlice.actions;\r\n\r\nexport const selectProof = (state: RootState): NodeInterface[] => {\r\n    let proof = state.proof.proof;\r\n    const hiddenNodes = state.proof.hiddenNodes;\r\n\r\n    hiddenNodes.forEach((hiddenNodesArray) => {\r\n        const dependencies: { [parentId: number]: number[] } = {};\r\n        const children = piNodeChildren(proof, hiddenNodesArray);\r\n        const parents = piNodeParents(proof, hiddenNodesArray, dependencies);\r\n        const piNodeDependencies = groupPiNodeDependencies(proof, hiddenNodesArray);\r\n\r\n        const piNodeId = proof.length;\r\n        proof = proof.concat({\r\n            id: piNodeId,\r\n            conclusion: '∴',\r\n            rule: 'π',\r\n            args: '',\r\n            children: children,\r\n            parents: parents,\r\n            hiddenNodes: hiddenNodesArray.map((hiddenNode) => proof[hiddenNode]),\r\n            descendants: 1,\r\n            dependencies: piNodeDependencies,\r\n            clusterType: ClusterKind.NONE,\r\n        });\r\n\r\n        const piNode = proof[piNodeId];\r\n\r\n        children.forEach(\r\n            (childId) =>\r\n                (proof[childId] = {\r\n                    ...proof[childId],\r\n                    parents: proof[childId].parents\r\n                        .concat([piNodeId])\r\n                        .filter((proofNode) => hiddenNodesArray.indexOf(proofNode) === -1),\r\n                }),\r\n        );\r\n        parents.forEach(\r\n            (parentId) =>\r\n                (proof[parentId] = {\r\n                    ...proof[parentId],\r\n                    children: proof[parentId].children\r\n                        .concat([piNodeId])\r\n                        .filter((proofNode) => hiddenNodesArray.indexOf(proofNode) === -1),\r\n                }),\r\n        );\r\n\r\n        // Set the dependencies array of each parent that has deps and remove\r\n        //  the children that are dependencies\r\n        Object.keys(dependencies).forEach((parent) => {\r\n            const parentId = Number(parent);\r\n            proof[parentId] = {\r\n                ...proof[parentId],\r\n                children: proof[parentId].children.filter((c) => dependencies[parentId].indexOf(c) === -1),\r\n                dependencies: [...proof[parentId].dependencies, { piId: piNodeId, depsId: dependencies[parentId] }],\r\n            };\r\n        });\r\n\r\n        // Get the high hierarchy nodes in this pi node\r\n        const highHierarchyNodes = hiddenNodesArray?.filter((node) =>\r\n            proof[node].parents.every((parentId) => piNode.parents.indexOf(parentId) !== -1),\r\n        );\r\n\r\n        // Get the conclusion array\r\n        const conclusion = highHierarchyNodes.map((node) => ' ' + proof[node].conclusion);\r\n        piNode.conclusion = conclusion.length > 1 ? `[${conclusion} ]` : `${conclusion}`;\r\n\r\n        // Get the rule array\r\n        const rule = highHierarchyNodes.map((node) => ' ' + proof[node].rule);\r\n        piNode.rule = rule.length > 1 ? `[${rule} ]` : `${rule} `;\r\n\r\n        // Set the descendants number\r\n        piNode.descendants = piNode.children.reduce(\r\n            (ac: number, childID) => ((ac += proof[childID].descendants), ac),\r\n            1,\r\n        );\r\n    });\r\n\r\n    proof = proof.filter((proofNode) =>\r\n        hiddenNodes.every((hiddenNodesArray) => hiddenNodesArray.indexOf(proofNode.id) === -1),\r\n    );\r\n\r\n    return proof;\r\n};\r\n\r\nexport const selectOriginalProof = (state: RootState): NodeInterface[] => {\r\n    return state.proof.proof;\r\n};\r\n\r\nexport const selectView = (state: RootState): ProofState['view'] => {\r\n    return state.proof.view;\r\n};\r\n\r\nexport const selectStyle = (state: RootState): 'graph' | 'directory' => {\r\n    return state.proof.style;\r\n};\r\n\r\nexport const selectLetMap = (state: RootState): { [Key: string]: string } => {\r\n    return state.proof.letMap;\r\n};\r\n\r\nexport const selectTheoryLemmas = (state: RootState): ProofState['theoryLemmaMap'] => {\r\n    return state.proof.theoryLemmaMap;\r\n};\r\n\r\nexport const selectVisualInfo = (state: RootState): ProofState['visualInfo'] => {\r\n    if (state.proof.proof.length) return state.proof.visualInfo;\r\n    // If there is no proof node\r\n    return { 0: { color: '#555', x: 0, y: 0, selected: false } };\r\n};\r\n\r\nexport const selectHiddenNodes = (state: RootState): number[][] => {\r\n    return state.proof.hiddenNodes;\r\n};\r\n\r\nexport const selectNodeClusters = (state: RootState): ProofState['clustersInfos'] => {\r\n    return state.proof.clustersInfos;\r\n};\r\n\r\nexport const selectSmt = (state: RootState): ProofState['smt'] => {\r\n    return state.proof.smt;\r\n};\r\n\r\nexport default proofSlice.reducer;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { RootState } from '../../store';\r\nimport { ThemeState } from '../../../interfaces/interfaces';\r\n\r\nconst initialState: ThemeState = {\r\n    value: true,\r\n};\r\n\r\nexport const themeSlice = createSlice({\r\n    name: 'theme',\r\n    initialState,\r\n    // The `reducers` field lets us define reducers and generate associated actions\r\n    reducers: {\r\n        toggle: (state) => {\r\n            state.value = !state.value;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { toggle } = themeSlice.actions;\r\n\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice theme. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectTheme = (state: RootState): boolean => state.theme.value;\r\n\r\nexport default themeSlice.reducer;\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from '../../store';\r\nimport { ExternalCmdState } from '../../../interfaces/interfaces';\r\n\r\nconst initialState: ExternalCmdState = {\r\n    findData: {\r\n        nodeToFind: -1,\r\n        findOption: false,\r\n    },\r\n    renderData: {\r\n        count: 0,\r\n        fileChanged: false,\r\n    },\r\n};\r\n\r\nexport const externalCmd = createSlice({\r\n    name: 'externalCmd',\r\n    initialState,\r\n    reducers: {\r\n        findNode: (state, action: PayloadAction<{ nodeId: number; option: boolean }>) => {\r\n            state.findData = { nodeToFind: action.payload.nodeId, findOption: action.payload.option };\r\n        },\r\n        reRender: (state) => {\r\n            state.renderData.count = 0;\r\n        },\r\n        addRenderCount: (state) => {\r\n            state.renderData.count++;\r\n        },\r\n        blockRender: (state) => {\r\n            state.renderData.count = 2;\r\n        },\r\n        allowRenderNewFile: (state) => {\r\n            state.renderData.fileChanged = true;\r\n        },\r\n        blockRenderNewFile: (state) => {\r\n            state.renderData.fileChanged = false;\r\n        },\r\n    },\r\n});\r\n\r\nexport const { findNode, reRender, addRenderCount, blockRender, allowRenderNewFile, blockRenderNewFile } =\r\n    externalCmd.actions;\r\n\r\nexport const selectFindData = (state: RootState): { nodeToFind: number; findOption: boolean } =>\r\n    state.externalCmd.findData;\r\n\r\nexport const selectRenderData = (state: RootState): { count: number; fileChanged: boolean } =>\r\n    state.externalCmd.renderData;\r\n\r\nexport default externalCmd.reducer;\r\n","const examples: { [ex: string]: { dot: string; smt: string } } = {\r\n    ex1: {\r\n        dot: 'unsat\\r\\ndigraph proof {\\r\\n\\trankdir=\"BT\";\\r\\n\\tnode [shape=record];\\r\\n\\tcomment=\"{\\\\\"letMap\\\\\" : {\\\\\"let1\\\\\" : \\\\\"(f b)\\\\\", \\\\\"let2\\\\\" : \\\\\"(= (f a) let1)\\\\\", \\\\\"let3\\\\\" : \\\\\"(not let2)\\\\\", \\\\\"let4\\\\\" : \\\\\"(or p let3)\\\\\", \\\\\"let5\\\\\" : \\\\\"(not p)\\\\\", \\\\\"let6\\\\\" : \\\\\"(= a b)\\\\\", \\\\\"let7\\\\\" : \\\\\"(= let1 let1)\\\\\", \\\\\"let8\\\\\" : \\\\\"(not let7)\\\\\", \\\\\"let9\\\\\" : \\\\\"(not true)\\\\\", \\\\\"let10\\\\\" : \\\\\"(= p false)\\\\\"}}\";\\r\\n\\t0 [ label = \"{(not (and let6 let5 let4))|SCOPE :args [ let6, let5, let4 ]}\", comment = \"{\\\\\"subProofQty\\\\\":21}\" ];\\r\\n\\t1 [ label = \"{false|EQ_RESOLVE}\", comment = \"{\\\\\"subProofQty\\\\\":20}\" ];\\r\\n\\t2 [ label = \"{let3|CHAIN_RESOLUTION :args [ true, p ]}\", comment = \"{\\\\\"subProofQty\\\\\":3}\" ];\\r\\n\\t3 [ label = \"{let4|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t3 -> 2;\\r\\n\\t4 [ label = \"{let5|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t4 -> 2;\\r\\n\\t2 -> 1;\\r\\n\\t5 [ label = \"{(= let3 false)|TRANS}\", comment = \"{\\\\\"subProofQty\\\\\":16}\" ];\\r\\n\\t6 [ label = \"{(= let3 let8)|CONG :args [ not ]}\", comment = \"{\\\\\"subProofQty\\\\\":11}\" ];\\r\\n\\t7 [ label = \"{(= let2 let7)|CONG :args [ = ]}\", comment = \"{\\\\\"subProofQty\\\\\":10}\" ];\\r\\n\\t8 [ label = \"{let2|CONG :args [ f ]}\", comment = \"{\\\\\"subProofQty\\\\\":8}\" ];\\r\\n\\t9 [ label = \"{let6|AND_ELIM :args [ 1 ]}\", comment = \"{\\\\\"subProofQty\\\\\":7}\" ];\\r\\n\\t10 [ label = \"{(and let10 let6)|AND_INTRO}\", comment = \"{\\\\\"subProofQty\\\\\":6}\" ];\\r\\n\\t11 [ label = \"{let10|EQ_RESOLVE}\", comment = \"{\\\\\"subProofQty\\\\\":4}\" ];\\r\\n\\t4 -> 11;\\r\\n\\t12 [ label = \"{(= let5 let10)|SYMM}\", comment = \"{\\\\\"subProofQty\\\\\":2}\" ];\\r\\n\\t13 [ label = \"{(= let10 let5)|THEORY_REWRITE :args [ BOOL ]}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t13 -> 12;\\r\\n\\t12 -> 11;\\r\\n\\t11 -> 10;\\r\\n\\t14 [ label = \"{let6|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t14 -> 10;\\r\\n\\t10 -> 9;\\r\\n\\t9 -> 8;\\r\\n\\t8 -> 7;\\r\\n\\t15 [ label = \"{let7|REFL}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t15 -> 7;\\r\\n\\t7 -> 6;\\r\\n\\t6 -> 5;\\r\\n\\t16 [ label = \"{(= let8 false)|TRANS}\", comment = \"{\\\\\"subProofQty\\\\\":4}\" ];\\r\\n\\t17 [ label = \"{(= let8 let9)|CONG :args [ not ]}\", comment = \"{\\\\\"subProofQty\\\\\":2}\" ];\\r\\n\\t18 [ label = \"{(= let7 true)|THEORY_REWRITE :args [ UF ]}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t18 -> 17;\\r\\n\\t17 -> 16;\\r\\n\\t19 [ label = \"{(= let9 false)|THEORY_REWRITE :args [ BOOL ]}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t19 -> 16;\\r\\n\\t16 -> 5;\\r\\n\\t5 -> 1;\\r\\n\\t1 -> 0;\\r\\n\\r\\n}\\r\\n',\r\n        smt: `(set-logic QF_UF)\\n(set-info :category \"crafted\")\\n(set-info :status unsat)\\n(declare-sort U 0)\\n(declare-fun a () U)\\n(declare-fun b () U)\\n(declare-fun f (U) U)\\n(declare-fun p () Bool)\\n(assert (= a b))\\n(assert (not p))\\n(assert (or p (not (= (f a) (f b)))))\\n(check-sat)\\n(exit)`,\r\n    },\r\n    ex2: {\r\n        dot: 'unsat\\r\\ndigraph proof {\\r\\n\\trankdir=\"BT\";\\r\\n\\tnode [shape=record];\\r\\n\\tcomment=\"{\\\\\"letMap\\\\\" : {\\\\\"let1\\\\\" : \\\\\"(= (f a) (f b))\\\\\", \\\\\"let2\\\\\" : \\\\\"(not let1)\\\\\", \\\\\"let3\\\\\" : \\\\\"(or (not p3) let2)\\\\\", \\\\\"let4\\\\\" : \\\\\"(and p2 p3)\\\\\", \\\\\"let5\\\\\" : \\\\\"(or (not p1) let4)\\\\\", \\\\\"let6\\\\\" : \\\\\"(and p1 true)\\\\\", \\\\\"let7\\\\\" : \\\\\"(= a b)\\\\\", \\\\\"let8\\\\\" : \\\\\"(not let4)\\\\\", \\\\\"let9\\\\\" : \\\\\"(not let7)\\\\\"}}\";\\r\\n\\t0 [ label = \"{(not (and let7 let6 let5 let3))|SCOPE :args [ let7, let6, let5, let3 ]}\", comment = \"{\\\\\"subProofQty\\\\\":20}\" ];\\r\\n\\t1 [ label = \"{false|CHAIN_RESOLUTION :args [ true, let1, false, let7 ]}\", comment = \"{\\\\\"subProofQty\\\\\":19}\" ];\\r\\n\\t2 [ label = \"{(or let1 let9)|REORDERING}\", comment = \"{\\\\\"subProofQty\\\\\":7}\" ];\\r\\n\\t3 [ label = \"{(or let9 let1)|IMPLIES_ELIM}\", comment = \"{\\\\\"subProofQty\\\\\":6}\" ];\\r\\n\\t4 [ label = \"{(=\\\\> let7 let1)|SCOPE :args [ let7 ]}\", comment = \"{\\\\\"subProofQty\\\\\":5}\" ];\\r\\n\\t5 [ label = \"{let1|CONG :args [ f ]}\", comment = \"{\\\\\"subProofQty\\\\\":4}\" ];\\r\\n\\t6 [ label = \"{let7|SYMM}\", comment = \"{\\\\\"subProofQty\\\\\":3}\" ];\\r\\n\\t7 [ label = \"{(= b a)|SYMM}\", comment = \"{\\\\\"subProofQty\\\\\":2}\" ];\\r\\n\\t8 [ label = \"{let7|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t8 -> 7;\\r\\n\\t7 -> 6;\\r\\n\\t6 -> 5;\\r\\n\\t5 -> 4;\\r\\n\\t4 -> 3;\\r\\n\\t3 -> 2;\\r\\n\\t2 -> 1;\\r\\n\\t9 [ label = \"{let2|CHAIN_RESOLUTION :args [ false, p3 ]}\", comment = \"{\\\\\"subProofQty\\\\\":10}\" ];\\r\\n\\t10 [ label = \"{let3|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t10 -> 9;\\r\\n\\t11 [ label = \"{p3|CHAIN_RESOLUTION :args [ false, let4 ]}\", comment = \"{\\\\\"subProofQty\\\\\":8}\" ];\\r\\n\\t12 [ label = \"{(or p3 let8)|REORDERING}\", comment = \"{\\\\\"subProofQty\\\\\":2}\" ];\\r\\n\\t13 [ label = \"{(or let8 p3)|CNF_AND_POS :args [ let4, 1 ]}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t13 -> 12;\\r\\n\\t12 -> 11;\\r\\n\\t14 [ label = \"{let4|CHAIN_RESOLUTION :args [ false, p1 ]}\", comment = \"{\\\\\"subProofQty\\\\\":5}\" ];\\r\\n\\t15 [ label = \"{let5|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t15 -> 14;\\r\\n\\t16 [ label = \"{p1|EQ_RESOLVE}\", comment = \"{\\\\\"subProofQty\\\\\":3}\" ];\\r\\n\\t17 [ label = \"{let6|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t17 -> 16;\\r\\n\\t18 [ label = \"{(= let6 p1)|THEORY_REWRITE :args [ BOOL ]}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t18 -> 16;\\r\\n\\t16 -> 14;\\r\\n\\t14 -> 11;\\r\\n\\t11 -> 9;\\r\\n\\t9 -> 1;\\r\\n\\t19 [ label = \"{let7|ASSUME}\", comment = \"{\\\\\"subProofQty\\\\\":1}\" ];\\r\\n\\t19 -> 1;\\r\\n\\t1 -> 0;\\r\\n\\r\\n\\tsubgraph cluster_SAT {\\r\\n\\t\\tlabel=\"SAT\"\\r\\n\\t\\tbgcolor=\"purple\"\\r\\n\\t\\t1 2 9 11 12 14 \\r\\n\\t};\\r\\n\\tsubgraph cluster_CNF {\\r\\n\\t\\tlabel=\"CNF\"\\r\\n\\t\\tbgcolor=\"yellow\"\\r\\n\\t\\t3 13 \\r\\n\\t};\\r\\n\\tsubgraph cluster_TL {\\r\\n\\t\\tlabel=\"TL\"\\r\\n\\t\\tbgcolor=\"green\"\\r\\n\\t\\t4 5 6 7 8 \\r\\n\\t};\\r\\n\\tsubgraph cluster_PP {\\r\\n\\t\\tlabel=\"PP\"\\r\\n\\t\\tbgcolor=\"brown\"\\r\\n\\t\\t16 18 \\r\\n\\t};\\r\\n\\tsubgraph cluster_IN {\\r\\n\\t\\tlabel=\"IN\"\\r\\n\\t\\tbgcolor=\"blue\"\\r\\n\\t\\t10 15 17 19 \\r\\n\\t};\\r\\n}\\r\\n',\r\n        smt: `(set-logic QF_UF)\\n\\n(declare-sort U 0)\\n\\n(declare-const p1 Bool)\\n(declare-const p2 Bool)\\n(declare-const p3 Bool)\\n\\n(declare-const a U)\\n(declare-const b U)\\n(declare-fun f (U) U)\\n\\n(assert (= a b))\\n(assert (and p1 true))\\n(assert (or (not p1) (and p2 p3)))\\n(assert (or (not p3) (not (= (f a) (f b)))))\\n\\n(check-sat)`,\r\n    },\r\n};\r\n\r\nexport default examples;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useAppSelector, useAppDispatch } from '../../store/hooks';\r\nimport { selectDot, selectFileName, set } from '../../store/features/file/fileSlice';\r\nimport {\r\n    applyView,\r\n    changeStyle,\r\n    selectNodes,\r\n    applyColor,\r\n    hideNodes,\r\n    foldAllDescendants,\r\n    unhideNodes,\r\n    selectVisualInfo,\r\n    selectProof,\r\n    selectHiddenNodes,\r\n    selectView,\r\n    unselectNodes,\r\n    process,\r\n    setSmt,\r\n} from '../../store/features/proof/proofSlice';\r\nimport { ReduxState, NavbarPropsAndRedux, NavbarProps } from '../../interfaces/interfaces';\r\n\r\nimport { Alignment, Button, Icon, InputGroup, Navbar, Switch, Menu, MenuItem } from '@blueprintjs/core';\r\nimport { Popover2 } from '@blueprintjs/popover2';\r\nimport { selectTheme, toggle } from '../../store/features/theme/themeSlice';\r\nimport '../../scss/VisualizerNavbar.scss';\r\nimport { allowRenderNewFile, findNode, reRender } from '../../store/features/externalCmd/externalCmd';\r\nimport examples from '../../examples/proofs-examples';\r\n\r\nfunction useWindowSize() {\r\n    // Initialize state with undefined width/height so server and client renders match\r\n    // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n    const [windowSize, setWindowSize] = useState({\r\n        width: 0,\r\n        height: 0,\r\n    });\r\n    useEffect(() => {\r\n        // Handler to call on window resize\r\n        function handleResize() {\r\n            // Set window width/height to state\r\n            setWindowSize({\r\n                width: window.innerWidth,\r\n                height: window.innerHeight,\r\n            });\r\n        }\r\n        // Add event listener\r\n        window.addEventListener('resize', handleResize);\r\n        // Call handler right away so state gets updated with initial window size\r\n        handleResize();\r\n        // Remove event listener on cleanup\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []); // Empty array ensures that effect is only run on mount\r\n    return windowSize;\r\n}\r\n\r\nfunction isNotMozzila() {\r\n    const userAgent = navigator.userAgent;\r\n    let browserName;\r\n\r\n    if (userAgent.match(/chrome|chromium|crios/i)) {\r\n        return true;\r\n    } else if (userAgent.match(/firefox|fxios/i)) {\r\n        return false;\r\n    } else if (userAgent.match(/safari/i)) {\r\n        return true;\r\n    } else if (userAgent.match(/opr\\//i)) {\r\n        return true;\r\n    } else if (userAgent.match(/edg/i)) {\r\n        return true;\r\n    }\r\n    return browserName;\r\n}\r\nconst isNotMozz = isNotMozzila();\r\n\r\nconst VisualizerNavbar: React.FC<NavbarPropsAndRedux> = ({\r\n    setDialogIsOpen,\r\n    setDrawerIsOpen,\r\n    addErrorToast,\r\n    setInTutorial,\r\n    setSmtDrawerIsOpen,\r\n    inTutorial,\r\n    visualInfo,\r\n    proof,\r\n    dot,\r\n    view,\r\n    hiddenNodes,\r\n    hideNodes,\r\n}: NavbarPropsAndRedux) => {\r\n    const fileName = useAppSelector(selectFileName);\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const windowSize = useWindowSize();\r\n    const [command, setCommand] = useState('');\r\n    const [lastCommands, setLastCommands] = useState(['']);\r\n    const [commandId, setCommandId] = useState(0);\r\n    const [matchableCmd, setMatchableCmd] = useState<string[]>([]);\r\n    const [matchableCmdIsOpen, setMatchableCmdIsOpen] = useState(false);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    const commandsMap: { [cmd: string]: (cmds: string[]) => void } = {\r\n        ['/view']: (cmds: string[]) => {\r\n            switch (cmds[1]) {\r\n                case 'full':\r\n                    dispatch(applyView('full'));\r\n                    dispatch(reRender());\r\n                    break;\r\n                case 'clustered':\r\n                    dispatch(applyView('clustered'));\r\n                    dispatch(reRender());\r\n                    break;\r\n                case 'colored-full':\r\n                    dispatch(applyView('colored-full'));\r\n                    dispatch(reRender());\r\n                    break;\r\n            }\r\n        },\r\n        ['/select']: (cmds: string[]) => {\r\n            if (cmds[1]) {\r\n                let cmdArg = '';\r\n                cmds.forEach((string, id) => id !== 0 && (cmdArg += string + ' '));\r\n                // Matches all the brackets\r\n                const matches = [...cmdArg.matchAll(/\\[([^\\[\\]]+)\\]/g)];\r\n                let idList: number[] = [];\r\n\r\n                // There is a case with brackets\r\n                if (matches[0]) {\r\n                    const insideBracket = matches[0][1].trim();\r\n                    let insideMatches = [...insideBracket.matchAll(/\\s*\\d+\\s*-\\s*\\d+\\s*/g)];\r\n\r\n                    // Number range notation\r\n                    if (insideMatches[0]) {\r\n                        // Get the range limits\r\n                        const rangeLim = insideMatches[0][0].split(/\\s*-\\s*/).map((numS) => Number(numS));\r\n                        idList = Array.from({ length: rangeLim[1] - rangeLim[0] + 1 }, (_, i) => rangeLim[0] + i);\r\n                    }\r\n                    // List notation\r\n                    else {\r\n                        insideMatches = [...insideBracket.matchAll(/(\\s*\\d+\\s*,*)+/g)];\r\n                        // Number list notation\r\n                        if (insideMatches[0]) {\r\n                            // Group all the matches\r\n                            let listStr = '';\r\n                            insideMatches.forEach((match) => (listStr += match[0]));\r\n                            // Convert to number\r\n                            idList = listStr\r\n                                .split(/,\\s*/)\r\n                                .filter((word) => word.length > 0 && !isNaN(Number(word)))\r\n                                .map((id) => Number(id));\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Is a regex select?\r\n                    const matches = [...cmdArg.matchAll(/\\/[^\\/]*\\//g)];\r\n                    const argMatch = [...cmdArg.matchAll(/--(c|r)/g)];\r\n                    // If there is a regex\r\n                    if (matches[0]) {\r\n                        let argIsConclusion = true;\r\n                        // Try to find the option\r\n                        if (argMatch[0]) {\r\n                            switch (argMatch[0][1]) {\r\n                                case 'r':\r\n                                    argIsConclusion = false;\r\n                                    break;\r\n                                case 'c':\r\n                                    argIsConclusion = true;\r\n                                    break;\r\n                            }\r\n                        }\r\n\r\n                        const regexString = matches[0][0].substring(1, matches[0][0].length - 1);\r\n                        try {\r\n                            // Search all the nodes with the specific regex matching in the conclusion\r\n                            const regex = new RegExp(regexString);\r\n                            idList = proof\r\n                                .filter((node) => regex.test(argIsConclusion ? node.conclusion : node.rule))\r\n                                .map((node) => node.id);\r\n                        } catch (err) {\r\n                            // If the inserted regex expression is invalid (probably missing \\)\r\n                            addErrorToast('Regex error: probably and wrong regex expression');\r\n                        }\r\n                    }\r\n                }\r\n\r\n                dispatch(selectNodes(idList));\r\n            }\r\n        },\r\n        ['/unselect']: (cmds: string[]) => {\r\n            const allNodesIds = proof.map((node) => node.id);\r\n            dispatch(unselectNodes(allNodesIds));\r\n        },\r\n        ['/color']: (cmds: string[]) => {\r\n            if (cmds[1]) {\r\n                // Hex color\r\n                if (RegExp(/^#([0-9a-f]{3}){1,2}$/i).test(cmds[1])) {\r\n                    dispatch(applyColor(cmds[1]));\r\n                    return;\r\n                }\r\n                // Default colors\r\n                switch (cmds[1]) {\r\n                    case 'red':\r\n                        dispatch(applyColor('#f72b34'));\r\n                        break;\r\n                    case 'orange':\r\n                        dispatch(applyColor('#ff8334'));\r\n                        break;\r\n                    case 'yellow':\r\n                        dispatch(applyColor('#ffc149'));\r\n                        break;\r\n                    case 'green':\r\n                        dispatch(applyColor('#60aa51'));\r\n                        break;\r\n                    case 'blue':\r\n                        dispatch(applyColor('#0097e4'));\r\n                        break;\r\n                    case 'purple':\r\n                        dispatch(applyColor('#a73da5'));\r\n                        break;\r\n                    case 'brown':\r\n                        dispatch(applyColor('#a95a49'));\r\n                        break;\r\n                    case 'gray':\r\n                        dispatch(applyColor('#464646'));\r\n                        break;\r\n                    case 'white':\r\n                        dispatch(applyColor('#f0f0f0'));\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        ['/hide']: (cmds: string[]) => {\r\n            // Hide all the selected nodes\r\n            const hiddenIds = Object.keys(visualInfo)\r\n                .map((id) => Number(id))\r\n                .filter((id) => visualInfo[id].selected);\r\n            // Make sure there are nodes selected\r\n            if (hiddenIds.length > 1) {\r\n                // Re-render the canvas and update the store\r\n                dispatch(reRender());\r\n                dispatch(hideNodes(hiddenIds));\r\n            }\r\n        },\r\n        ['/fold']: (cmds: string[]) => {\r\n            // If the option is a number\r\n            if (cmds[1] && !isNaN(Number(cmds[1]))) {\r\n                const nodeId = Number(cmds[1]);\r\n                // Is a valid node\r\n                if (proof.findIndex((node) => node.id === nodeId) !== -1) {\r\n                    // Re-render the canvas and update the store\r\n                    dispatch(reRender());\r\n                    dispatch(foldAllDescendants(nodeId));\r\n                }\r\n            }\r\n        },\r\n        ['/unfold']: (cmds: string[]) => {\r\n            let hiddenIds: number[];\r\n            // If there is a number argument\r\n            if (cmds[1] && !isNaN(Number(cmds[1]))) {\r\n                const id = Number(cmds[1]);\r\n                // Get the pi node (to be unfold)\r\n                const obj = proof.find((node) => node.id === id);\r\n                // If it's a pi node\r\n                if (obj && obj.hiddenNodes?.length) {\r\n                    // Get the hidden nodes and their ids\r\n                    const hiddenNodes = obj.hiddenNodes ? obj.hiddenNodes : [];\r\n                    hiddenIds = hiddenNodes ? hiddenNodes.map((node) => node.id) : [];\r\n                    // Re-render the canvas and update the store\r\n                    dispatch(reRender());\r\n                    dispatch(unhideNodes({ pi: id, hiddens: hiddenIds }));\r\n                }\r\n            }\r\n        },\r\n        ['/find']: (cmds: string[]) => {\r\n            // If there is an argument and is a number\r\n            if (cmds[1] && !isNaN(Number(cmds[1]))) {\r\n                // Find the node\r\n                dispatch(\r\n                    findNode({\r\n                        nodeId: Number(cmds[1]),\r\n                        option: cmds[2] === '--s' ? true : false,\r\n                    }),\r\n                );\r\n            }\r\n        },\r\n    };\r\n    const commands = useRef(Object.keys(commandsMap)).current;\r\n\r\n    const openDialog = (content: string): void => {\r\n        setDialogIsOpen(true);\r\n    };\r\n\r\n    const findMatchableCmd = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.value.length) {\r\n            setMatchableCmd(commands.filter((cmd) => cmd.indexOf(e.target.value) !== -1));\r\n            setMatchableCmdIsOpen(true);\r\n        }\r\n        // If it's an empty string\r\n        else {\r\n            setMatchableCmd([]);\r\n            setMatchableCmdIsOpen(false);\r\n        }\r\n    };\r\n\r\n    const renderMatchableCmd = () => {\r\n        if (matchableCmd.length) {\r\n            const list: JSX.Element[] = [];\r\n            matchableCmd.forEach((cmd) => list.push(<MenuItem text={cmd} />));\r\n            return <Menu className=\"matchable-menu\">{list}</Menu>;\r\n        }\r\n        return <></>;\r\n    };\r\n\r\n    const handleInputKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\r\n        // Creates an commands historic, registering the past 4 commands\r\n        switch (e.key) {\r\n            case 'Enter':\r\n                // If the command is not a white space\r\n                if (command.trim() !== '') {\r\n                    runCommands(command);\r\n                    if (lastCommands.length === 5) {\r\n                        lastCommands.pop();\r\n                    }\r\n                    lastCommands.unshift('');\r\n                    setLastCommands(lastCommands);\r\n                    setCommand('');\r\n                }\r\n                setMatchableCmd([]);\r\n                break;\r\n            case 'ArrowUp':\r\n                if (commandId < lastCommands.length - 1) {\r\n                    const newId = commandId + 1;\r\n                    setCommandId(newId);\r\n                    setCommand(lastCommands[newId]);\r\n                    setMatchableCmd([]);\r\n                    setMatchableCmdIsOpen(false);\r\n                }\r\n                break;\r\n            case 'ArrowDown':\r\n                if (commandId > 0) {\r\n                    const newId = commandId - 1;\r\n                    setCommandId(newId);\r\n                    setCommand(lastCommands[newId]);\r\n                    setMatchableCmd([]);\r\n                    setMatchableCmdIsOpen(false);\r\n                }\r\n                break;\r\n        }\r\n    };\r\n\r\n    const runCommands = (command: string): void => {\r\n        const cmds = command.trim().split(/ +/);\r\n        // If the command exist\r\n        if (cmds[0] && commandsMap[cmds[0]]) {\r\n            commandsMap[cmds[0]](cmds);\r\n        }\r\n    };\r\n\r\n    const exportJSON = () => {\r\n        const downloadJSON = {\r\n            dot: dot,\r\n            visualInfo: visualInfo,\r\n            hiddenNodes: hiddenNodes,\r\n            view: view,\r\n        };\r\n        const fName = fileName.split('.')[0].replace(/\\s+/g, '_');\r\n\r\n        const link = document.createElement('a');\r\n        link.download = fName + '.json';\r\n        link.href = `data:attachment/text,${encodeURIComponent(JSON.stringify(downloadJSON))}`;\r\n        link.click();\r\n    };\r\n\r\n    const exportPNG = (e: React.MouseEvent<HTMLElement, MouseEvent> | null) => {\r\n        e?.preventDefault();\r\n        const link = document.createElement('a');\r\n        link.download = fileName ? `${fileName.split('.')[0].replace(/\\s+/g, '_')}.png` : '';\r\n        const graph = document.getElementsByClassName('konvajs-content');\r\n        if (graph.length) {\r\n            link.href = (graph[0].children[0] as HTMLCanvasElement).toDataURL('image/png');\r\n            link.click();\r\n        }\r\n    };\r\n\r\n    const runExample = (e: React.MouseEvent<HTMLElement, MouseEvent> | null, ex: string, id: number) => {\r\n        e?.preventDefault();\r\n        const dot = examples[ex].dot;\r\n        const smt = examples[ex].smt;\r\n\r\n        dispatch(set({ name: `ex-${id + 1}.dot`, value: dot }));\r\n        dispatch(allowRenderNewFile());\r\n        dispatch(reRender());\r\n        dispatch(setSmt(smt));\r\n\r\n        dispatch(process(dot));\r\n        setSmtDrawerIsOpen();\r\n    };\r\n\r\n    const isPseudoClick = (e: React.KeyboardEvent<HTMLAnchorElement>): boolean => e.key === 'Enter' || e.key === ' ';\r\n\r\n    const menus = {\r\n        style: (\r\n            <Menu className=\"nav-menu\">\r\n                <MenuItem\r\n                    icon=\"diagram-tree\"\r\n                    text=\"Graph\"\r\n                    onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                        e.preventDefault();\r\n                        dispatch(changeStyle('graph'));\r\n                    }}\r\n                    onKeyDown={(e) => isPseudoClick(e) && dispatch(changeStyle('graph'))}\r\n                />\r\n                <MenuItem\r\n                    icon=\"folder-open\"\r\n                    text=\"Directory\"\r\n                    onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                        e.preventDefault();\r\n                        dispatch(changeStyle('directory'));\r\n                    }}\r\n                    onKeyDown={(e) => isPseudoClick(e) && dispatch(changeStyle('directory'))}\r\n                />\r\n            </Menu>\r\n        ),\r\n        download: (\r\n            <Menu className=\"nav-menu\">\r\n                <MenuItem\r\n                    icon=\"layout\"\r\n                    text=\"JSON\"\r\n                    onClick={exportJSON}\r\n                    role=\"button\"\r\n                    onKeyDown={(e) => {\r\n                        (e.key == 'Enter' || e.key == ' ') && exportJSON();\r\n                    }}\r\n                />\r\n                <MenuItem\r\n                    icon=\"graph\"\r\n                    text=\"DOT\"\r\n                    href={`data:attachment/text,${encodeURIComponent(dot ? dot : '')}`}\r\n                    download={fileName ? `${fileName.split('.')[0].replace(/\\s+/g, '_')}.dot` : ''}\r\n                />\r\n                <MenuItem\r\n                    icon=\"square\"\r\n                    text=\"PNG\"\r\n                    onClick={exportPNG}\r\n                    onKeyDown={(e) => {\r\n                        (e.key == 'Enter' || e.key == ' ') && exportPNG(null);\r\n                    }}\r\n                />\r\n            </Menu>\r\n        ),\r\n        help: (\r\n            <Menu className=\"nav-menu\">\r\n                <MenuItem text=\"/view\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that changes the view mode.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /view {'<option>'}.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Option:</u> full, clustered and colored-full.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/select\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that selects a group of nodes.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /select {'<option>'} {'<argument>'}\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Options:</u>\r\n                            <div className=\"option\">\r\n                                1 - A list of node ids wrapped by brackets and separated by commas (and spaces if\r\n                                wanted) (eg.: [1, 15, 6, 3]).\r\n                            </div>\r\n                            <div className=\"option\">\r\n                                2 - A range of node ids wrapped by brackets and separated by hyphen (and spaces if\r\n                                wanted) (eg.: [4 - 15]). This range will include the last element.\r\n                            </div>\r\n                            <div className=\"option\">\r\n                                3 - A regex expression used to select all the nodes which the conclusion owns a match\r\n                                (eg.: /\\.*false\\.*/ selects all the nodes with false anywhere in the conclusion).\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <u className=\"title\">Argument:</u> The argument can only be applied with the third option.\r\n                            <br />\r\n                            To search a match in the rule just insert the --r argument. The --c argument exists but the\r\n                            /select will by default search in the conclusion.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/unselect\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that unselect all the nodes.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /unselect.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/color\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that changes the color of the current selected\r\n                            nodes.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /color {'<option>'}.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Options:</u>\r\n                            <div className=\"option\">1 - A valid hex color notation (eg.: #A7B).</div>\r\n                            <div className=\"option\">\r\n                                2 - A color name among: red🟥, orange🟧, yellow🟨, green🟩, blue🟦, purple🟪, brown🟫,\r\n                                black⬛ and white⬜.\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Prerequisites:</u> a group of nodes being selected.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/hide\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that try to fold (hide) a group of selected nodes.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /hide.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Prerequisites:</u> a group of nodes being selected.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/fold\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that fold all descendants of a specific node.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /fold {'<option>'}.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Option:</u> a valid node id.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/unfold\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that unfold a specific pi node.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /unfold {'<option>'}.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Option:</u> a valid pi node id.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n                <MenuItem text=\"/find\">\r\n                    <div className=\"cmd-desc\">\r\n                        <div>\r\n                            <u className=\"title\">Desc.:</u> Command that find a node and centralize the canvas at it.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Pattern:</u> /find {'<node number>'} {'<argument>'}.\r\n                        </div>\r\n                        <div>\r\n                            <u className=\"title\">Argument:</u> --s: find and select the node.\r\n                        </div>\r\n                    </div>\r\n                </MenuItem>\r\n            </Menu>\r\n        ),\r\n        examples: (\r\n            <Menu className=\"nav-menu\">\r\n                {Object.keys(examples).map((ex, id) => {\r\n                    return (\r\n                        <MenuItem\r\n                            key={id}\r\n                            text={`Example ${id + 1}`}\r\n                            onClick={(e) => runExample(e, ex, id)}\r\n                            onKeyDown={(e) => isPseudoClick(e) && runExample(null, ex, id)}\r\n                        />\r\n                    );\r\n                })}\r\n            </Menu>\r\n        ),\r\n    };\r\n\r\n    const tabIndex = inTutorial ? -1 : 0;\r\n\r\n    const criticalWidth = 1350;\r\n    return (\r\n        <Navbar>\r\n            <Navbar.Group align={Alignment.LEFT}>\r\n                <Navbar.Heading>\r\n                    <b id=\"proof-visualizer-name\">{windowSize.width >= criticalWidth ? 'Proof Visualizer' : 'PV'}</b>\r\n                </Navbar.Heading>\r\n                <Navbar.Divider />\r\n                <Button\r\n                    onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                        e.preventDefault();\r\n                        openDialog('upload-proof');\r\n                    }}\r\n                    id=\"upload-proof-bt\"\r\n                    className=\"bp3-minimal\"\r\n                    icon=\"upload\"\r\n                    text={windowSize.width >= criticalWidth ? 'Upload Proof' : ''}\r\n                    tabIndex={tabIndex}\r\n                />\r\n                <Popover2\r\n                    content={fileName ? menus.examples : undefined}\r\n                    placement=\"bottom-end\"\r\n                    modifiers={{ arrow: { enabled: isNotMozz } }}\r\n                >\r\n                    <Button\r\n                        id=\"examples-bt\"\r\n                        className=\"bp3-minimal\"\r\n                        icon=\"manual\"\r\n                        text={windowSize.width >= criticalWidth ? 'Examples' : ''}\r\n                        tabIndex={tabIndex}\r\n                    />\r\n                </Popover2>\r\n                <Button\r\n                    id=\"input-smt-bt\"\r\n                    className=\"bp3-minimal\"\r\n                    icon=\"code\"\r\n                    text={windowSize.width >= criticalWidth ? 'SMT Input' : ''}\r\n                    onClick={() => setSmtDrawerIsOpen()}\r\n                    tabIndex={tabIndex}\r\n                />\r\n            </Navbar.Group>\r\n\r\n            <Navbar.Group align={Alignment.RIGHT}>\r\n                {fileName ? (\r\n                    <>\r\n                        <Navbar.Heading id=\"file-name-title\">{fileName}</Navbar.Heading>\r\n                        <Navbar.Divider />\r\n                        <Popover2\r\n                            autoFocus={false}\r\n                            enforceFocus={false}\r\n                            content={renderMatchableCmd()}\r\n                            isOpen={matchableCmdIsOpen}\r\n                            disabled={matchableCmd.length === 0}\r\n                            placement=\"bottom-end\"\r\n                            modifiers={{ arrow: { enabled: isNotMozz } }}\r\n                        >\r\n                            <InputGroup\r\n                                id=\"command\"\r\n                                placeholder=\"/command\"\r\n                                value={command}\r\n                                onChange={(e) => {\r\n                                    setCommandId(0);\r\n                                    lastCommands[0] = e.target.value;\r\n                                    setLastCommands(lastCommands);\r\n                                    setCommand(e.target.value);\r\n                                    findMatchableCmd(e);\r\n                                }}\r\n                                onKeyDown={handleInputKeyDown}\r\n                                rightElement={\r\n                                    <Popover2\r\n                                        content={menus.help}\r\n                                        placement=\"bottom-end\"\r\n                                        modifiers={{ arrow: { enabled: isNotMozz } }}\r\n                                    >\r\n                                        <Button\r\n                                            icon=\"help\"\r\n                                            className=\"bp3-minimal\"\r\n                                            onFocusCapture={(e) => inTutorial && e.target.blur()}\r\n                                            tabIndex={-1}\r\n                                        />\r\n                                    </Popover2>\r\n                                }\r\n                                autoComplete=\"off\"\r\n                                tabIndex={tabIndex}\r\n                            />\r\n                        </Popover2>\r\n                        <Button\r\n                            style={{ marginLeft: '5px' }}\r\n                            icon=\"play\"\r\n                            onClick={() => {\r\n                                runCommands(command);\r\n                                lastCommands.pop();\r\n                                lastCommands.unshift(command);\r\n                                lastCommands[0] = '';\r\n                                setLastCommands(lastCommands);\r\n                                setCommand('');\r\n                            }}\r\n                            onFocusCapture={(e) => inTutorial && e.target.blur()}\r\n                            tabIndex={-1}\r\n                        />\r\n                        <Navbar.Divider />\r\n                        <Popover2\r\n                            content={fileName ? menus.style : undefined}\r\n                            placement=\"bottom-end\"\r\n                            disabled={fileName ? false : true}\r\n                            modifiers={{ arrow: { enabled: isNotMozz } }}\r\n                        >\r\n                            <Button\r\n                                id=\"style-bt\"\r\n                                icon=\"presentation\"\r\n                                className=\"bp3-minimal\"\r\n                                text={windowSize.width >= criticalWidth ? 'Style' : ''}\r\n                                disabled={fileName ? false : true}\r\n                                tabIndex={tabIndex}\r\n                            />\r\n                        </Popover2>\r\n                        <Button\r\n                            id=\"visualizers-bt\"\r\n                            className=\"bp3-minimal\"\r\n                            icon=\"applications\"\r\n                            text={windowSize.width >= criticalWidth ? 'Visualizers' : ''}\r\n                            disabled={fileName ? false : true}\r\n                            onClick={() => setDrawerIsOpen(true)}\r\n                            tabIndex={tabIndex}\r\n                        />\r\n                        <Popover2\r\n                            content={fileName ? menus.download : undefined}\r\n                            placement=\"bottom-end\"\r\n                            disabled={fileName ? false : true}\r\n                            modifiers={{ arrow: { enabled: isNotMozz } }}\r\n                        >\r\n                            <Button\r\n                                id=\"download-bt\"\r\n                                className=\"bp3-minimal\"\r\n                                icon=\"download\"\r\n                                text={windowSize.width >= criticalWidth ? 'Download' : ''}\r\n                                disabled={fileName ? false : true}\r\n                                tabIndex={tabIndex}\r\n                            />\r\n                        </Popover2>\r\n                        <Button\r\n                            className=\"bp3-minimal\"\r\n                            icon=\"learning\"\r\n                            text={windowSize.width >= criticalWidth ? 'Tutorial' : ''}\r\n                            disabled={fileName ? false : true}\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                e.currentTarget.blur();\r\n                                setInTutorial(!inTutorial);\r\n                            }}\r\n                            tabIndex={tabIndex}\r\n                        />\r\n                        <Navbar.Divider />\r\n                    </>\r\n                ) : null}\r\n\r\n                <span id=\"switch-button-dark-theme\">\r\n                    <Switch\r\n                        checked={useAppSelector(selectTheme)}\r\n                        onChange={() => dispatch(toggle())}\r\n                        tabIndex={tabIndex}\r\n                    />\r\n                    <Icon icon={darkTheme ? 'moon' : 'flash'}></Icon>\r\n                </span>\r\n            </Navbar.Group>\r\n        </Navbar>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state: ReduxState, ownProps: NavbarProps) {\r\n    return {\r\n        ...ownProps,\r\n        proof: selectProof(state),\r\n        dot: selectDot(state),\r\n        view: selectView(state),\r\n        visualInfo: selectVisualInfo(state),\r\n        hiddenNodes: selectHiddenNodes(state),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = { hideNodes };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualizerNavbar);\r\n","import React, { useState, useReducer, useEffect } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../store/hooks';\r\nimport { MaybeElement } from '@blueprintjs/core/lib/esm/common/props';\r\nimport { IconName } from '@blueprintjs/core/lib/esm/components/icon/icon';\r\n\r\nimport { Button, Classes, Dialog, FileInput, Intent } from '@blueprintjs/core';\r\n\r\nimport '../../scss/VisualizerDialog.scss';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { set } from '../../store/features/file/fileSlice';\r\nimport { process } from '../../store/features/proof/proofSlice';\r\nimport { allowRenderNewFile, blockRender, reRender } from '../../store/features/externalCmd/externalCmd';\r\nimport { VisualizerDialogProps } from '../../interfaces/interfaces';\r\n\r\ninterface DialogProps {\r\n    icon: IconName | MaybeElement;\r\n    title: React.ReactNode;\r\n}\r\n\r\nconst readUploadedFileAsText = (inputFile: File) => {\r\n    const temporaryFileReader = new FileReader();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        temporaryFileReader.onerror = () => {\r\n            temporaryFileReader.abort();\r\n            reject(new DOMException('Problem parsing input file.'));\r\n        };\r\n\r\n        temporaryFileReader.onload = () => {\r\n            resolve(temporaryFileReader.result);\r\n        };\r\n        temporaryFileReader.readAsText(inputFile);\r\n    });\r\n};\r\n\r\nconst VisualizerDialog: React.FC<VisualizerDialogProps> = ({\r\n    dialogIsOpen,\r\n    setDialogIsOpen,\r\n    addErrorToast,\r\n}: VisualizerDialogProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [inputIsFocused, setInputIsFocused] = useState(false);\r\n    const [fileName, changeFileName] = useState('Choose file...');\r\n    const [file, changeFile] = useState('');\r\n    const [[focusFlag, flagCount], setFocusFlag] = useReducer(\r\n        (state: number[], newFlag: number): number[] => [newFlag, state[1] + 1],\r\n        [0, 0],\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (dialogIsOpen) setFocusFlag(1);\r\n    }, [dialogIsOpen]);\r\n\r\n    useEffect(() => {\r\n        let el;\r\n        switch (focusFlag) {\r\n            // Focus the file input\r\n            case 1:\r\n                el = document.getElementsByClassName(Classes.DIALOG_BODY + ' dialog-body');\r\n                (el[0].childNodes[0] as HTMLElement).focus();\r\n                break;\r\n            // Focus the upload button\r\n            case 2:\r\n                el = document.getElementsByClassName(Classes.DIALOG_FOOTER_ACTIONS);\r\n                (el[0].childNodes[0] as HTMLElement).focus();\r\n                break;\r\n        }\r\n    }, [flagCount]);\r\n\r\n    const closeDialog = () => {\r\n        setDialogIsOpen(false);\r\n        changeFileName('Choose file...');\r\n        changeFile('');\r\n    };\r\n\r\n    const dialogProps: DialogProps = { icon: 'upload', title: 'Upload Proof' };\r\n    const dialogBody = (\r\n        <FileInput\r\n            style={{\r\n                outline: inputIsFocused ? '2px  white solid' : '',\r\n                borderRadius: '3px',\r\n            }}\r\n            text={fileName}\r\n            hasSelection={fileName !== 'Choose file...'}\r\n            onInputChange={async (e) => {\r\n                const target = e.target as HTMLInputElement;\r\n                const file = target.files ? target.files[0] : new File([''], 'filename');\r\n                if (\r\n                    target.files &&\r\n                    target.files[0] &&\r\n                    target.files[0].name.split('.').slice(-1)[0] !== 'dot' &&\r\n                    target.files[0].name.split('.').slice(-1)[0] !== 'json'\r\n                ) {\r\n                    addErrorToast('Sorry! Our app only support DOT and JSON files.');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Make sure the file was selected and none error of \"no\r\n                    //  file select\" will be prompted\r\n                    if (file) {\r\n                        const fileContents = await readUploadedFileAsText(file);\r\n                        changeFile(fileContents as string);\r\n                        changeFileName(file.name);\r\n\r\n                        // If succeded, set the focus of the page to the upload button\r\n                        setFocusFlag(2);\r\n                    }\r\n                } catch (er: any) {\r\n                    addErrorToast(er.message);\r\n                }\r\n            }}\r\n            fill={true}\r\n            onFocus={(e) => {\r\n                e.stopPropagation();\r\n                setInputIsFocused(true);\r\n            }}\r\n            onBlur={(e) => {\r\n                e.stopPropagation();\r\n                setInputIsFocused(false);\r\n            }}\r\n        />\r\n    );\r\n    const succesButton = (\r\n        <Button\r\n            onClick={() => {\r\n                dispatch(set({ name: fileName, value: file }));\r\n\r\n                dispatch(allowRenderNewFile());\r\n                const ext = fileName.split('.').pop();\r\n                if (ext === 'json') dispatch(blockRender());\r\n                else if (ext === 'dot') dispatch(reRender());\r\n\r\n                dispatch(process(file));\r\n                closeDialog();\r\n            }}\r\n            intent={Intent.SUCCESS}\r\n            disabled={fileName === 'Choose file...'}\r\n        >\r\n            Upload Proof\r\n        </Button>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                className={darkTheme ? ' bp3-dark' : ''}\r\n                isOpen={dialogIsOpen}\r\n                onClose={(): void => closeDialog()}\r\n                usePortal={true}\r\n                {...dialogProps}\r\n            >\r\n                <div className={Classes.DIALOG_BODY + ' dialog-body'}>{dialogBody}</div>\r\n                <div className={Classes.DIALOG_FOOTER}>\r\n                    <div className={Classes.DIALOG_FOOTER_ACTIONS}>{succesButton}</div>\r\n                </div>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default VisualizerDialog;\r\n","import { KonvaEventObject } from 'konva/types/Node';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Label, Text, Tag, Group, Circle, Arrow } from 'react-konva';\r\nimport { NodeProps } from '../../../interfaces/interfaces';\r\n\r\nfunction getTextWidth(text: string, font: string): number {\r\n    const canvas = document.createElement('canvas');\r\n    const context = canvas.getContext('2d');\r\n    let size = 0;\r\n    if (context) {\r\n        context.font = font;\r\n        size = context.measureText(text).width;\r\n    }\r\n    return size;\r\n}\r\n\r\nfunction textColorFromBg(bgColor: string) {\r\n    const r = parseInt(bgColor.substring(0, 2), 16);\r\n    const g = parseInt(bgColor.substring(2, 4), 16);\r\n    const b = parseInt(bgColor.substring(4, 6), 16);\r\n    return r * 0.299 + g * 0.587 + b * 0.114 > 150 ? '#000000' : '#ffffff';\r\n}\r\n\r\nfunction sixDigitColor(bgColor: string): string {\r\n    if (bgColor.charAt(0) === '#') {\r\n        if (bgColor.length == 4) {\r\n            return bgColor\r\n                .substring(1, 7)\r\n                .split('')\r\n                .map((c) => c + c)\r\n                .join('');\r\n        } else if (bgColor.length == 7) {\r\n            return bgColor.substring(1, 7);\r\n        }\r\n    } else {\r\n        if (bgColor.length == 3) {\r\n            return bgColor\r\n                .split('')\r\n                .map((c) => c + c)\r\n                .join('');\r\n        } else if (bgColor.length == 6) {\r\n            return bgColor;\r\n        }\r\n    }\r\n    return '000000';\r\n}\r\n\r\nconst Node: React.FC<NodeProps> = (props: NodeProps): JSX.Element => {\r\n    const {\r\n        id,\r\n        conclusion,\r\n        rule,\r\n        args,\r\n        x,\r\n        y,\r\n        nHided,\r\n        nDescendants,\r\n        hiddenNodes,\r\n        dependencies,\r\n        selected,\r\n        color,\r\n        setNodeOnFocus,\r\n        toggleNodeSelection,\r\n        updateNodePosition,\r\n        openDrawer,\r\n        onDragEnd,\r\n        createTree,\r\n    } = props;\r\n\r\n    const handleClick = (e: KonvaEventObject<MouseEvent>): void => {\r\n        if (e.evt.button === 0) {\r\n            if (e.evt.shiftKey) {\r\n                toggleNodeSelection(id);\r\n            } else {\r\n                openDrawer(\r\n                    {\r\n                        rule: rule,\r\n                        args: args,\r\n                        conclusion: conclusion,\r\n                        nHided: nHided,\r\n                        nDescendants: nDescendants - (rule === 'π' ? 0 : 0),\r\n                        hiddenNodes: hiddenNodes,\r\n                        dependencies: dependencies,\r\n                    },\r\n                    createTree(id),\r\n                );\r\n            }\r\n        } else if (e.evt.button === 2) {\r\n            setNodeOnFocus(id);\r\n            const menuNode = document.getElementById('menu');\r\n            if (menuNode) {\r\n                menuNode.style.top = `${e.evt.clientY}px`;\r\n                menuNode.style.left = `${e.evt.clientX}px`;\r\n                menuNode.style.display = 'initial';\r\n                window.addEventListener('click', () => {\r\n                    menuNode.style.display = 'none';\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const depSize = 25,\r\n        depLineSize = 25;\r\n    const bgColor = color;\r\n\r\n    const style = {\r\n        tag: {\r\n            fill: bgColor,\r\n            stroke: selected ? 'red' : 'black',\r\n            strokeWidth: selected ? 3 : 1,\r\n        },\r\n        get dep() {\r\n            return { ...this.tag };\r\n        },\r\n        text: {\r\n            align: 'center',\r\n            fill: textColorFromBg(sixDigitColor(bgColor)),\r\n            fontSize: 15,\r\n            height: 35,\r\n            padding: 10,\r\n            width: 300,\r\n        },\r\n        get depText() {\r\n            return {\r\n                ...this.text,\r\n                padding: 0,\r\n                width: depSize * 2,\r\n            };\r\n        },\r\n    };\r\n    const infos = {\r\n        nHided: nHided ? `#hidden: ${nHided}` : '',\r\n        nDescendants: ` #descendants: ${nDescendants}`,\r\n        rule: nHided ? 'π' : rule,\r\n        dependencies: dependencies.length === 1 ? String(dependencies[0].piId) : 'π',\r\n    };\r\n\r\n    const [idSize, setIdSize] = useState(50);\r\n    const [descendantSize, setDescendantSize] = useState(style.text.width - 50);\r\n\r\n    // Component Did Mount\r\n    useEffect(() => {\r\n        const font = `${style.text.fontSize}px -apple-system, \"BlinkMacSystemFont\", \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Open Sans\", \"Helvetica Neue\", \"Icons16\", sans-serif`;\r\n        const calc = getTextWidth(id.toString(), font) + style.text.padding * 3;\r\n        setIdSize(calc);\r\n        setDescendantSize(style.text.width - calc);\r\n    }, []);\r\n\r\n    return (\r\n        <Group\r\n            draggable\r\n            id={id.toString()}\r\n            key={id}\r\n            onDragMove={(e) => {\r\n                updateNodePosition(id, e.target.attrs.x, e.target.attrs.y);\r\n            }}\r\n            onDragEnd={onDragEnd}\r\n            x={x}\r\n            y={y}\r\n            onClick={handleClick}\r\n        >\r\n            <Label x={0} y={0}>\r\n                <Tag {...style.tag} />\r\n                <Text {...style.text} text={conclusion} />\r\n            </Label>\r\n            <Label x={0} y={35}>\r\n                <Tag {...style.tag} />\r\n                <Text {...style.text} text={infos.rule} />\r\n            </Label>\r\n            <Label x={0} y={70} {...{ align: 'right' }}>\r\n                <Tag {...style.tag} />\r\n                <Text {...{ ...style.text, width: idSize }} text={id.toString()} />\r\n            </Label>\r\n            <Label x={idSize} y={70}>\r\n                <Tag {...style.tag} />\r\n                <Text {...{ ...style.text, width: descendantSize }} text={infos.nHided + infos.nDescendants} />\r\n            </Label>\r\n            {dependencies.length ? (\r\n                <Label x={300} y={0}>\r\n                    <Arrow strokeWidth={1} stroke=\"black\" fill=\"black\" points={[depLineSize, 53, 0, 53]} />\r\n                    <Circle x={depLineSize + depSize} y={53} radius={depSize} {...style.dep}></Circle>\r\n                    <Label x={depLineSize} y={45}>\r\n                        <Text {...style.depText} text={infos.dependencies} />\r\n                    </Label>\r\n                </Label>\r\n            ) : null}\r\n        </Group>\r\n    );\r\n};\r\n\r\nexport default Node;\r\n","import React from 'react';\r\nimport { Arrow } from 'react-konva';\r\n\r\nimport { LineProps } from '../../../interfaces/interfaces';\r\n\r\nconst Line = ({ key, points }: LineProps): JSX.Element => {\r\n    return <Arrow key={key} strokeWidth={1} stroke=\"black\" fill=\"black\" points={[...points]} />;\r\n};\r\n\r\nexport default Line;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { ControlGroup, Button, InputGroup } from '@blueprintjs/core';\r\nimport { colorConverter } from '../../../store/features/theme/auxi';\r\n\r\nconst Menu = ({\r\n    unfold,\r\n    foldSelectedNodes,\r\n    foldAllDescendants,\r\n    changeNodeColor,\r\n    currentColor,\r\n    options,\r\n}: {\r\n    unfold: () => void;\r\n    foldSelectedNodes: () => void;\r\n    foldAllDescendants: () => void;\r\n    changeNodeColor: (color: string) => void;\r\n    currentColor: string;\r\n    options: { unfold: boolean; foldSelected: boolean; foldAllDescendants: boolean };\r\n}): JSX.Element => {\r\n    const [color, setColor] = useState(currentColor);\r\n\r\n    useEffect(() => {\r\n        setColor(currentColor);\r\n    }, [currentColor]);\r\n\r\n    return (\r\n        <div className=\"bp3-popover2-content\">\r\n            <ul id=\"menu\" className=\"bp3-menu\">\r\n                {options.unfold ? (\r\n                    <li className=\"\">\r\n                        <a className=\"bp3-menu-item\" onClick={() => unfold()}>\r\n                            <div className=\"bp3-text-overflow-ellipsis bp3-fill bp3-icon-eye-open\">\r\n                                <span> Unfold</span>\r\n                            </div>\r\n                        </a>\r\n                    </li>\r\n                ) : null}\r\n                {options.foldSelected ? (\r\n                    <li className=\"\">\r\n                        <a className=\"bp3-menu-item\" onClick={() => foldSelectedNodes()}>\r\n                            <div className=\"bp3-text-overflow-ellipsis bp3-fill bp3-icon-eye-off\">\r\n                                <span> Fold selected nodes</span>\r\n                            </div>\r\n                        </a>\r\n                    </li>\r\n                ) : null}\r\n                {options.foldAllDescendants ? (\r\n                    <li className=\"\">\r\n                        <a className=\"bp3-menu-item\" onClick={() => foldAllDescendants()}>\r\n                            <div className=\"bp3-text-overflow-ellipsis bp3-fill bp3-icon-eye-off\">\r\n                                <span> Fold all descendants</span>\r\n                            </div>\r\n                        </a>\r\n                    </li>\r\n                ) : null}\r\n                <li className=\"\">\r\n                    <a className=\"bp3-menu-item\">\r\n                        <div className=\"bp3-text-overflow-ellipsis bp3-fill\">\r\n                            <span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('red'))}> 🟥</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('orange'))}> 🟧</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('yellow'))}> 🟨</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('green'))}> 🟩</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('blue'))}> 🟦</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('purple'))}> 🟪</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('brown'))}> 🟫</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('black'))}> ⬛</span>\r\n                                <span onClick={() => changeNodeColor(colorConverter('white'))}> ⬜</span>\r\n                            </span>\r\n                        </div>\r\n                    </a>\r\n                </li>\r\n                <li className=\"\">\r\n                    <a className=\"bp3-menu-item\">\r\n                        <div className=\"bp3-text-overflow-ellipsis bp3-fill\">\r\n                            <ControlGroup\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                }}\r\n                                fill={true}\r\n                                vertical={false}\r\n                            >\r\n                                <InputGroup\r\n                                    placeholder={currentColor}\r\n                                    value={color}\r\n                                    onChange={(e) => setColor(e.target.value)}\r\n                                />\r\n                                <Button\r\n                                    icon=\"style\"\r\n                                    onClick={() => {\r\n                                        changeNodeColor(color);\r\n                                        setColor('');\r\n                                    }}\r\n                                    disabled={color.match(/^#([0-9a-f]{3}){1,2}$/i) === null}\r\n                                ></Button>\r\n                            </ControlGroup>\r\n                        </div>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { Component } from 'react';\r\nimport { Stage, Layer } from 'react-konva';\r\nimport Konva from 'konva';\r\nimport dagre from 'dagre';\r\nimport Node from './VisualizerNode';\r\nimport Line from './VisualizerLine';\r\nimport Menu from './VisualizerMenu';\r\n\r\nimport {\r\n    NodeProps,\r\n    LineProps,\r\n    TreeNode,\r\n    CanvasPropsAndRedux,\r\n    NodeInterface,\r\n    ProofState,\r\n    ReduxState,\r\n} from '../../../interfaces/interfaces';\r\n\r\nimport '../../../scss/VisualizerCanvas.scss';\r\n\r\nimport { CanvasProps, CanvasState } from '../../../interfaces/interfaces';\r\nimport { connect } from 'react-redux';\r\nimport { selectProof, selectVisualInfo } from '../../../store/features/proof/proofSlice';\r\nimport {\r\n    hideNodes,\r\n    unhideNodes,\r\n    foldAllDescendants,\r\n    applyView,\r\n    setVisualInfo,\r\n} from '../../../store/features/proof/proofSlice';\r\nimport {\r\n    selectFindData,\r\n    findNode,\r\n    selectRenderData,\r\n    reRender,\r\n    addRenderCount,\r\n    blockRenderNewFile,\r\n} from '../../../store/features/externalCmd/externalCmd';\r\n\r\nconst nodeWidth = 300,\r\n    nodeHeight = 130;\r\n\r\nfunction handleWheel(e: Konva.KonvaEventObject<WheelEvent>): { stageScale: number; stageX: number; stageY: number } {\r\n    e.evt.preventDefault();\r\n\r\n    const scaleBy = 1.08;\r\n    const stage = e.target.getStage();\r\n    if (stage) {\r\n        const oldScale = stage.scaleX();\r\n        const pointerPosition = stage.getPointerPosition();\r\n        let x, y;\r\n\r\n        if (pointerPosition) {\r\n            [x, y] = [pointerPosition.x, pointerPosition.y];\r\n        } else {\r\n            [x, y] = [0, 0];\r\n        }\r\n\r\n        const mousePointTo = {\r\n            x: x / oldScale - stage.x() / oldScale,\r\n            y: y / oldScale - stage.y() / oldScale,\r\n        };\r\n\r\n        const newScale = e.evt.deltaY > 0 ? oldScale * scaleBy : oldScale / scaleBy;\r\n\r\n        return {\r\n            stageScale: newScale,\r\n            stageX: -(mousePointTo.x - x / newScale) * newScale,\r\n            stageY: -(mousePointTo.y - y / newScale) * newScale,\r\n        };\r\n    }\r\n    return {\r\n        stageScale: 1,\r\n        stageX: 0,\r\n        stageY: 0,\r\n    };\r\n}\r\n\r\nclass Canvas extends Component<CanvasPropsAndRedux, CanvasState> {\r\n    constructor(props: CanvasPropsAndRedux) {\r\n        super(props);\r\n        this.componentDidUpdate = this.componentDidUpdate.bind(this);\r\n        this.setNodeOnFocus = this.setNodeOnFocus.bind(this);\r\n\r\n        this.state = {\r\n            canvasSize: {\r\n                width: 520,\r\n                height: 300,\r\n            },\r\n            stage: {\r\n                stageScale: 1,\r\n                stageX: 0,\r\n                stageY: 0,\r\n            },\r\n            showingNodes: {},\r\n            showingEdges: {},\r\n            nodeOnFocus: NaN,\r\n            nodesSelected: [],\r\n            proof: [],\r\n            visualInfo: {},\r\n        };\r\n    }\r\n\r\n    static copyNodePosition = (\r\n        visualInfo: ProofState['visualInfo'],\r\n        showingNodes: CanvasState['showingNodes'],\r\n    ): ProofState['visualInfo'] => {\r\n        // Get the current position of the nodes and create a proofState with them included\r\n        const newVisualInfo: ProofState['visualInfo'] = {};\r\n        Object.keys(visualInfo).forEach((id) => {\r\n            const key = Number(id);\r\n\r\n            if (showingNodes[key]) {\r\n                newVisualInfo[key] = {\r\n                    ...visualInfo[key],\r\n                    x: showingNodes[key].props.x,\r\n                    y: showingNodes[key].props.y,\r\n                };\r\n            } else {\r\n                newVisualInfo[key] = {\r\n                    ...visualInfo[key],\r\n                };\r\n            }\r\n        });\r\n        return newVisualInfo;\r\n    };\r\n\r\n    static newNodeProps = (node: NodeInterface, visualInfos: ProofState['visualInfo']): NodeProps => {\r\n        const visualInfo = visualInfos[node.id];\r\n        return {\r\n            id: node.id,\r\n            conclusion: node.conclusion,\r\n            rule: node.rule,\r\n            args: node.args,\r\n            x: visualInfo.x,\r\n            y: visualInfo.y,\r\n            nHided: node.hiddenNodes ? node.hiddenNodes.length : 0,\r\n            nDescendants: node.descendants - 1,\r\n            hiddenNodes: node.hiddenNodes ? node.hiddenNodes.map((node) => node.id) : [],\r\n            dependencies: node.dependencies ? node.dependencies : [],\r\n            selected: visualInfo.selected,\r\n            color: visualInfo.color,\r\n            setNodeOnFocus: () => undefined,\r\n            toggleNodeSelection: () => undefined,\r\n            updateNodePosition: () => undefined,\r\n            openDrawer: () => undefined,\r\n            onDragEnd: () => undefined,\r\n            createTree: () => {\r\n                return [];\r\n            },\r\n        };\r\n    };\r\n\r\n    static getDerivedStateFromProps(props: CanvasPropsAndRedux, current_state: CanvasState) {\r\n        const proofChanged = JSON.stringify(current_state.proof) !== JSON.stringify(props.proof);\r\n        const visualInfoChanged = JSON.stringify(current_state.visualInfo) !== JSON.stringify(props.visualInfo);\r\n        const { nodeToFind, findOption } = props.nodeFindData;\r\n        const { count, fileChanged } = props.renderData;\r\n        const stage = current_state.stage;\r\n\r\n        // If there is a node to be found\r\n        if (nodeToFind > -1) {\r\n            // Is valid node\r\n            if (nodeToFind <= props.proof[props.proof.length - 1].id) {\r\n                // Change the stage position\r\n                const { x, y } = props.visualInfo[nodeToFind];\r\n                stage.stageX = current_state.canvasSize.width / 2 - (x + nodeWidth / 2) * stage.stageScale;\r\n                stage.stageY = current_state.canvasSize.height / 2 - (y + nodeHeight / 2) * stage.stageScale;\r\n\r\n                // Select the finded node\r\n                if (findOption) {\r\n                    props.setVisualInfo({\r\n                        ...props.visualInfo,\r\n                        [nodeToFind]: { ...props.visualInfo[nodeToFind], selected: true },\r\n                    });\r\n                }\r\n            }\r\n            // Reset the node finder\r\n            props.findNode({ nodeId: -1, option: false });\r\n        }\r\n\r\n        // If the proof or visual info changed or we have a new file being uploaded\r\n        if (proofChanged || visualInfoChanged || fileChanged) {\r\n            // Create the showing nodes array\r\n            const showingNodes: CanvasState['showingNodes'] = {};\r\n            props.proof.forEach((node, id) => {\r\n                showingNodes[node.id] = <Node key={id} {...Canvas.newNodeProps(node, props.visualInfo)} />;\r\n            });\r\n\r\n            // If has nodes and can render\r\n            if (showingNodes[0] && count < 2) {\r\n                props.addRenderCount();\r\n\r\n                const g = new dagre.graphlib.Graph();\r\n                g.setGraph({ rankdir: 'BT', ranker: 'tight-tree' });\r\n                g.setDefaultEdgeLabel(function () {\r\n                    return {};\r\n                });\r\n                props.proof.forEach((node) => {\r\n                    g.setNode(node.id.toString(), {\r\n                        width: nodeWidth + (node.dependencies.length ? 95 : 0),\r\n                        height: nodeHeight,\r\n                    });\r\n                    node.children.forEach((child) => {\r\n                        g.setEdge(child.toString(), node.id.toString());\r\n                    });\r\n                });\r\n                dagre.layout(g);\r\n\r\n                const xOffset = g.node('0').x - (showingNodes[0].props.x ? showingNodes[0].props.x : 0);\r\n                const yOffset = g.node('0').y - (showingNodes[0].props.y ? showingNodes[0].props.y : 0);\r\n                g.nodes().forEach((v) => {\r\n                    try {\r\n                        const { x, y } = g.node(v);\r\n                        const key = parseInt(v);\r\n                        showingNodes[key] = (\r\n                            <Node\r\n                                {...{\r\n                                    ...showingNodes[key].props,\r\n                                    x: x - xOffset,\r\n                                    y: y - yOffset,\r\n                                }}\r\n                            />\r\n                        );\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                });\r\n\r\n                props.setVisualInfo(Canvas.copyNodePosition(props.visualInfo, showingNodes));\r\n            }\r\n            // Reset the new file indicator if it's true\r\n            if (fileChanged) props.blockRenderNewFile();\r\n\r\n            return {\r\n                showingNodes: showingNodes,\r\n                showingEdges: {},\r\n                proof: props.proof,\r\n                visualInfo: props.visualInfo,\r\n                stage: stage,\r\n            };\r\n        }\r\n        return { stage: stage };\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        const { showingNodes } = this.state;\r\n        const { proof, visualInfo } = this.props;\r\n\r\n        const newShowingNodes: CanvasState['showingNodes'] = {};\r\n        proof.forEach((node, id) => {\r\n            newShowingNodes[node.id] = <Node key={id} {...Canvas.newNodeProps(node, visualInfo)} />;\r\n        });\r\n\r\n        this.setState({ proof: proof, showingNodes: newShowingNodes });\r\n\r\n        if (showingNodes[0]) {\r\n            const [width, height] = [window.innerWidth, window.innerHeight - 50];\r\n\r\n            // Make sure every time the Canvas is mounted the props are passed to the showing nodes\r\n            this.updateEdgesAndFuncs();\r\n\r\n            this.setState({\r\n                canvasSize: {\r\n                    width,\r\n                    height,\r\n                },\r\n                stage: {\r\n                    stageScale: 1,\r\n                    stageX: width / 2 - (showingNodes[0].props.x + 300 / 2),\r\n                    stageY: height / 10 - (showingNodes[0].props.y + 30 / 2),\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: CanvasPropsAndRedux) {\r\n        // If the proof changed\r\n        if (prevProps.proof !== this.props.proof) {\r\n            this.updateEdgesAndFuncs();\r\n        }\r\n    }\r\n\r\n    updateEdgesAndFuncs() {\r\n        const { showingNodes, showingEdges } = this.state;\r\n        const { proof } = this.props;\r\n\r\n        // Update edges\r\n        proof.forEach((node) => {\r\n            if (showingNodes[node.parents[0]]) {\r\n                node.parents.forEach((parent) => {\r\n                    showingEdges[`${node.id}->${parent}`] = Line(\r\n                        this.LineProps(\r\n                            `${node.id}->${parent}`,\r\n                            showingNodes[node.id].props,\r\n                            showingNodes[parent].props,\r\n                        ),\r\n                    );\r\n                });\r\n            }\r\n        });\r\n        Object.keys(showingNodes).forEach((nodeId: string) => {\r\n            // Make sure a function is updated once\r\n            if (!showingNodes[parseInt(nodeId)].props.setNodeOnFocus.length) {\r\n                const { openDrawer } = this.props;\r\n\r\n                // Set the node functions\r\n                showingNodes[parseInt(nodeId)] = (\r\n                    <Node\r\n                        {...{\r\n                            ...showingNodes[parseInt(nodeId)].props,\r\n                            setNodeOnFocus: this.setNodeOnFocus,\r\n                            toggleNodeSelection: this.toggleNodeSelection,\r\n                            updateNodePosition: this.updateNodePosition,\r\n                            openDrawer: openDrawer,\r\n                            onDragEnd: this.saveNodePosition,\r\n                            createTree: this.createTree,\r\n                        }}\r\n                    />\r\n                );\r\n            }\r\n        });\r\n        this.setState({ showingEdges, showingNodes });\r\n    }\r\n\r\n    /* NODE MENU ACTIONS */\r\n    foldAllDescendants = (): void => {\r\n        const { nodeOnFocus } = this.state;\r\n        const { foldAllDescendants, reRender } = this.props;\r\n\r\n        reRender();\r\n        foldAllDescendants(nodeOnFocus);\r\n        this.setState({ nodesSelected: [] });\r\n    };\r\n\r\n    foldSelectedNodes = (): void => {\r\n        const { nodesSelected } = this.state;\r\n        const { hideNodes, reRender } = this.props;\r\n\r\n        reRender();\r\n        hideNodes(nodesSelected);\r\n        this.setState({ nodesSelected: [] });\r\n    };\r\n\r\n    unfold = (): void => {\r\n        const { nodeOnFocus, proof } = this.state;\r\n        const { unhideNodes, reRender } = this.props;\r\n\r\n        // Get the pi node (to be unfold)\r\n        const obj = proof.find((node) => node.id === nodeOnFocus);\r\n        // Get the hidden nodes and their ids\r\n        const hiddenNodes = obj ? (obj.hiddenNodes ? obj.hiddenNodes : []) : [];\r\n        const hiddenIds = hiddenNodes ? hiddenNodes.map((node) => node.id) : [];\r\n\r\n        reRender();\r\n        unhideNodes({ pi: nodeOnFocus, hiddens: hiddenIds });\r\n\r\n        this.setState({ nodesSelected: [] });\r\n    };\r\n\r\n    changeNodeColor = (color: string): void => {\r\n        const { showingNodes, nodesSelected, nodeOnFocus } = this.state;\r\n        const { setVisualInfo } = this.props;\r\n        let { visualInfo } = this.props;\r\n\r\n        // Save the current position\r\n        nodesSelected.forEach((nodeId) => {\r\n            visualInfo = {\r\n                ...visualInfo,\r\n                [nodeId]: {\r\n                    ...visualInfo[nodeId],\r\n                    color: color,\r\n                    selected: false,\r\n                },\r\n            };\r\n        });\r\n        if (!nodesSelected.length && showingNodes[nodeOnFocus]) {\r\n            visualInfo = {\r\n                ...visualInfo,\r\n                [nodeOnFocus]: { ...visualInfo[nodeOnFocus], color: color, selected: false },\r\n            };\r\n        }\r\n\r\n        setVisualInfo(visualInfo);\r\n        this.setState({ nodesSelected: [] });\r\n    };\r\n\r\n    toggleNodeSelection = (id: number): void => {\r\n        let { nodesSelected } = this.state;\r\n        const { visualInfo, setVisualInfo } = this.props;\r\n\r\n        if (visualInfo[id].selected) {\r\n            nodesSelected = nodesSelected.filter((nodeId) => nodeId !== id);\r\n        } else {\r\n            nodesSelected.push(id);\r\n        }\r\n\r\n        // Save the current position\r\n        setVisualInfo({\r\n            ...visualInfo,\r\n            [id]: {\r\n                ...visualInfo[id],\r\n                selected: !visualInfo[id].selected,\r\n            },\r\n        });\r\n\r\n        this.setState({ nodesSelected });\r\n    };\r\n\r\n    /*TREE*/\r\n    createTree = (id: number): TreeNode[] => {\r\n        return this.props.createTree(this.state.proof, id);\r\n    };\r\n\r\n    /* UTILS */\r\n    setNodeOnFocus = (id: number): void => {\r\n        this.setState({ nodeOnFocus: id });\r\n    };\r\n\r\n    LineProps = (key: string, from: NodeProps, to: NodeProps): LineProps => ({\r\n        key,\r\n        points: [from.x + 150, from.y, to.x + 150, to.y + 105],\r\n    });\r\n\r\n    saveNodePosition = (): void => {\r\n        const { visualInfo, setVisualInfo } = this.props;\r\n        const { showingNodes } = this.state;\r\n\r\n        // Get the current position of the nodes and create a proofState with them included\r\n        setVisualInfo(Canvas.copyNodePosition(visualInfo, showingNodes));\r\n    };\r\n\r\n    updateNodePosition = (key: number, x: number, y: number): void => {\r\n        const { showingNodes, showingEdges } = this.state;\r\n\r\n        showingNodes[key] = <Node {...{ ...showingNodes[key].props, x, y }} />;\r\n\r\n        Object.keys(showingEdges)\r\n            .filter((edgeKey) => edgeKey.indexOf(key.toString()) !== -1)\r\n            .forEach((edge) => {\r\n                const [from, to] = edge.split('->').map((x) => parseInt(x));\r\n                showingEdges[edge] = Line(this.LineProps(edge, showingNodes[from].props, showingNodes[to].props));\r\n            });\r\n        this.setState({ showingNodes, showingEdges });\r\n    };\r\n\r\n    render(): JSX.Element {\r\n        const { canvasSize, stage, showingNodes, showingEdges, nodesSelected, nodeOnFocus, proof } = this.state;\r\n        const color = showingNodes[nodeOnFocus] ? showingNodes[nodeOnFocus].props.color : '';\r\n        const found = proof.find((o) => o.id === nodeOnFocus);\r\n\r\n        return (\r\n            <div>\r\n                <Menu\r\n                    unfold={this.unfold}\r\n                    foldSelectedNodes={this.foldSelectedNodes}\r\n                    foldAllDescendants={this.foldAllDescendants}\r\n                    changeNodeColor={this.changeNodeColor}\r\n                    options={{\r\n                        unfold: showingNodes[nodeOnFocus] ? Boolean(showingNodes[nodeOnFocus].props.nHided) : false,\r\n                        foldSelected: nodesSelected.length && nodesSelected.includes(nodeOnFocus) ? true : false,\r\n                        foldAllDescendants:\r\n                            Boolean(found?.children.length) && !Boolean(found?.hiddenNodes?.length) && found?.id != 0,\r\n                    }}\r\n                    currentColor={color}\r\n                ></Menu>\r\n                <Stage\r\n                    draggable\r\n                    onDragMove={() => null}\r\n                    onDragEnd={() => null}\r\n                    width={canvasSize.width}\r\n                    height={canvasSize.height}\r\n                    onWheel={(e) => this.setState({ stage: handleWheel(e) })}\r\n                    scaleX={stage.stageScale}\r\n                    scaleY={stage.stageScale}\r\n                    x={stage.stageX}\r\n                    y={stage.stageY}\r\n                    onContextMenu={(e) => e.evt.preventDefault()}\r\n                >\r\n                    <Layer>\r\n                        {Object.keys(showingEdges).length > 0 &&\r\n                            Object.keys(showingEdges).map(function (key) {\r\n                                return showingEdges[key];\r\n                            })}\r\n                        {Object.keys(showingNodes).length > 0 &&\r\n                            Object.keys(showingNodes).map(\r\n                                (value: string): JSX.Element => showingNodes[parseInt(value)],\r\n                            )}\r\n                    </Layer>\r\n                </Stage>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state: ReduxState, ownProps: CanvasProps) {\r\n    return {\r\n        visualInfo: selectVisualInfo(state),\r\n        nodeFindData: selectFindData(state),\r\n        renderData: selectRenderData(state),\r\n        ...ownProps,\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    hideNodes,\r\n    unhideNodes,\r\n    foldAllDescendants,\r\n    applyView,\r\n    setVisualInfo,\r\n    findNode,\r\n    reRender,\r\n    addRenderCount,\r\n    blockRenderNewFile,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\r\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, { useEffect, useReducer, useState } from 'react';\r\n\r\nimport { Classes, Tree, TreeNodeInfo } from '@blueprintjs/core';\r\nimport { TreeProps } from '../../interfaces/interfaces';\r\nimport { castProofNodeToTreeNode } from '../VisualizerStage/VisualizerStage';\r\n\r\nconst VisualizerTree: React.FC<TreeProps> = ({ darkTheme, proof, positionMap, content, setNodeInfo }: TreeProps) => {\r\n    // STATES:\r\n    const [, forceUpdate] = useReducer((x) => x + 1, 0);\r\n    const [nodes, setNodes] = useState(content);\r\n    const [selected, setSelected] = useState(NaN);\r\n\r\n    // USE EFFECT:\r\n    useEffect(() => setNodes(content), [content]);\r\n\r\n    // UTILS:\r\n    const forEachNode = (nodes: TreeNodeInfo[], callback: (node: TreeNodeInfo) => void) => {\r\n        if (nodes == null) {\r\n            return;\r\n        }\r\n\r\n        for (const node of nodes) {\r\n            callback(node);\r\n            forEachNode(node.childNodes ? node.childNodes : [], callback);\r\n        }\r\n    };\r\n\r\n    const handleNodeClick = (nodeData: any, _nodePath: number[], e: React.MouseEvent<HTMLElement>) => {\r\n        const toBeShow: any = selected !== nodeData.id ? nodeData : nodes[0];\r\n        setNodeInfo({\r\n            rule: toBeShow.rule ? toBeShow.rule : '',\r\n            args: toBeShow.args ? toBeShow.args : '',\r\n            conclusion: toBeShow.conclusion ? toBeShow.conclusion : '',\r\n            nHided: toBeShow.nHided ? toBeShow.nHided : 0,\r\n            nDescendants: toBeShow.descendants,\r\n            hiddenNodes: toBeShow.hiddenNodes,\r\n            dependencies: toBeShow.dependencies,\r\n        });\r\n        const originallySelected = nodeData.isSelected;\r\n\r\n        // Set all the nodes to be not selected\r\n        if (!e.shiftKey) forEachNode(nodes, (n) => (n.isSelected = false));\r\n\r\n        nodeData.isSelected = originallySelected == null ? true : !originallySelected;\r\n        setSelected(selected === nodeData.id ? NaN : nodeData.id);\r\n    };\r\n\r\n    const handleNodeCollapse = (nodeData: TreeNodeInfo) => {\r\n        nodeData.isExpanded = false;\r\n        forceUpdate();\r\n    };\r\n\r\n    const handleNodeExpand = (nodeData: TreeNodeInfo) => {\r\n        nodeData.isExpanded = true;\r\n        if (nodeData.hasCaret && !nodeData.childNodes?.length) {\r\n            const currentNode = proof[positionMap[nodeData.id]];\r\n            currentNode.children.forEach((c) => {\r\n                const child = proof[positionMap[c]];\r\n                nodeData.childNodes?.push(castProofNodeToTreeNode(child));\r\n            });\r\n        }\r\n        forceUpdate();\r\n    };\r\n\r\n    return (\r\n        <div style={{ backgroundColor: darkTheme ? '#394b59' : 'white' }}>\r\n            <Tree\r\n                contents={nodes}\r\n                onNodeClick={handleNodeClick}\r\n                onNodeCollapse={handleNodeCollapse}\r\n                onNodeExpand={handleNodeExpand}\r\n                className={Classes.ELEVATION_0}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisualizerTree;\r\n","interface Line {\r\n    value: string;\r\n    indentLevel: number;\r\n}\r\n\r\nclass Let {\r\n    name: string;\r\n    value: string;\r\n    lines: Line[];\r\n    biggerID: number;\r\n    isExpanded: boolean;\r\n    externalLets: { [key: string]: { let: Let; idx: number[] } };\r\n\r\n    constructor(name: string, letText: string, letsList: { [key: string]: Let }, indices: { [key: number]: string }) {\r\n        this.name = name;\r\n        this.value = letText;\r\n        this.lines = [{ value: letText, indentLevel: 0 }];\r\n        this.biggerID = 0;\r\n        this.isExpanded = false;\r\n\r\n        this.externalLets = {};\r\n        Object.keys(indices).forEach((key) => {\r\n            const numKey = Number(key);\r\n            const letName = indices[numKey];\r\n            this.externalLets[letName] = {\r\n                let: letsList[letName],\r\n                idx: this.externalLets[letName] ? [...this.externalLets[letName].idx, numKey] : [numKey],\r\n            };\r\n        });\r\n    }\r\n\r\n    getTextWidth = (text: string, font: string): number => {\r\n        const canvas = document.createElement('canvas');\r\n        const context = canvas.getContext('2d');\r\n        let size = 0;\r\n        if (context) {\r\n            context.font = font;\r\n            size = context.measureText(text).width;\r\n        }\r\n        return size;\r\n    };\r\n\r\n    expandValue = (shouldUpdate = false): string => {\r\n        const keyList = Object.keys(this.externalLets).map((key) => this.externalLets[key].let.name);\r\n        let letText = this.value;\r\n\r\n        // Iterate from the last to the first external let\r\n        for (let i = keyList.length - 1; i >= 0; i--) {\r\n            const letName = keyList[i];\r\n\r\n            // For each let, iterate through all the indexes they show up inside the string\r\n            for (let k = this.externalLets[letName].idx.length - 1; k >= 0; k--) {\r\n                const idx = this.externalLets[letName].idx[k];\r\n\r\n                // Expand all the terms\r\n                letText =\r\n                    letText.substring(0, idx) +\r\n                    this.externalLets[letName].let.expandValue() +\r\n                    letText.substring(idx + letName.length, letText.length);\r\n            }\r\n        }\r\n        if (shouldUpdate) {\r\n            this.lines = [{ value: letText, indentLevel: 0 }];\r\n            this.biggerID = 0;\r\n        }\r\n        return letText;\r\n    };\r\n\r\n    expandPartialy = (externalRef: Let, letIdx: number): string => {\r\n        const key = externalRef.name;\r\n        const indentedText = this.printLines();\r\n\r\n        let lastLine = 0,\r\n            count = 0,\r\n            i;\r\n        // Iterates through the first lines until the point we reach the changed line\r\n        for (i = 0; i < this.lines.length; i++) {\r\n            lastLine = this.lines[i].value.length + 4 * this.lines[i].indentLevel + 1;\r\n            count += lastLine;\r\n            if (letIdx < count) break;\r\n        }\r\n        // New index (points to the start of the line content (ignores initial indent white space))\r\n        const newIdx = letIdx - (count - lastLine + 4 * this.lines[i].indentLevel);\r\n\r\n        // Update the new line to the new content\r\n        this.lines[i].value =\r\n            this.lines[i].value.substring(0, newIdx) +\r\n            externalRef.value +\r\n            this.lines[i].value.substring(newIdx + key.length, this.lines[i].value.length);\r\n\r\n        // Returns the indented text with the content to be replaced\r\n        return (\r\n            indentedText.substring(0, letIdx) +\r\n            externalRef.value +\r\n            indentedText.substring(letIdx + key.length, indentedText.length)\r\n        );\r\n    };\r\n\r\n    shrinkValue = (): string => {\r\n        this.lines = [{ value: this.value, indentLevel: 0 }];\r\n        this.biggerID = 0;\r\n        return this.value;\r\n    };\r\n\r\n    fitsTheWindow = (windowSize: number, font: string): boolean => {\r\n        const line = this.lines[this.biggerID];\r\n        const size = this.getTextWidth(`${'    '.repeat(line.indentLevel)}${line.value}`, font);\r\n        return size < windowSize;\r\n    };\r\n\r\n    indent = (windowSize: number, mode: boolean, font: string): string => {\r\n        let someDoesntFit;\r\n        if (mode) someDoesntFit = true;\r\n        else someDoesntFit = this.getTextWidth(this.lines[this.biggerID].value, font) < windowSize ? false : true;\r\n\r\n        // While there are lines that doesn't fit the window size\r\n        while (someDoesntFit) {\r\n            const { lines, biggerID } = this;\r\n            const newLines: Line[] = [];\r\n            const thisLevel = lines[biggerID].indentLevel;\r\n            const thisLine = lines[biggerID].value;\r\n\r\n            let lastSpace = -1,\r\n                lastUsedSpace = -1,\r\n                lastOpenParenthesis = -1,\r\n                indent = lines[biggerID].indentLevel - 1,\r\n                biggestSize = 0,\r\n                newBiggerID = 0;\r\n\r\n            // Iterate through the line and calculate the indentation levels\r\n            for (let i = 0; i < thisLine.length; i++) {\r\n                const c = thisLine[i];\r\n                // Opening parenthesis\r\n                if (c === '(') {\r\n                    indent++;\r\n                    // If it's one of the arguments of the operation\r\n                    if (indent === thisLevel + 1) lastOpenParenthesis = i;\r\n                }\r\n                // Closing parenthesis\r\n                else if (c === ')') {\r\n                    // If it's the end of this line\r\n                    if (indent === thisLevel) {\r\n                        // If the last argument was not inserted\r\n                        if (thisLine[i - 1] !== ')') {\r\n                            newLines.push({\r\n                                value: thisLine.substring(lastSpace + 1, i),\r\n                                indentLevel: indent + 1,\r\n                            });\r\n                        }\r\n                        newLines.push({ value: ')', indentLevel: indent });\r\n                    }\r\n                    // If it's the end of this argument\r\n                    else if (indent === thisLevel + 1) {\r\n                        newLines.push({\r\n                            value: thisLine.substring(lastOpenParenthesis, i + 1),\r\n                            indentLevel: indent,\r\n                        });\r\n                    }\r\n                    indent--;\r\n                }\r\n                // If a new space is detected in the current identation level\r\n                //   and the last argument is not between parenthesis\r\n                else if (c === ' ') {\r\n                    lastSpace = i;\r\n\r\n                    if (indent === thisLevel) {\r\n                        if (thisLine[i - 1] !== ')') {\r\n                            newLines.push({\r\n                                value: thisLine.substring(lastUsedSpace + 1, i),\r\n                                indentLevel: newLines.length ? indent + 1 : indent,\r\n                            });\r\n                        }\r\n                        lastUsedSpace = i;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Insert new lines if happend some indentation\r\n            if (newLines.length > 0) this.lines.splice(biggerID, 1, ...newLines);\r\n\r\n            // Find the new biggest line\r\n            this.lines.forEach((line, id) => {\r\n                // Get the size of this new line\r\n                const thisSize = this.getTextWidth(`${'    '.repeat(line.indentLevel)}${line.value}`, font);\r\n                if (thisSize > biggestSize) {\r\n                    biggestSize = thisSize;\r\n                    newBiggerID = id;\r\n                }\r\n            });\r\n\r\n            this.biggerID = newBiggerID;\r\n\r\n            // If the biggest size fits the window or no new line was found (minimal indentation)\r\n            if (biggestSize < windowSize || newLines.length < 1) someDoesntFit = false;\r\n        }\r\n        return this.printLines();\r\n    };\r\n\r\n    groupUp = (): string => {\r\n        let original = '';\r\n        // Group up all the lines into one single string\r\n        this.lines.forEach((line, id, self) => {\r\n            original += line.value;\r\n            if (id < self.length - 1 && self[id + 1].value !== ')') {\r\n                original += ' ';\r\n            }\r\n        });\r\n        return original;\r\n    };\r\n\r\n    printLines = (): string => {\r\n        return this.lines.reduce((ac, line) => (ac += `${'    '.repeat(line.indentLevel)}${line.value}\\n`), '');\r\n    };\r\n}\r\n\r\nexport default Let;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { LetRenderProps } from '../../interfaces/interfaces';\r\nimport { renderLetKind } from '../../interfaces/enum';\r\nimport Let from './let';\r\nimport { Pre } from '@blueprintjs/core';\r\n\r\nconst font = '13px monospace';\r\n\r\nconst LetRender: React.FC<LetRenderProps> = ({\r\n    id,\r\n    toRender,\r\n    letMap,\r\n    shouldExpand,\r\n    shouldRevert,\r\n    dispatchExpansion,\r\n}: LetRenderProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const widthRef = useRef(0);\r\n    const [resizeMode, setResizeMode] = useState(0);\r\n    const [letMapS, setLetMapS] = useState(\r\n        (() => {\r\n            const newMap = { ...letMap };\r\n            if (toRender[0] !== '(' && toRender[toRender.length] !== ')') {\r\n                toRender = `(${toRender})`;\r\n            }\r\n            newMap['this'] = toRender;\r\n            return newMap;\r\n        })(),\r\n    );\r\n\r\n    const initializeLet = (key = 'this', lets: { [key: string]: Let } = {}) => {\r\n        const currentLet = letMapS[key];\r\n        const indices: { [key: number]: string } = {};\r\n\r\n        // Finds all occurences of let in the currentLet\r\n        [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n            if (match.index) indices[match.index] = match[0];\r\n        });\r\n\r\n        // Call recursive for all the external lets\r\n        Object.keys(indices).forEach((indice) => {\r\n            initializeLet(indices[Number(indice)], lets);\r\n        });\r\n\r\n        // If this let was not created yet\r\n        if (Object.keys(lets).indexOf(key) === -1) {\r\n            lets[key] = new Let(key, currentLet, lets, indices);\r\n        }\r\n\r\n        return lets;\r\n    };\r\n    const letsRef = useRef<{ [key: string]: Let }>(initializeLet());\r\n\r\n    // ComponentDidMount\r\n    useEffect(() => {\r\n        // Handler to call on window resize and set the value column width\r\n        function handleResize() {\r\n            const width = widthRef.current;\r\n\r\n            const newWidth = document.getElementsByClassName(`let-render-${id}`)[0].clientWidth - 30;\r\n            width === newWidth ? setResizeMode(1) : width > newWidth ? setResizeMode(0) : setResizeMode(2);\r\n\r\n            widthRef.current = newWidth;\r\n        }\r\n\r\n        // Add event listener\r\n        window.addEventListener('resize', handleResize);\r\n        // Call handler right away so state gets updated with initial window size\r\n        handleResize();\r\n\r\n        // Remove event listener on cleanup\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Expand\r\n        if (shouldExpand) {\r\n            expandAll('this');\r\n            dispatchExpansion({ type: renderLetKind.EXPAND, payload: false });\r\n        }\r\n        // Revert\r\n        else if (shouldRevert) {\r\n            revertLet('this');\r\n            dispatchExpansion({ type: renderLetKind.REVERT, payload: false });\r\n        }\r\n    }, [shouldExpand, shouldRevert]);\r\n\r\n    const expandLet = (parent: string, key: string, letIdx: number) => {\r\n        const lets = letsRef.current;\r\n\r\n        const externalRef = lets[key];\r\n        lets[parent].isExpanded = true;\r\n        letMapS[parent] = lets[parent].expandPartialy(externalRef, letIdx);\r\n        setLetMapS({ ...letMapS });\r\n    };\r\n\r\n    const expandAll = (key: string) => {\r\n        const lets = letsRef.current;\r\n\r\n        lets[key].isExpanded = true;\r\n        letMapS[key] = lets[key].expandValue(true);\r\n        setLetMapS({ ...letMapS });\r\n    };\r\n\r\n    const revertLet = (key: string) => {\r\n        const lets = letsRef.current;\r\n\r\n        // Only when is expanded\r\n        if (lets[key].isExpanded) {\r\n            lets[key].isExpanded = false;\r\n            letMapS[key] = lets[key].shrinkValue();\r\n            setLetMapS({ ...letMapS });\r\n        }\r\n    };\r\n\r\n    const renderLet = (): JSX.Element => {\r\n        const lets = letsRef.current;\r\n        const width = widthRef.current;\r\n        const key = 'this';\r\n\r\n        // Waits for the width to be updated and the DOM element to be updated\r\n        if (width) {\r\n            let currentLet = letMapS[key];\r\n            let indices: { [key: number]: string } = {};\r\n\r\n            // Finds all occurences of let in the currentLet\r\n            [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index !== undefined) indices[match.index] = match[0];\r\n            });\r\n\r\n            // If doesn't fits, then indent\r\n            if (!lets[key].fitsTheWindow(width, font)) {\r\n                currentLet = lets[key].indent(width, true, font);\r\n                letMapS[key] = currentLet;\r\n\r\n                indices = {};\r\n                // Finds all occurences of let in the currentLet after indentation\r\n                [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                    if (match.index) indices[match.index] = match[0];\r\n                });\r\n            }\r\n            // If fits\r\n            else {\r\n                // Only in the momment the page size is growing and the line is broken\r\n                if (resizeMode >= 0 && lets[key].lines.length > 1) {\r\n                    // Reset the line\r\n                    lets[key].lines = [\r\n                        { value: lets[key].isExpanded ? lets[key].groupUp() : lets[key].value, indentLevel: 0 },\r\n                    ];\r\n                    lets[key].biggerID = 0;\r\n\r\n                    // Indent it again\r\n                    currentLet = lets[key].indent(width, false, font);\r\n                    letMapS[key] = currentLet;\r\n\r\n                    indices = {};\r\n                    // Finds all occurences of let in the currentLet after indentation\r\n                    [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                        if (match.index) indices[match.index] = match[0];\r\n                    });\r\n                }\r\n            }\r\n\r\n            const arr: (JSX.Element | string)[] = [];\r\n            let start = 0;\r\n\r\n            // Slice the currentLet into an array with strings and JSX elements\r\n            Object.keys(indices).forEach((index, i, self) => {\r\n                const idx = Number(index);\r\n                const thisLet = indices[idx];\r\n\r\n                // Add the elements to the arr\r\n                arr.push(currentLet.substring(start, idx));\r\n                arr.push(\r\n                    <a\r\n                        className={darkTheme ? 'let-literal-or' : 'let-literal'}\r\n                        onClick={() => {\r\n                            expandLet(key, thisLet, idx);\r\n                        }}\r\n                    >\r\n                        {thisLet}\r\n                    </a>,\r\n                );\r\n                // Defines a new start\r\n                start = idx + thisLet.length;\r\n\r\n                // If it's the last let\r\n                if (i === self.length - 1) {\r\n                    arr.push(currentLet.substring(start, currentLet.length));\r\n                }\r\n            });\r\n\r\n            // If there is a let in this current let\r\n            if (Object.keys(indices).length) {\r\n                return (\r\n                    <span className=\"let-instance\" style={{ overflowWrap: 'break-word' }}>\r\n                        {arr}\r\n                    </span>\r\n                );\r\n            } else {\r\n                return (\r\n                    <span className=\"let-instance\" style={{ overflowWrap: 'break-word' }}>\r\n                        {currentLet}\r\n                    </span>\r\n                );\r\n            }\r\n        }\r\n        return <></>;\r\n    };\r\n\r\n    return (\r\n        <Pre\r\n            className={`let-render-${id}`}\r\n            style={{ maxHeight: '300px', overflow: 'auto', margin: '0', whiteSpace: 'pre-wrap' }}\r\n        >\r\n            {renderLet()}\r\n        </Pre>\r\n    );\r\n};\r\n\r\nexport default LetRender;\r\n","import React, { useState, useReducer, useEffect } from 'react';\r\n\r\nimport { Icon, Collapse, Pre } from '@blueprintjs/core';\r\n\r\nimport '../../../scss/VisualizerDirectoryStyle.scss';\r\nimport { useAppSelector } from '../../../store/hooks';\r\nimport { selectTheme } from '../../../store/features/theme/themeSlice';\r\nimport { NodeInfo, DirectoryStyleProps } from '../../../interfaces/interfaces';\r\nimport { drawerHelpersKind, renderLetKind } from '../../../interfaces/enum';\r\nimport VisualizerTree from '../../VisualizerTree/VisualizerTree';\r\nimport { selectLetMap, selectOriginalProof } from '../../../store/features/proof/proofSlice';\r\nimport LetRender from '../../VisualizerLetDrawer/LetRender';\r\n\r\nconst VisualizerDirectoryStyle: React.FC<DirectoryStyleProps> = ({\r\n    proofTree,\r\n    ruleHelper,\r\n    indent,\r\n    translate,\r\n}: DirectoryStyleProps) => {\r\n    const letMap = useAppSelector(selectLetMap);\r\n    const proof = useAppSelector(selectOriginalProof);\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const [nodeInfo, setNodeInfo] = useState<NodeInfo>({\r\n        rule: '',\r\n        args: '',\r\n        conclusion: '',\r\n        nHided: 0,\r\n        nDescendants: 0,\r\n        hiddenNodes: [],\r\n        dependencies: [],\r\n    });\r\n    const [[ruleHelperIsOpen, argsHelperIsOpen, concHelperIsOpen], dispatchHelper] = useReducer(\r\n        (state: boolean[], action: { type: drawerHelpersKind; payload: boolean }): boolean[] => {\r\n            const { type, payload } = action;\r\n\r\n            // Act over all the positions\r\n            if (type === drawerHelpersKind.ALL) {\r\n                for (let i = 0; i < state.length; i++) {\r\n                    state[i] = payload;\r\n                }\r\n            }\r\n            // If wanna set a position\r\n            else if (payload) {\r\n                // Reset everything and set the wanted\r\n                for (let i = 0; i < state.length; i++) {\r\n                    state[i] = i === type ? payload : false;\r\n                }\r\n            }\r\n            // If wanna only reset a position\r\n            else state[type] = payload;\r\n\r\n            return [...state];\r\n        },\r\n        // Rule, args, conclusion\r\n        [false, false, false],\r\n    );\r\n    const [[expandAll, revertAll], dispatchLetExpansion] = useReducer(\r\n        (state: boolean[], action: { type: renderLetKind; payload: boolean }): boolean[] => {\r\n            const { type, payload } = action;\r\n\r\n            for (let i = 0; i < state.length; i++) {\r\n                state[i] = i === type ? payload : false;\r\n            }\r\n\r\n            return [...state];\r\n        },\r\n        // Expand, revert\r\n        [false, false],\r\n    );\r\n    const [positionMap, setMap] = useState<any>({});\r\n    const [renderID, increaseRenderID] = useReducer((x) => x + 1, 0);\r\n\r\n    useEffect(() => {\r\n        const _map: any = {};\r\n        // Map the { [node id]: list array id }\r\n        proof.forEach((n, id) => (_map[n.id] = id));\r\n        setMap(_map);\r\n    }, [proof]);\r\n\r\n    useEffect(() => {\r\n        increaseRenderID();\r\n    }, [nodeInfo]);\r\n\r\n    const nodeInfoTable = () => {\r\n        return (\r\n            <table\r\n                id=\"table-node-info\"\r\n                className=\"bp3-html-table bp3-html-table-bordered bp3-html-table-condensed bp3-html-table-striped\"\r\n                style={{ width: '100%' }}\r\n            >\r\n                <thead>\r\n                    <tr>\r\n                        <th>Property</th>\r\n                        <th>Value</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <strong>RULE </strong>\r\n                            <Icon\r\n                                id=\"icon\"\r\n                                icon=\"help\"\r\n                                onClick={() => {\r\n                                    dispatchHelper({ type: drawerHelpersKind.RULE, payload: !ruleHelperIsOpen });\r\n                                }}\r\n                            ></Icon>\r\n                        </td>\r\n                        <td>\r\n                            {nodeInfo.rule}\r\n                            <Collapse isOpen={ruleHelperIsOpen}>\r\n                                <Pre style={{ maxHeight: '300px', overflow: 'auto' }} id=\"pre-rule\">\r\n                                    {ruleHelper(nodeInfo.rule)}\r\n                                </Pre>\r\n                            </Collapse>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {nodeInfo.args && (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>ARGS</strong>{' '}\r\n                                {nodeInfo.args.indexOf('let') !== -1 ? (\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"translate\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.ARGS,\r\n                                                payload: !argsHelperIsOpen,\r\n                                            });\r\n                                        }}\r\n                                    ></Icon>\r\n                                ) : null}\r\n                            </td>\r\n                            <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                                {nodeInfo.args}\r\n                                {nodeInfo.args.indexOf('let') !== -1 ? (\r\n                                    <Collapse isOpen={argsHelperIsOpen}>\r\n                                        <Pre style={{ maxHeight: '300px', overflow: 'auto' }} id=\"pre-rule\">\r\n                                            {indent(translate(nodeInfo.args))}\r\n                                        </Pre>\r\n                                    </Collapse>\r\n                                ) : null}\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n\r\n                    <tr>\r\n                        <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                            <strong>CONCLUSION</strong>{' '}\r\n                            {nodeInfo.conclusion.indexOf('let') !== -1 ? (\r\n                                <>\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"translate\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.CONC,\r\n                                                payload: !concHelperIsOpen,\r\n                                            });\r\n                                            dispatchLetExpansion({\r\n                                                type: renderLetKind.EXPAND,\r\n                                                payload: true,\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"undo\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.CONC,\r\n                                                payload: false,\r\n                                            });\r\n                                            dispatchLetExpansion({\r\n                                                type: renderLetKind.REVERT,\r\n                                                payload: true,\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                </>\r\n                            ) : null}\r\n                        </td>\r\n                        <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                            {nodeInfo.conclusion.indexOf('let') !== -1 ? (\r\n                                <LetRender\r\n                                    key={renderID}\r\n                                    id={0}\r\n                                    toRender={nodeInfo.conclusion}\r\n                                    letMap={letMap}\r\n                                    shouldExpand={expandAll}\r\n                                    shouldRevert={revertAll}\r\n                                    dispatchExpansion={dispatchLetExpansion}\r\n                                />\r\n                            ) : (\r\n                                nodeInfo.conclusion\r\n                            )}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {nodeInfo.nDescendants ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>#DESCENDANTS</strong>\r\n                            </td>\r\n                            <td>{nodeInfo.nDescendants}</td>\r\n                        </tr>\r\n                    ) : null}\r\n\r\n                    {nodeInfo.nHided ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>#HIDDEN</strong>\r\n                            </td>\r\n                            <td>{`[${nodeInfo.hiddenNodes.map((node) => ' ' + node)} ]`}</td>\r\n                        </tr>\r\n                    ) : null}\r\n                    {nodeInfo.dependencies.length ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>DEPENDENCIES</strong>\r\n                            </td>\r\n                            <td>{`${nodeInfo.dependencies.map(\r\n                                (dependency) => ` ${dependency.piId}: [${dependency.depsId.map((dep) => ' ' + dep)} ] `,\r\n                            )}`}</td>\r\n                        </tr>\r\n                    ) : null}\r\n                </tbody>\r\n            </table>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"dir-style\"\r\n            style={{\r\n                backgroundColor: darkTheme ? 'rgb(57, 75, 89)' : 'white',\r\n                height:\r\n                    window.innerHeight - (document.getElementsByClassName('bp3-navbar')[0] as HTMLElement).offsetHeight,\r\n            }}\r\n        >\r\n            <div\r\n                style={{\r\n                    width: '50%',\r\n                    height: '100%',\r\n                    float: 'left',\r\n                    clear: 'none',\r\n                    borderRight: '1px solid black',\r\n                    overflow: 'auto',\r\n                }}\r\n            >\r\n                <VisualizerTree\r\n                    darkTheme={darkTheme}\r\n                    proof={proof}\r\n                    positionMap={positionMap}\r\n                    content={proofTree}\r\n                    setNodeInfo={setNodeInfo}\r\n                ></VisualizerTree>\r\n            </div>\r\n            <div\r\n                style={{\r\n                    width: '50%',\r\n                    height: '100%',\r\n                    float: 'left',\r\n                    clear: 'none',\r\n                }}\r\n            >\r\n                {nodeInfoTable()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisualizerDirectoryStyle;\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, { useEffect, useReducer, useState } from 'react';\r\n\r\nimport { Drawer, Position, Classes, Icon, Collapse, Pre, TreeNodeInfo } from '@blueprintjs/core';\r\nimport Canvas from './Canvas/VisualizerCanvas';\r\nimport VisualizerTree from '../VisualizerTree/VisualizerTree';\r\nimport VisualizerDirectoryStyle from './VisualizerDirectoryStyle/VisualizerDirectoryStyle';\r\n\r\nimport '../../scss/VisualizerStage.scss';\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport { selectFileCount } from '../../store/features/file/fileSlice';\r\nimport { selectStyle, selectLetMap, selectProof } from '../../store/features/proof/proofSlice';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { NodeInfo, NodeInterface, TreeNode } from '../../interfaces/interfaces';\r\nimport { renderLetKind, drawerHelpersKind } from '../../interfaces/enum';\r\nimport LetRender from '../VisualizerLetDrawer/LetRender';\r\n\r\nfunction ruleHelper(rule: string) {\r\n    switch (rule.split(' ')[0]) {\r\n        case 'π':\r\n            return 'This node hides some parts of the proof, you can unfold it.';\r\n        case 'ASSUME':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Assumption (a leaf)\\nChildren: none\\nArguments: (F)\\n--------------\\nConclusion: F\\n\\nThis rule has special status, in that an application of assume is an open leaf in a proof that is not (yet) justified. An assume leaf is analogous to a free variable in a term, where we say \"F is a free assumption in proof P\" if it contains an application of F that is not  bound by SCOPE.'\r\n            );\r\n        case 'SCOPE':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Scope (a binder for assumptions)\\nChildren: (P:F)\\nArguments: (F1, ..., Fn)\\n--------------\\nConclusion: (=> (and F1 ... Fn) F) or (not (and F1 ... Fn)) if F is false\\n\\nThis rule has a dual purpose with ASSUME. It is a way to close assumptions in a proof. We require that F1 ... Fn are free assumptions in P and say that F1, ..., Fn are not free in (SCOPE P). In other words, they are bound by this application. For example, the proof node: (SCOPE (ASSUME F) :args F) has the conclusion (=> F F) and has no free assumptions. More generally, a proof with no free assumptions always concludes a valid formula.'\r\n            );\r\n        case 'SUBS':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Substitution\\nChildren: (P1:F1, ..., Pn:Fn)\\nArguments: (t, (ids)?)\\n---------------------------------------------------------------\\nConclusion: (= t t*sigma{ids}(Fn)*...*sigma{ids}(F1))\\nwhere sigma{ids}(Fi) are substitutions, which notice are applied in reverse order. Notice that ids is a MethodId identifier, which determines how to convert the formulas F1, ..., Fn into substitutions.'\r\n            );\r\n        case 'REWRITE':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Rewrite\\nChildren: none\\nArguments: (t, (idr)?)\\n----------------------------------------\\nConclusion: (= t Rewriter{idr}(t))\\nwhere idr is a MethodId identifier, which determines the kind of rewriter to apply, e.g. Rewriter::rewrite.'\r\n            );\r\n        case 'EVALUATE':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Evaluate\\nChildren: none\\n\\nArguments: (t)\\n----------------------------------------\\nConclusion: (= t Evaluator::evaluate(t))\\nNote this is equivalent to: (REWRITE t MethodId::RW_EVALUATE)'\r\n            );\r\n        case 'MACRO_SR_EQ_INTRO':\r\n            return (\r\n                rule +\r\n                \"\\n\\nIn this rule, we provide a term t and conclude that it is equal to its rewritten form under a (proven) substitution.\\n\\nChildren: (P1:F1, ..., Pn:Fn)\\nArguments: (t, (ids (ida (idr)?)?)?)\\n---------------------------------------------------------------\\nConclusion: (= t t')\\nwhere t' is Rewriter{idr}(t*sigma{ids, ida}(Fn)*...*sigma{ids, ida}(F1))\\n\\nIn other words, from the point of view of Skolem forms, this rule transforms t to t' by standard substitution + rewriting.\\n\\nThe arguments ids, ida and idr are optional and specify the identifier of the substitution, the substitution application and rewriter respectively to be used.\"\r\n            );\r\n        case 'MACRO_SR_PRED_INTRO':\r\n            return (\r\n                rule +\r\n                \"\\n\\nIn this rule, we provide a formula F and conclude it, under the condition that it rewrites to true under a proven substitution.\\n\\nChildren: (P1:F1, ..., Pn:Fn)\\nArguments: (F, (ids (ida (idr)?)?)?)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere Rewriter{idr}(F*sigma{ids, ida}(Fn)*...*sigma{ids, ida}(F1)) == true where ids and idr are method identifiers.\\n\\nMore generally, this rule also holds when: Rewriter::rewrite(toOriginal(F')) == true where F' is the result of the left hand side of the equality above. Here, notice that we apply rewriting on the original form of F', meaning that this rule may conclude an F whose Skolem form is justified by the definition of its (fresh) Skolem variables. For example, this rule may justify the conclusion (= k t) where k is the purification Skolem for t, e.g. where the original form of k is t.\\n\\nFurthermore, notice that the rewriting and substitution is applied only within the side condition, meaning the rewritten form of the original form of F does not escape this rule.\"\r\n            );\r\n        case 'MACRO_SR_PRED_ELIM':\r\n            return (\r\n                rule +\r\n                \"\\n\\nIn this rule, if we have proven a formula F, then we may conclude its rewritten form under a proven substitution.\\n\\nChildren: (P1:F, P2:F1, ..., P_{n+1}:Fn)\\nArguments: ((ids (ida (idr)?)?)?)\\n----------------------------------------\\nConclusion: F'\\nwhere F' is Rewriter{idr}(F*sigma{ids, ida}(Fn)*...*sigma{ids, ida}(F1)). where ids and idr are method identifiers.\\n\\nWe rewrite only on the Skolem form of F, similar to MACRO_SR_EQ_INTRO.\"\r\n            );\r\n        case 'MACRO_SR_PRED_TRANSFORM':\r\n            return (\r\n                rule +\r\n                \"\\n\\nIn this rule, if we have proven a formula F, then we may provide a formula G and conclude it if F and G are equivalent after rewriting under a proven substitution.\\n\\nChildren: (P1:F, P2:F1, ..., P_{n+1}:Fn)\\nArguments: (G, (ids (ida (idr)?)?)?)\\n----------------------------------------\\nConclusion: G\\nwhere Rewriter{idr}(F*sigma{ids, ida}(Fn)*...*sigma{ids, ida}(F1)) == Rewriter{idr}(G*sigma{ids, ida}(Fn)*...*sigma{ids, ida}(F1))\\n\\nMore generally, this rule also holds when:\\n  Rewriter::rewrite(toOriginal(F')) == Rewriter::rewrite(toOriginal(G'))\\nwhere F' and G' are the result of each side of the equation above. Here, original forms are used in a similar manner to MACRO_SR_PRED_INTRO above.\"\r\n            );\r\n        case 'REMOVE_TERM_FORMULA_AXIOM':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Remove Term Formulas Axiom\\nChildren: none\\nArguments: (t)\\n---------------------------------------------------------------\\nConclusion: RemoveTermFormulas::getAxiomFor(t).'\r\n            );\r\n        case 'THEORY_LEMMA':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Theory lemma\\nChildren: none\\nArguments: (F, tid)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is a (T-valid) theory lemma generated by theory with TheoryId tid. This is a \"coarse-grained\" rule that is used as a placeholder if a theory did not provide a proof for a lemma or conflict.'\r\n            );\r\n        case 'THEORY_REWRITE':\r\n            return (\r\n                rule +\r\n                \"\\n\\n======== Theory Rewrite\\nChildren: none\\nArguments: (F, tid, rid)\\n----------------------------------------\\nConclusion: F\\nwhere F is an equality of the form (= t t') where t' is obtained by applying the kind of rewriting given by the method identifier rid, which is one of: { RW_REWRITE_THEORY_PRE, RW_REWRITE_THEORY_POST, RW_REWRITE_EQ_EXT } Notice that the checker for this rule does not replay the rewrite to ensure correctness, since theory rewriter methods are not static. For example, the quantifiers rewriter involves constructing new bound variables that are not guaranteed to be consistent on each call.\"\r\n            );\r\n        case 'PREPROCESS':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality of the form t = t' where t was replaced by t' based on some preprocessing pass, or otherwise F was added as a new assertion by some preprocessing pass.\"\r\n            );\r\n        case 'PREPROCESS_LEMMA':\r\n            return (\r\n                rule +\r\n                '\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F was added as a new assertion by some preprocessing pass.'\r\n            );\r\n        case 'THEORY_PREPROCESS':\r\n            return (\r\n                rule +\r\n                '\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality of the form t = Theory::ppRewrite(t) for some theory. Notice this is a \"trusted\" rule.'\r\n            );\r\n        case 'THEORY_PREPROCESS_LEMMA':\r\n            return (\r\n                rule +\r\n                '\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F was added as a new assertion by theory preprocessing.'\r\n            );\r\n        case 'THEORY_EXPAND_DEF':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality of the form t = t' where t was replaced by t' based on theory expand definitions.\"\r\n            );\r\n        case 'WITNESS_AXIOM':\r\n            return (\r\n                rule +\r\n                '\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an existential (exists ((x T)) (P x)) used for introducing a witness term (witness ((x T)) (P x)).'\r\n            );\r\n        case 'TRUST_REWRITE':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality (= t t') that holds by a form of rewriting that could not be replayed during proof postprocessing.\"\r\n            );\r\n        case 'TRUST_SUBS':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality (= t t') that holds by a form of substitution that could not be replayed during proof postprocessing.\"\r\n            );\r\n        case 'TRUST_SUBS_MAP':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is an equality (= t t') that holds by a form of substitution that could not be determined by the TrustSubstitutionMap. This inference may contain possibly multiple children corresponding to the formulas used to derive the substitution.\"\r\n            );\r\n        case 'TRUST_SUBS_EQ':\r\n            return (\r\n                rule +\r\n                \"\\n\\nArguments: (F)\\n---------------------------------------------------------------\\nConclusion: F\\nwhere F is a solved equality of the form (= x t) derived as the solved form of F', where F' is given as a child.\"\r\n            );\r\n        case 'SAT_REFUTATION':\r\n            return (\r\n                rule +\r\n                '\\n\\n========= SAT Refutation for assumption-based unsat cores\\nChildren: (P1, ..., Pn)\\nArguments: none\\n---------------------\\nConclusion: false\\nNote: P1, ..., Pn correspond to the unsat core determined by the SAT solver.'\r\n            );\r\n        case 'RESOLUTION':\r\n            return (\r\n                rule +\r\n                \"\\n\\n======== Resolution\\nChildren:\\n(P1:C1, P2:C2)\\nArguments: (pol, L)\\n---------------------\\nConclusion: C\\nwhere\\n- C1 and C2 are nodes viewed as clauses, i.e., either an OR node with each children viewed as a literal or a node viewed as a literal. Note that an OR node could also be a literal.\\n- pol is either true or false, representing the polarity of the pivot on the first clause\\n- L is the pivot of the resolution, which occurs as is (resp. under a NOT) in C1 and negatively (as is) in C2 if pol = true (pol = false).\\nC is a clause resulting from collecting all the literals in C1, minus the first occurrence of the pivot or its negation, and C2, minus the first occurrence of the pivot or its negation, according to the policy above. If the resulting clause has a single literal, that literal itself is the result; if it has no literals, then the result is false; otherwise it's an OR node of the resulting literals.\\n\\nNote that it may be the case that the pivot does not occur in the clauses. In this case the rule is not unsound, but it does not correspond to resolution but rather to a weakening of the clause that did not have a literal eliminated.\"\r\n            );\r\n        case 'CHAIN_RESOLUTION':\r\n            return (\r\n                rule +\r\n                \"\\n\\n======== N-ary Resolution\\nChildren: (P1:C_1, ..., Pm:C_n)\\nArguments: (pol_1, L_1, ..., pol_{n-1}, L_{n-1})\\n---------------------\\nConclusion: C\\nwhere\\n- let C_1 ... C_n be nodes viewed as clauses, as defined above\\n- let \\\"C_1 <>_{L,pol} C_2\\\" represent the resolution of C_1 with C_2 with pivot L and polarity pol, as defined above\\n- let C_1' = C_1 (from P1),\\n- for each i > 1, let C_i' = C_{i-1} <>_{L_{i-1}, pol_{i-1}} C_i'\\nThe result of the chain resolution is C = C_n'\"\r\n            );\r\n        case 'FACTORING':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Factoring\\nChildren: (P:C1)\\nArguments: ()\\n---------------------\\nConclusion: C2\\nwhere Set representations of C1 and C2 is the same and the number of literals in C2 is smaller than that of C1'\r\n            );\r\n        case 'REORDERING':\r\n            return (\r\n                rule +\r\n                '\\n\\n======== Reordering\\nChildren: (P:C1)\\nArguments: (C2)\\n---------------------\\nConclusion: C2\\nwhere Set representations of C1 and C2 are the same and the number of literals in C2 is the same of that of C1'\r\n            );\r\n        case 'MACRO_RESOLUTION':\r\n            return (\r\n                rule +\r\n                \"\\n\\n======== N-ary Resolution + Factoring + Reordering\\nChildren: (P1:C_1, ..., Pm:C_n)\\nArguments: (C, pol_1, L_1, ..., pol_{n-1}, L_{n-1})\\n---------------------\\nConclusion: C\\nwhere\\n- let C_1 ... C_n be nodes viewed as clauses, as defined in RESOLUTION\\n- let \\\"C_1 <>_{L,pol} C_2\\\" represent the resolution of C_1 with C_2 with pivot L and polarity pol, as defined in RESOLUTION\\n- let C_1' be equal, in its set representation, to C_1 (from P1),\\n- for each i > 1, let C_i' be equal, it its set representation, to C_{i-1} <>_{L_{i-1}, pol_{i-1}} C_i'\\nThe result of the chain resolution is C, which is equal, in its set representation, to C_n'\"\r\n            );\r\n        case 'MACRO_RESOLUTION_TRUST':\r\n            return (\r\n                rule +\r\n                \"\\n\\nAs MACRO_RESOLUTION but not checked\\n\\nMACRO_RESOLUTION definition:\\n======== N-ary Resolution + Factoring + Reordering\\nChildren: (P1:C_1, ..., Pm:C_n)\\nArguments: (C, pol_1, L_1, ..., pol_{n-1}, L_{n-1})\\n---------------------\\nConclusion: C\\nwhere\\n- let C_1 ... C_n be nodes viewed as clauses, as defined in RESOLUTION\\n- let \\\"C_1 <>_{L,pol} C_2\\\" represent the resolution of C_1 with C_2 with pivot L and polarity pol, as defined in RESOLUTION\\n- let C_1' be equal, in its set representation, to C_1 (from P1),\\n- for each i > 1, let C_i' be equal, it its set representation, to C_{i-1} <>_{L_{i-1}, pol_{i-1}} C_i'\\nThe result of the chain resolution is C, which is equal, in its set representation, to C_n'\"\r\n            );\r\n        default:\r\n            return rule;\r\n    }\r\n}\r\n\r\nexport function castProofNodeToTreeNode(node: NodeInterface): TreeNode {\r\n    const label = node.hiddenNodes?.length\r\n        ? // Pi node\r\n          `${node.id} : π ➜ ${node.conclusion}`\r\n        : node.dependencies.length\r\n        ? // Node with dependencies\r\n          `${node.id} : β ➜ ${node.conclusion}`\r\n        : //Normal node\r\n          `${node.id} : ${node.conclusion}`;\r\n\r\n    // Create the node tree\r\n    return {\r\n        id: node.id,\r\n        icon: 'graph',\r\n        label: label,\r\n        secondaryLabel: `${node.rule}`,\r\n        rule: node.rule,\r\n        args: node.args,\r\n        conclusion: node.conclusion,\r\n        parentId: node.parents[0],\r\n        descendants: node.descendants - 1,\r\n        nHided: node.hiddenNodes ? node.hiddenNodes.length : 0,\r\n        hiddenNodes: node.hiddenNodes ? node.hiddenNodes.map((n) => n.id) : [],\r\n        childNodes: [],\r\n        dependencies: node.dependencies,\r\n        parentsId: node.parents,\r\n        hasCaret: Boolean(node.descendants - 1),\r\n    };\r\n}\r\n\r\nfunction createTree(proof: NodeInterface[], id: number): TreeNode[] {\r\n    const rootNode = proof.find((o) => o.id === id);\r\n    const tree: TreeNode[] = [];\r\n\r\n    // Make sure found the root node\r\n    if (rootNode) {\r\n        tree.push(castProofNodeToTreeNode(rootNode));\r\n    }\r\n    return tree;\r\n}\r\n\r\nconst VisualizerStage: React.FC = () => {\r\n    // Proof data\r\n    const letMap = useAppSelector(selectLetMap);\r\n    const proof = useAppSelector(selectProof);\r\n    const fileID = useAppSelector(selectFileCount);\r\n    const style = useAppSelector(selectStyle);\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    // Data structures\r\n    const [proofTree, setProofTree] = useState<TreeNodeInfo[]>([]);\r\n    const [nodeInfo, setNodeInfo] = useState<NodeInfo>({\r\n        rule: '',\r\n        args: '',\r\n        conclusion: '',\r\n        nHided: 0,\r\n        nDescendants: 0,\r\n        hiddenNodes: [],\r\n        dependencies: [],\r\n    });\r\n    const [map, setMap] = useState<any>({});\r\n    // Drawer\r\n    const [[ruleHelperIsOpen, argsHelperIsOpen, concHelperIsOpen], dispatchHelper] = useReducer(\r\n        (state: boolean[], action: { type: drawerHelpersKind; payload: boolean }): boolean[] => {\r\n            const { type, payload } = action;\r\n\r\n            // Act over all the positions\r\n            if (type === drawerHelpersKind.ALL) {\r\n                for (let i = 0; i < state.length; i++) {\r\n                    state[i] = payload;\r\n                }\r\n            }\r\n            // If wanna set a position\r\n            else if (payload) {\r\n                // Reset everything and set the wanted\r\n                for (let i = 0; i < state.length; i++) {\r\n                    state[i] = i === type ? payload : false;\r\n                }\r\n            }\r\n            // If wanna only reset a position\r\n            else state[type] = payload;\r\n\r\n            return [...state];\r\n        },\r\n        // Rule, args, conclusion\r\n        [false, false, false],\r\n    );\r\n    const [[expandAll, revertAll], dispatchLetExpansion] = useReducer(\r\n        (state: boolean[], action: { type: renderLetKind; payload: boolean }): boolean[] => {\r\n            const { type, payload } = action;\r\n\r\n            for (let i = 0; i < state.length; i++) {\r\n                state[i] = i === type ? payload : false;\r\n            }\r\n\r\n            return [...state];\r\n        },\r\n        // Expand, revert\r\n        [false, false],\r\n    );\r\n    const [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n    const [tree, setTree] = useState<TreeNodeInfo[]>([]);\r\n\r\n    // Make sure that a new tree is created only when a new dot is used\r\n    useEffect(() => setProofTree(createTree(proof, 0)), [fileID]);\r\n    useEffect(() => {\r\n        const _map: any = {};\r\n        // Map the { [node id]: list array id }\r\n        proof.forEach((n, id) => (_map[n.id] = id));\r\n        setMap(_map);\r\n    }, [proof]);\r\n\r\n    const openDrawer = (nodeInfo: NodeInfo, tree?: TreeNodeInfo[]) => {\r\n        setNodeInfo(nodeInfo);\r\n        setTree(tree ? tree : []);\r\n        setDrawerIsOpen(true);\r\n    };\r\n\r\n    const nodeInfoTable = (): JSX.Element => {\r\n        return (\r\n            <table\r\n                id=\"table-node-info\"\r\n                className=\"bp3-html-table bp3-html-table-bordered bp3-html-table-condensed bp3-html-table-striped\"\r\n                style={{ width: '100%' }}\r\n            >\r\n                <thead>\r\n                    <tr>\r\n                        <th>Property</th>\r\n                        <th>Value</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <strong>RULE </strong>\r\n                            <Icon\r\n                                id=\"icon\"\r\n                                icon=\"help\"\r\n                                onClick={() => {\r\n                                    dispatchHelper({ type: drawerHelpersKind.RULE, payload: !ruleHelperIsOpen });\r\n                                }}\r\n                            />\r\n                        </td>\r\n                        <td>\r\n                            {nodeInfo.rule}\r\n                            <Collapse isOpen={ruleHelperIsOpen}>\r\n                                <Pre style={{ maxHeight: '300px', overflow: 'auto' }} id=\"pre-rule\">\r\n                                    {ruleHelper(nodeInfo.rule)}\r\n                                </Pre>\r\n                            </Collapse>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {nodeInfo.args && (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>ARGS</strong>{' '}\r\n                                {nodeInfo.args.indexOf('let') !== -1 ? (\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"translate\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.ARGS,\r\n                                                payload: !argsHelperIsOpen,\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                ) : null}\r\n                            </td>\r\n                            <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                                {nodeInfo.args}\r\n                                {nodeInfo.args.indexOf('let') !== -1 ? (\r\n                                    <Collapse isOpen={argsHelperIsOpen}>\r\n                                        <Pre style={{ maxHeight: '300px', overflow: 'auto' }} id=\"pre-rule\">\r\n                                            {nodeInfo.args}\r\n                                        </Pre>\r\n                                    </Collapse>\r\n                                ) : null}\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n\r\n                    <tr>\r\n                        <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                            <strong>CONCLUSION</strong>{' '}\r\n                            {nodeInfo.conclusion.indexOf('let') !== -1 ? (\r\n                                <>\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"translate\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.CONC,\r\n                                                payload: !concHelperIsOpen,\r\n                                            });\r\n                                            dispatchLetExpansion({\r\n                                                type: renderLetKind.EXPAND,\r\n                                                payload: true,\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                    <Icon\r\n                                        id=\"icon\"\r\n                                        icon=\"undo\"\r\n                                        onClick={() => {\r\n                                            dispatchHelper({\r\n                                                type: drawerHelpersKind.CONC,\r\n                                                payload: false,\r\n                                            });\r\n                                            dispatchLetExpansion({\r\n                                                type: renderLetKind.REVERT,\r\n                                                payload: true,\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                </>\r\n                            ) : null}\r\n                        </td>\r\n                        <td style={{ maxHeight: '300px', overflow: 'auto' }}>\r\n                            {nodeInfo.conclusion.indexOf('let') !== -1 ? (\r\n                                <LetRender\r\n                                    id={0}\r\n                                    toRender={nodeInfo.conclusion}\r\n                                    letMap={letMap}\r\n                                    shouldExpand={expandAll}\r\n                                    shouldRevert={revertAll}\r\n                                    dispatchExpansion={dispatchLetExpansion}\r\n                                />\r\n                            ) : (\r\n                                nodeInfo.conclusion\r\n                            )}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {nodeInfo.nDescendants ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>#DESCENDANTS</strong>\r\n                            </td>\r\n                            <td>{nodeInfo.nDescendants}</td>\r\n                        </tr>\r\n                    ) : null}\r\n\r\n                    {nodeInfo.nHided ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>#HIDDEN</strong>\r\n                            </td>\r\n                            <td>{`[${nodeInfo.hiddenNodes.map((node) => ' ' + node)} ]`}</td>\r\n                        </tr>\r\n                    ) : null}\r\n                    {nodeInfo.dependencies.length ? (\r\n                        <tr>\r\n                            <td>\r\n                                <strong>DEPENDENCIES</strong>\r\n                            </td>\r\n                            <td>{`${nodeInfo.dependencies.map(\r\n                                (dependency) => ` ${dependency.piId}: [${dependency.depsId.map((dep) => ' ' + dep)} ] `,\r\n                            )}`}</td>\r\n                        </tr>\r\n                    ) : null}\r\n                </tbody>\r\n            </table>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div onContextMenu={(e) => e.preventDefault()}>\r\n            {proof.length > 1 && (\r\n                <>\r\n                    {style === 'graph' ? (\r\n                        <Canvas key={fileID} proof={proof} openDrawer={openDrawer} createTree={createTree} />\r\n                    ) : (\r\n                        <VisualizerDirectoryStyle\r\n                            proofTree={proofTree}\r\n                            ruleHelper={ruleHelper}\r\n                            indent={() => ''}\r\n                            translate={() => ''}\r\n                        />\r\n                    )}\r\n                    <Drawer\r\n                        className={darkTheme ? 'bp3-dark' : ''}\r\n                        autoFocus={true}\r\n                        canEscapeKeyClose={true}\r\n                        canOutsideClickClose={true}\r\n                        enforceFocus={true}\r\n                        hasBackdrop={false}\r\n                        isOpen={drawerIsOpen}\r\n                        position={Position.BOTTOM}\r\n                        usePortal={true}\r\n                        onClose={(e) => {\r\n                            e.preventDefault();\r\n                            setDrawerIsOpen(false);\r\n                            dispatchHelper({ type: drawerHelpersKind.ALL, payload: false });\r\n                        }}\r\n                        icon=\"info-sign\"\r\n                        title=\"Node info\"\r\n                    >\r\n                        <div className={Classes.DRAWER_BODY}>\r\n                            <div style={{ maxHeight: '500px', overflow: 'auto' }}>\r\n                                <VisualizerTree\r\n                                    darkTheme={darkTheme}\r\n                                    proof={proof}\r\n                                    positionMap={map}\r\n                                    content={tree}\r\n                                    setNodeInfo={setNodeInfo}\r\n                                />\r\n                            </div>\r\n                            <div className={Classes.DIALOG_BODY}>{nodeInfoTable()}</div>\r\n                        </div>\r\n                    </Drawer>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisualizerStage;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Classes } from '@blueprintjs/core';\r\n\r\nimport Let from './let';\r\nimport '../../scss/Let.scss';\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { selectLetMap } from '../../store/features/proof/proofSlice';\r\nimport { DrawerVisualizerTabProps } from '../../interfaces/interfaces';\r\n\r\nconst font =\r\n    '14px / 18px -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", Icons16, sans-serif';\r\n\r\nconst VisualizerLetDrawer: React.FC<DrawerVisualizerTabProps> = ({ shouldResize }: DrawerVisualizerTabProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const widthRef = useRef(0);\r\n    const [resizeMode, setResizeMode] = useState(0);\r\n\r\n    const [letMap, setLetMap] = useState({ ...useAppSelector(selectLetMap) });\r\n    const letsRef = useRef<{ [key: string]: Let }>({});\r\n\r\n    // Handler to call on window resize and set the value column width\r\n    function handleResize() {\r\n        const width = widthRef.current;\r\n\r\n        // -22 from the fixed padding size\r\n        const newWidth = document.getElementsByClassName('letMap-value-column')[0].clientWidth - 24;\r\n        width === newWidth ? setResizeMode(1) : width > newWidth ? setResizeMode(0) : setResizeMode(2);\r\n\r\n        widthRef.current = newWidth;\r\n    }\r\n\r\n    // ComponentDidMount\r\n    useEffect(() => {\r\n        // Add event listener\r\n        window.addEventListener('resize', handleResize);\r\n        // Call handler right away so state gets updated with initial window size\r\n        handleResize();\r\n\r\n        // Init the let ref\r\n        Object.keys(letMap).forEach((key) => {\r\n            const currentLet = letMap[key];\r\n            const indices: { [key: number]: string } = {};\r\n            // Finds all occurences of let in the currentLet\r\n            [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index) indices[match.index] = match[0];\r\n            });\r\n\r\n            letsRef.current[key] = new Let(key, currentLet, letsRef.current, indices);\r\n        });\r\n\r\n        // Remove event listener on cleanup\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        handleResize();\r\n    }, [shouldResize]);\r\n\r\n    const expandLet = (parent: string, key: string, letIdx: number) => {\r\n        const lets = letsRef.current;\r\n\r\n        const externalRef = lets[key];\r\n        lets[parent].isExpanded = true;\r\n        letMap[parent] = lets[parent].expandPartialy(externalRef, letIdx);\r\n        setLetMap({ ...letMap });\r\n    };\r\n\r\n    const expandAll = (key: string) => {\r\n        const thisLet = letsRef.current[key];\r\n        thisLet.isExpanded = true;\r\n        letMap[key] = thisLet.expandValue(true);\r\n        setLetMap({ ...letMap });\r\n    };\r\n\r\n    const revertLet = (key: string) => {\r\n        const thisLet = letsRef.current[key];\r\n        // Only when is expanded\r\n        if (thisLet.isExpanded) {\r\n            thisLet.isExpanded = false;\r\n            letMap[key] = thisLet.shrinkValue();\r\n            setLetMap({ ...letMap });\r\n        }\r\n    };\r\n\r\n    const renderLet = (key: string): JSX.Element => {\r\n        const lets = letsRef.current;\r\n        const width = widthRef.current;\r\n\r\n        // Waits for the width to be updated and the DOM element to be updated\r\n        if (width) {\r\n            let currentLet = letMap[key];\r\n            const thisLet = lets[key];\r\n\r\n            // If doesn't fits, then indent\r\n            if (!thisLet.fitsTheWindow(width, font)) {\r\n                currentLet = thisLet.indent(width, true, font);\r\n                letMap[key] = currentLet;\r\n            }\r\n            // If fits, then only in the momment the page size is growing and the line is broken\r\n            else if (resizeMode >= 0 && thisLet.lines.length > 1) {\r\n                // Reset the line\r\n                thisLet.lines = [{ value: thisLet.isExpanded ? thisLet.groupUp() : thisLet.value, indentLevel: 0 }];\r\n                thisLet.biggerID = 0;\r\n\r\n                // Indent it again\r\n                currentLet = thisLet.indent(width, false, font);\r\n                letMap[key] = currentLet;\r\n            }\r\n\r\n            // Finds all occurences of let in the currentLet\r\n            const indices: { [key: number]: string } = {};\r\n            [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index) indices[match.index] = match[0];\r\n            });\r\n\r\n            const arr: (JSX.Element | string)[] = [];\r\n            let start = 0;\r\n            // Slice the currentLet into an array with strings and JSX elements\r\n            Object.keys(indices).forEach((index, i, self) => {\r\n                const idx = Number(index);\r\n                const thisLet = indices[idx];\r\n\r\n                // Add the elements to the arr\r\n                arr.push(currentLet.substring(start, idx));\r\n                arr.push(\r\n                    <a\r\n                        className={darkTheme ? 'let-literal-or' : 'let-literal'}\r\n                        onClick={() => {\r\n                            expandLet(key, thisLet, idx);\r\n                        }}\r\n                    >\r\n                        {thisLet}\r\n                    </a>,\r\n                );\r\n                // Defines a new start\r\n                start = idx + thisLet.length;\r\n\r\n                // If it's the last let\r\n                if (i === self.length - 1) {\r\n                    arr.push(currentLet.substring(start, currentLet.length));\r\n                }\r\n            });\r\n\r\n            // If there is a let in this current let\r\n            if (Object.keys(indices).length) {\r\n                return <span className=\"let-instance\">{arr}</span>;\r\n            } else {\r\n                return <span className=\"let-instance\">{currentLet}</span>;\r\n            }\r\n        }\r\n        return <></>;\r\n    };\r\n\r\n    return (\r\n        <div className={Classes.DIALOG_BODY}>\r\n            <table\r\n                id=\"table-node-info-2\"\r\n                className=\"bp3-html-table bp3-html-table-bordered bp3-html-table-condensed bp3-html-table-striped\"\r\n                style={{ width: '100%' }}\r\n            >\r\n                <thead>\r\n                    <tr>\r\n                        <th style={{ width: '50px' }}>Property</th>\r\n                        <th className=\"letMap-value-column\">Value</th>\r\n                        <th style={{ width: '100px' }}>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {Object.keys(letMap).map((key, id) => {\r\n                        return (\r\n                            <tr key={id}>\r\n                                <td>\r\n                                    <strong>{key}</strong>\r\n                                </td>\r\n                                <td style={{ width: '100%', whiteSpace: 'pre-wrap' }}>{renderLet(key)}</td>\r\n                                <td style={{ width: '100px', height: '100%' }}>\r\n                                    <Button\r\n                                        onClick={() => expandAll(key)}\r\n                                        className=\"bp3-minimal\"\r\n                                        icon=\"translate\"\r\n                                        text=\"Expand\"\r\n                                    />\r\n                                    <Button\r\n                                        onClick={() => revertLet(key)}\r\n                                        className=\"bp3-minimal\"\r\n                                        icon=\"undo\"\r\n                                        text=\"Revert\"\r\n                                    />\r\n                                </td>\r\n                            </tr>\r\n                        );\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisualizerLetDrawer;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Classes } from '@blueprintjs/core';\r\nimport { selectLetMap, selectTheoryLemmas } from '../../store/features/proof/proofSlice';\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport Let from '../VisualizerLetDrawer/let';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { DrawerVisualizerTabProps } from '../../interfaces/interfaces';\r\n\r\nconst font =\r\n    '14px / 18px -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", Icons16, sans-serif';\r\n\r\nconst VisualizerTheoryLemma: React.FC<DrawerVisualizerTabProps> = ({ shouldResize }: DrawerVisualizerTabProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const letMap = useAppSelector(selectLetMap);\r\n    const widthRef = useRef(0);\r\n\r\n    const [theoryLemmas, setTheoryLemmas] = useState([...useAppSelector(selectTheoryLemmas)]);\r\n    const [resizeMode, setResizeMode] = useState(0);\r\n    const letsRef = useRef<{ [key: string]: Let }>({});\r\n\r\n    // Handler to call on window resize and set the value column width\r\n    function handleResize() {\r\n        const width = widthRef.current;\r\n\r\n        // -22 from the fixed padding size\r\n        const newWidth = document.getElementsByClassName('theoryLemma-value-column')[0].clientWidth - 24;\r\n        width === newWidth ? setResizeMode(1) : width > newWidth ? setResizeMode(0) : setResizeMode(2);\r\n\r\n        widthRef.current = newWidth;\r\n    }\r\n\r\n    // ComponentDidMount\r\n    useEffect(() => {\r\n        // Add event listener\r\n        window.addEventListener('resize', handleResize);\r\n        // Call handler right away so state gets updated with initial window size\r\n        handleResize();\r\n\r\n        // Init the lets\r\n        Object.keys(letMap).forEach((key) => {\r\n            const currentLet = letMap[key];\r\n\r\n            const indices: { [key: number]: string } = {};\r\n            // Finds all occurences of let in the currentLet\r\n            [...currentLet.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index) indices[match.index] = match[0];\r\n            });\r\n            letsRef.current[key] = new Let(key, currentLet, letsRef.current, indices);\r\n        });\r\n\r\n        // Init the theory lemmas\r\n        theoryLemmas.forEach((tl, id) => {\r\n            const indices: { [key: number]: string } = {};\r\n            // Finds all occurences of let in the currentTL\r\n            [...tl.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index) indices[match.index] = match[0];\r\n            });\r\n\r\n            letsRef.current[id] = new Let(String(id), tl, letsRef.current, indices);\r\n        });\r\n\r\n        // Remove event listener on cleanup\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        handleResize();\r\n    }, [shouldResize]);\r\n\r\n    const expandLet = (parent: number, key: string, letIdx: number) => {\r\n        const lets = letsRef.current;\r\n        const externalRef = lets[key];\r\n        lets[parent].isExpanded = true;\r\n        theoryLemmas[parent] = lets[parent].expandPartialy(externalRef, letIdx);\r\n        setTheoryLemmas([...theoryLemmas]);\r\n    };\r\n\r\n    const expandAll = (key: number) => {\r\n        const thisLet = letsRef.current[key];\r\n        thisLet.isExpanded = true;\r\n        theoryLemmas[key] = thisLet.expandValue(true);\r\n        setTheoryLemmas([...theoryLemmas]);\r\n    };\r\n\r\n    const revertLet = (key: number) => {\r\n        const thisLet = letsRef.current[key];\r\n        // Only when is expanded\r\n        if (thisLet.isExpanded) {\r\n            thisLet.isExpanded = false;\r\n            theoryLemmas[key] = thisLet.shrinkValue();\r\n            setTheoryLemmas([...theoryLemmas]);\r\n        }\r\n    };\r\n\r\n    const renderLet = (key: number): JSX.Element => {\r\n        const lets = letsRef.current;\r\n        const width = widthRef.current;\r\n\r\n        // Waits for the width to be updated and the DOM element to be updated\r\n        if (width) {\r\n            let currentTL = theoryLemmas[key];\r\n            const thisLet = lets[key];\r\n\r\n            // If doesn't fits, then indent\r\n            if (!thisLet.fitsTheWindow(width, font)) {\r\n                currentTL = thisLet.indent(width, true, font);\r\n                theoryLemmas[key] = currentTL;\r\n            }\r\n            // If fits, then only in the momment the page size is growing and the line is broken\r\n            else if (resizeMode >= 0 && thisLet.lines.length > 1) {\r\n                // Reset the line\r\n                thisLet.lines = [{ value: thisLet.isExpanded ? thisLet.groupUp() : thisLet.value, indentLevel: 0 }];\r\n                thisLet.biggerID = 0;\r\n\r\n                // Indent it again\r\n                currentTL = thisLet.indent(width, false, font);\r\n                theoryLemmas[key] = currentTL;\r\n            }\r\n\r\n            // Finds all occurences of let in the currentTL\r\n            const indices: { [key: number]: string } = {};\r\n            [...currentTL.matchAll(/let\\d+/g)].forEach((match) => {\r\n                if (match.index) indices[match.index] = match[0];\r\n            });\r\n\r\n            const arr: (JSX.Element | string)[] = [];\r\n            let start = 0;\r\n            // Slice the currentTL into an array with strings and JSX elements\r\n            Object.keys(indices).forEach((index, i, self) => {\r\n                const idx = Number(index);\r\n                const thisLet = indices[idx];\r\n\r\n                // Add the elements to the arr\r\n                arr.push(currentTL.substring(start, idx));\r\n                arr.push(\r\n                    <a\r\n                        className={darkTheme ? 'let-literal-or' : 'let-literal'}\r\n                        onClick={() => {\r\n                            expandLet(key, thisLet, idx);\r\n                        }}\r\n                    >\r\n                        {thisLet}\r\n                    </a>,\r\n                );\r\n                // Defines a new start\r\n                start = idx + thisLet.length;\r\n\r\n                // If it's the last let\r\n                if (i === self.length - 1) {\r\n                    arr.push(currentTL.substring(start, currentTL.length));\r\n                }\r\n            });\r\n\r\n            // If there is a let in this current let\r\n            if (Object.keys(indices).length) {\r\n                return <span className=\"let-instance\">{arr}</span>;\r\n            } else {\r\n                return <span className=\"let-instance\">{currentTL}</span>;\r\n            }\r\n        }\r\n        return <></>;\r\n    };\r\n\r\n    return (\r\n        <div className={Classes.DIALOG_BODY}>\r\n            <table\r\n                id=\"table-node-info-2\"\r\n                className=\"bp3-html-table bp3-html-table-bordered bp3-html-table-condensed bp3-html-table-striped\"\r\n                style={{ width: '100%', minWidth: '230px' }}\r\n            >\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"theoryLemma-value-column\">Value</th>\r\n                        <th style={{ width: '100px' }}>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {theoryLemmas.map((tl, id) => {\r\n                        return (\r\n                            <tr key={id}>\r\n                                <td style={{ width: '100%', whiteSpace: 'pre-wrap' }}>{renderLet(id)}</td>\r\n                                <td style={{ width: '100px', height: '100%' }}>\r\n                                    <Button\r\n                                        onClick={() => expandAll(id)}\r\n                                        className=\"bp3-minimal\"\r\n                                        icon=\"translate\"\r\n                                        text=\"Expand\"\r\n                                    />\r\n                                    <Button\r\n                                        onClick={() => revertLet(id)}\r\n                                        className=\"bp3-minimal\"\r\n                                        icon=\"undo\"\r\n                                        text=\"Revert\"\r\n                                    />\r\n                                </td>\r\n                            </tr>\r\n                        );\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VisualizerTheoryLemma;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport '../../scss/VisualizersDrawer.scss';\r\nimport { Drawer, Position, Classes, Tabs, Tab, Button } from '@blueprintjs/core';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { DrawerProps } from '../../interfaces/interfaces';\r\n\r\nimport { useAppSelector, useAppDispatch } from '../../store/hooks';\r\nimport { applyView, selectNodeClusters, selectNodes } from '../../store/features/proof/proofSlice';\r\nimport { reRender } from '../../store/features/externalCmd/externalCmd';\r\nimport VisualizerLetDrawer from '../VisualizerLetDrawer/VisualizerLetDrawer';\r\nimport VisualizerTheoryLemma from '../VisualizerTheoryLemma/VisualizerTheoryLemma';\r\nimport { ClusterKind } from '../../interfaces/enum';\r\n\r\nconst VisualizersDrawer: React.FC<DrawerProps> = ({ drawerIsOpen, setDrawerIsOpen }: DrawerProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const nodeClusters = useAppSelector(selectNodeClusters);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [tabID, setTabID] = useState('lm');\r\n    const [resizeFlag, setResizeFlag] = useState([false, false]);\r\n\r\n    useEffect(() => {\r\n        // When drawer is initialized it focus the escape button\r\n        const bt = document\r\n            .getElementsByClassName('visualizers-drawer')[0]\r\n            .getElementsByClassName('bp3-button')[0] as HTMLElement;\r\n        bt.tabIndex = 1;\r\n        bt.focus();\r\n    }, []);\r\n\r\n    const handleTabChange = (newTabId: string, _: any, e: any): void => {\r\n        setTabID(newTabId);\r\n        const newResizeFlag = [...resizeFlag];\r\n        if (newTabId === 'lm') newResizeFlag[0] = !newResizeFlag[0];\r\n        else if (newTabId === 'tl') newResizeFlag[1] = !newResizeFlag[1];\r\n        setResizeFlag(newResizeFlag);\r\n    };\r\n\r\n    const handleClusterClick = (type: ClusterKind): void => {\r\n        if (type === ClusterKind.NONE) {\r\n            dispatch(selectNodes(nodeClusters.reduce((acc: number[], c) => acc.concat(c.hiddenNodes), [])));\r\n        } else {\r\n            dispatch(\r\n                selectNodes(\r\n                    nodeClusters.reduce((acc: number[], c) => (c.type === type ? acc.concat(c.hiddenNodes) : acc), []),\r\n                ),\r\n            );\r\n        }\r\n    };\r\n\r\n    const menus = {\r\n        view: (\r\n            <div className={'view-infos ' + Classes.DIALOG_BODY}>\r\n                <div className=\"bts\">\r\n                    <Button\r\n                        text=\"Full\"\r\n                        onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                            e.preventDefault();\r\n                            dispatch(applyView('full'));\r\n                            dispatch(reRender());\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        text=\"Clustered\"\r\n                        onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                            e.preventDefault();\r\n                            dispatch(applyView('clustered'));\r\n                            dispatch(reRender());\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        text=\"Full and Colored\"\r\n                        onClick={(e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n                            e.preventDefault();\r\n                            dispatch(applyView('colored-full'));\r\n                            dispatch(reRender());\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div className=\"views-color-map\">\r\n                    <span onClick={() => handleClusterClick(ClusterKind.NONE)}>⬜ First Scope</span>\r\n                    <span onClick={() => handleClusterClick(ClusterKind.SAT)}>🟪 SAT</span>\r\n                    <span onClick={() => handleClusterClick(ClusterKind.CNF)}>🟨 CNF</span>\r\n                    <span onClick={() => handleClusterClick(ClusterKind.TL)}>🟩 Theory Lemma</span>\r\n                    <span onClick={() => handleClusterClick(ClusterKind.PP)}>🟫 Pre Processing</span>\r\n                    <span onClick={() => handleClusterClick(ClusterKind.IN)}>🟦 Input</span>\r\n                </div>\r\n            </div>\r\n        ),\r\n        letMap: <VisualizerLetDrawer shouldResize={resizeFlag[0]} />,\r\n        theoryLemma: <VisualizerTheoryLemma shouldResize={resizeFlag[1]} />,\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            className={`visualizers-drawer ${darkTheme ? 'bp3-dark' : ''}`}\r\n            style={{ maxHeight: '65%', width: '35%' }}\r\n            autoFocus={true}\r\n            canEscapeKeyClose={true}\r\n            canOutsideClickClose={false}\r\n            enforceFocus={false}\r\n            hasBackdrop={false}\r\n            isOpen={drawerIsOpen}\r\n            position={Position.RIGHT}\r\n            usePortal={false}\r\n            onClose={(e) => {\r\n                e.preventDefault();\r\n                setDrawerIsOpen(false);\r\n            }}\r\n            icon=\"applications\"\r\n            title=\"Visualizers\"\r\n        >\r\n            <div className={Classes.DRAWER_BODY}>\r\n                <Tabs id=\"services-tabs\" onChange={handleTabChange} selectedTabId={tabID}>\r\n                    <Tab id=\"vw\" title=\"View\" panel={menus['view']} className=\"services-tab\" />\r\n                    <Tab id=\"lm\" title=\"Let Map\" panel={menus['letMap']} className=\"services-tab\" />\r\n                    <Tab id=\"tl\" title=\"Theory Lemma\" panel={menus['theoryLemma']} className=\"services-tab\" />\r\n                </Tabs>\r\n            </div>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nexport default VisualizersDrawer;\r\n","import { Button, Divider } from '@blueprintjs/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { TutorialPopoverProps } from '../../interfaces/interfaces';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { useAppSelector } from '../../store/hooks';\r\n\r\nconst TutorialPopover: React.FC<TutorialPopoverProps> = ({\r\n    setIsOpen,\r\n    nextTutorial,\r\n    stage,\r\n    content,\r\n    W,\r\n    position,\r\n}: TutorialPopoverProps) => {\r\n    const [page, setPage] = useState(0);\r\n\r\n    const darkTheme = useAppSelector(selectTheme);\r\n\r\n    const renderPageBall = (): JSX.Element[] => {\r\n        return content.map((_, id) => (\r\n            <div key={id} className={`page-ball ${id === page && (darkTheme ? 'page-on' : 'page-on-light')}`} />\r\n        ));\r\n    };\r\n\r\n    const changePage = (type: string): void => {\r\n        if (type === '>') setPage(page + 1);\r\n        else setPage(page - 1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const parent = document.getElementsByClassName('tutorial-popover')[0];\r\n        // Set the focus\r\n        let bt = parent.getElementsByClassName('next-page progress');\r\n        if (!bt.length) {\r\n            bt = parent.getElementsByClassName('bp3-button');\r\n            // Make sure the next stage button will not be instantly clicked\r\n            setTimeout(() => (bt[bt.length - 1] as HTMLElement).focus(), 150);\r\n        } else {\r\n            (bt[0] as HTMLElement).focus();\r\n        }\r\n    }, [stage, page]);\r\n\r\n    useEffect(() => {\r\n        function handleEsc(e: KeyboardEvent): void {\r\n            e.stopPropagation();\r\n            if (e.key === 'Escape') {\r\n                setIsOpen(false);\r\n            }\r\n        }\r\n        window.addEventListener('keydown', handleEsc, false);\r\n\r\n        return () => {\r\n            window.removeEventListener('keydown', handleEsc, false);\r\n        };\r\n    }, []);\r\n\r\n    const insertAnchors = (text: string): (JSX.Element | string)[] => {\r\n        const list: (JSX.Element | string)[] = [];\r\n\r\n        let i = -1,\r\n            last = 0;\r\n        const positions = [0, 0, 0];\r\n        for (let j = 0; j < text.length; j++) {\r\n            if (text[j] === '\\0') {\r\n                i++;\r\n                positions[i] = j;\r\n            }\r\n            if (i === 2) {\r\n                list.push(text.substring(last, positions[0]));\r\n                const name = text.substring(positions[0] + 1, positions[1]);\r\n                const link = text.substring(positions[1] + 1, positions[2]);\r\n                list.push(\r\n                    <a href={link} target=\"_blank\" rel=\"noreferrer\">\r\n                        {name}\r\n                    </a>,\r\n                );\r\n\r\n                last = positions[2] + 1;\r\n                i = -1;\r\n            }\r\n        }\r\n        list.push(text.substring(last, text.length));\r\n\r\n        return list;\r\n    };\r\n\r\n    return (\r\n        <div className={darkTheme ? 'bp3-dark' : ''}>\r\n            <div\r\n                className=\"arrow-up\"\r\n                style={{\r\n                    left: position.tW,\r\n                    top: position.y - 7,\r\n                    borderBottomColor: darkTheme ? 'rgb(48, 65, 71)' : 'rgb(255,255,255)',\r\n                }}\r\n            />\r\n            <div\r\n                className=\"arrow-up arrow-2\"\r\n                style={{\r\n                    left: position.tW - 2,\r\n                    top: position.y - 9,\r\n                    borderBottomColor: darkTheme ? '#bdbdbd' : 'rgba(71, 64, 64, 0.281)',\r\n                }}\r\n            />\r\n            <div className=\"tutorial-popover bp3-dialog\" style={{ width: W, left: position.x, top: position.y }}>\r\n                <div className=\"bp3-dialog-header\">\r\n                    <div className=\"cur-page\">{renderPageBall()}</div>\r\n                    <Button icon=\"small-cross\" onClick={() => setIsOpen(false)} tabIndex={-1} />\r\n                </div>\r\n                <body>\r\n                    {page > 0 && (\r\n                        <button\r\n                            className=\"next-page regress\"\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                changePage('<');\r\n                            }}\r\n                        >\r\n                            {'<'}\r\n                        </button>\r\n                    )}\r\n                    <p className=\"content\">{stage ? content[page] : insertAnchors(content[page])}</p>\r\n                    {page < content.length - 1 && (\r\n                        <button\r\n                            className=\"next-page progress\"\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                changePage('>');\r\n                            }}\r\n                        >\r\n                            {'>'}\r\n                        </button>\r\n                    )}\r\n                </body>\r\n                {page === content.length - 1 && (\r\n                    <>\r\n                        <Divider style={{ backgroundColor: darkTheme ? 'white' : '' }} />\r\n                        <div className=\"bp3-dialog-footer\">\r\n                            <Button\r\n                                text=\"Next\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    nextTutorial();\r\n                                    setPage(0);\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TutorialPopover;\r\n","import { Portal } from '@blueprintjs/core';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { TutorialProps } from '../../interfaces/interfaces';\r\nimport '../../scss/Tutorial.scss';\r\nimport TutorialPopover from './TutorialPopover';\r\n\r\nconst W = 340;\r\nconst divsIds = [\r\n    'proof-visualizer-name',\r\n    'upload-proof-bt',\r\n    'examples-bt',\r\n    'input-smt-bt',\r\n    'file-name-title',\r\n    'command',\r\n    'style-bt',\r\n    'visualizers-bt',\r\n    'download-bt',\r\n    'switch-button-dark-theme',\r\n];\r\nconst tutorials: string[][] = [\r\n    [\r\n        'This website is a SMT solver proof visualizer. It was developed by \\0Vinícius Braga Freire\\0https://github.com/vinciusb\\0, \\0Diego Della Rocca\\0https://github.com/diegodrc\\0 and \\0Haniel Barbosa\\0https://homepages.dcc.ufmg.br/~hbarbosa/\\0. It was funded by AWS and the main SMT solver supported is CVC5.',\r\n    ],\r\n    [\r\n        'Here you can upload your proofs to be visualized.',\r\n        'The proofs can have the .dot or .json file extension.',\r\n        'The .json file is obtained in the download section.',\r\n    ],\r\n    ['Here you can visualize some examples of different proofs.'],\r\n    ['Here you can see the examples SMT code or insert your own SMT and run the CVC5 solver to generate a new proof.'],\r\n    ['This is the name of the current proof uploaded'],\r\n    [\r\n        'This is the command section. Here you can use some commands that will transform the proof, changing the way you comprehend it.',\r\n        \"Click in the '?' button to see a description of all commands available.\",\r\n    ],\r\n    [\r\n        'Here you can change the way the visualizer presents the proof.',\r\n        \"The graph style is the default and it's where the commands transformations happen.\",\r\n        \"In the directory style each proof node is a 'folder' and your children nodes are inside it.\",\r\n    ],\r\n    [\r\n        'Here you have access to 3 visualizers:',\r\n        'View: It allow you to change the way the proof nodes are visualized.',\r\n        'Let Map: Here you can see a map of all the LETS used inside the proofs. A let is a therm that shorten some expression (e.g.: let1 = (and A B))',\r\n        'Theory Lemma: It allow you to see all the theory lemmas in the proof.',\r\n    ],\r\n    [\r\n        'This section allow you to download the proof in different ways.',\r\n        '.DOT is the default format. It only holds informations about the proof structure and your clusters.',\r\n        '.JSON allow the user to save all the visual informations about the proof (i.e. the nodes positions, colors and foldings after any transformation applied) and your structural infos just like the .DOT.',\r\n        '.PNG prints the proof in the current state (i.e. includes all the transformations) into a image.',\r\n    ],\r\n    ['Allow to change between dark/light mode.'],\r\n];\r\n\r\n// panel stack\r\nconst VisualizerTutorial: React.FC<TutorialProps> = ({ inTutorial, setInTutorial }: TutorialProps) => {\r\n    const [stage, setStage] = useState(-1);\r\n    const [position, setPosition] = useState({ x: 0, y: 0, tW: 0 });\r\n    const sizeRef = useRef({ w: 0, h: 0 });\r\n\r\n    const increaseStage = () => {\r\n        if (stage < tutorials.length - 1) setStage(stage + 1);\r\n        else setInTutorial(false);\r\n    };\r\n\r\n    // ComponentDidMount\r\n    useEffect(() => {\r\n        // Handler to call on window resize and set the value column width\r\n        function handleResize() {\r\n            sizeRef.current.w = window.innerWidth;\r\n            sizeRef.current.h = window.innerHeight;\r\n        }\r\n\r\n        // Add event listener\r\n        window.addEventListener('resize', handleResize);\r\n        // Call handler right away so state gets updated with initial window size\r\n        handleResize();\r\n\r\n        // Remove event listener on cleanup\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (inTutorial) setStage(0);\r\n        else setStage(-1);\r\n    }, [inTutorial]);\r\n\r\n    useEffect(() => {\r\n        const toBeWrapped: HTMLElement | null = document.getElementById(divsIds[stage]);\r\n        if (toBeWrapped) {\r\n            const { x, y, width, height } = toBeWrapped.getClientRects()[0];\r\n            const newY = y + height;\r\n            let newX = x + width / 2;\r\n            const newTW = newX;\r\n            // Positioning in the beggining\r\n            if (newX < W) newX = 3;\r\n            // Positioning in the end\r\n            else if (newX + W / 2 > sizeRef.current.w) newX = sizeRef.current.w - W - 3;\r\n            // Positioning in the normal position\r\n            else newX -= W / 2;\r\n\r\n            setPosition({ x: newX, y: newY, tW: newTW });\r\n        }\r\n    }, [stage]);\r\n\r\n    return (\r\n        <Portal className={`tutorial-portal`}>\r\n            <div\r\n                className=\"bp3-overlay-enter-done\"\r\n                style={{\r\n                    width: sizeRef.current.w,\r\n                    height: sizeRef.current.h,\r\n                    pointerEvents: stage >= 0 ? 'auto' : 'none',\r\n                    backgroundColor: stage >= 0 ? 'rgba(87, 82, 82, 0.233)' : 'transparent',\r\n                }}\r\n            >\r\n                {stage >= 0 && (\r\n                    <TutorialPopover\r\n                        setIsOpen={setInTutorial}\r\n                        nextTutorial={increaseStage}\r\n                        stage={stage}\r\n                        content={tutorials[stage]}\r\n                        W={W}\r\n                        position={position}\r\n                    />\r\n                )}\r\n            </div>\r\n        </Portal>\r\n    );\r\n};\r\n\r\nexport default VisualizerTutorial;\r\n","import React, { useEffect, useReducer, useRef, useState } from 'react';\r\n\r\nimport MonacoEditor from '@monaco-editor/react';\r\nimport { Drawer, Position, Classes, Button, FormGroup, Switch, InputGroup } from '@blueprintjs/core';\r\nimport { Popover2 } from '@blueprintjs/popover2';\r\n\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport { SmtDrawerProps } from '../../interfaces/interfaces';\r\nimport { useAppDispatch, useAppSelector } from '../../store/hooks';\r\n\r\nimport { process, selectSmt, setSmt } from '../../store/features/proof/proofSlice';\r\nimport Module from '../../wasm/cvc5';\r\nimport { set } from '../../store/features/file/fileSlice';\r\nimport { allowRenderNewFile, reRender } from '../../store/features/externalCmd/externalCmd';\r\n\r\nimport '../../scss/VisualizerSmtDrawer.scss';\r\n\r\nconst VisualizerSmtDrawer: React.FC<SmtDrawerProps> = ({ isOpen, setDrawerIsOpen, addErrorToast }: SmtDrawerProps) => {\r\n    const darkTheme = useAppSelector(selectTheme);\r\n    const proofSmt = useAppSelector(selectSmt);\r\n\r\n    const stdoutRef = useRef('');\r\n    const stderrRef = useRef('');\r\n    const changeOutRef = useRef(false);\r\n\r\n    const [, forceUpdate] = useReducer((x) => x + 1, 0);\r\n    const [optionsIsOpen, setOptionsIsOpen] = useReducer((open) => !open, false);\r\n    const textRef = useRef(proofSmt + '\\n');\r\n    const [argsType, setArgsType] = useState(true);\r\n    const [[shouldClusterize, printAsDag], setDefaultOptions] = useState([true, true]);\r\n    const [customArgs, setCustomArgs] = useState('');\r\n    // The default arguments used in the proof generation\r\n    const defaultArgs = ['--dump-proofs', '--proof-format=dot', '--proof-granularity=theory-rewrite'];\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n        // When smt drawer is initialized it focus the escape button\r\n        const bt = document\r\n            .getElementsByClassName('smt-drawer')[0]\r\n            .getElementsByClassName('bp3-button')[0] as HTMLElement;\r\n        bt.tabIndex = 1;\r\n        bt.focus();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        textRef.current = proofSmt;\r\n        forceUpdate();\r\n    }, [proofSmt]);\r\n\r\n    useEffect(() => {\r\n        // If it's custom args\r\n        if (!argsType) {\r\n            // Copy the default args to the custom args, because the probability\r\n            // that the user will use one of these flags is high\r\n            let newArgs = defaultArgs.reduce((acc, arg) => (acc += arg + ' '), '');\r\n            if (shouldClusterize) newArgs += ' --print-dot-clusters';\r\n            if (printAsDag) newArgs += ' --proof-dot-dag';\r\n            setCustomArgs(newArgs);\r\n        }\r\n    }, [argsType]);\r\n\r\n    const options = {\r\n        theme: darkTheme ? 'vs-dark' : 'vs',\r\n        tabIndex: 5,\r\n    };\r\n\r\n    const divColor = darkTheme ? 'rgb(255, 255, 255, 0.15)' : 'rgb(0, 0, 0, 0.15)';\r\n\r\n    const helpDiv = (\r\n        <div\r\n            className={`bp3-menu ${darkTheme ? 'bp3-dark' : ''}`}\r\n            style={{\r\n                maxWidth: '200px',\r\n                padding: '5px 8px !important',\r\n                boxShadow: '0px 0px 15px rgba(0, 0, 0, 0.651)',\r\n                textAlign: 'justify',\r\n            }}\r\n        >\r\n            Look at{' '}\r\n            <a href=\"https://cvc5.github.io/docs/cvc5-1.0.0/\" target=\"_blank\" rel=\"noreferrer\">\r\n                CVC5 documentation\r\n            </a>{' '}\r\n            to understand more about the argument parser.\r\n        </div>\r\n    );\r\n\r\n    const defaultArgsDiv = (\r\n        <div id=\"helperDiv\" className={`bp3-menu ${darkTheme ? 'bp3-dark' : ''}`}>\r\n            Default arguments are:{' '}\r\n            {defaultArgs.reduce((acc: any, str: string) => {\r\n                return (acc += str + ' ');\r\n            }, '')}\r\n        </div>\r\n    );\r\n\r\n    const shouldClusterizeDiv = (\r\n        <div id=\"helperDiv\" className={`bp3-menu ${darkTheme ? 'bp3-dark' : ''}`}>\r\n            Whether the proof node clusters (e.g. SAT, CNF, INPUT) will be printed when using the dot format or not.\r\n        </div>\r\n    );\r\n\r\n    const printAsDagDiv = (\r\n        <div id=\"helperDiv\" className={`bp3-menu ${darkTheme ? 'bp3-dark' : ''}`}>\r\n            Indicates if the dot proof will be printed as a DAG or as a tree.\r\n        </div>\r\n    );\r\n\r\n    // Remove the cvc5> prompt message from the stdout\r\n    const sanitizeDotResult = (result: string): string => result.replaceAll(/(cvc5> )+/g, '');\r\n    const updateStdout = (str: string) => (stdoutRef.current += str + '\\n');\r\n    const updateStderr = (str: string) => (stderrRef.current += str + '\\n');\r\n    // Function called post the cvc5 execution\r\n    const postCVC5run = (isThereError: boolean) => {\r\n        // Sanitize the string\r\n        stdoutRef.current = sanitizeDotResult(stdoutRef.current).trim();\r\n        // If there was an error\r\n        if (isThereError && !stdoutRef.current.length) {\r\n            const err = stderrRef.current.length\r\n                ? stderrRef.current\r\n                : 'Error: Unknown error, check out the arguments parsed or the smt text.';\r\n            addErrorToast(err);\r\n        }\r\n        // Get the result .dot\r\n        else {\r\n            dispatch(set({ name: 'own-proof.dot', value: stdoutRef.current }));\r\n\r\n            dispatch(allowRenderNewFile());\r\n            dispatch(reRender());\r\n\r\n            dispatch(process(stdoutRef.current));\r\n        }\r\n    };\r\n    // Clean the output a single time during the cvc5 execution\r\n    const cleanStdout = () => {\r\n        if (!changeOutRef.current) {\r\n            stdoutRef.current = '';\r\n            changeOutRef.current = true;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            className={`smt-drawer ${darkTheme ? 'bp3-dark' : ''}`}\r\n            style={{ maxHeight: '65%', width: '35%' }}\r\n            autoFocus={true}\r\n            canEscapeKeyClose={true}\r\n            canOutsideClickClose={true}\r\n            enforceFocus={false}\r\n            hasBackdrop={false}\r\n            isOpen={isOpen}\r\n            position={Position.LEFT}\r\n            usePortal={false}\r\n            onClose={(e) => {\r\n                e.preventDefault();\r\n                setDrawerIsOpen();\r\n                // Save the smt\r\n                dispatch(setSmt(textRef.current));\r\n            }}\r\n            icon=\"applications\"\r\n            title=\"Visualizers\"\r\n        >\r\n            <div className={Classes.DRAWER_BODY} style={{ overflow: 'hidden' }}>\r\n                <MonacoEditor\r\n                    height={'300px'}\r\n                    language=\"graphql\"\r\n                    value={textRef.current}\r\n                    onChange={(value) => value !== undefined && (textRef.current = value)}\r\n                    onMount={() => forceUpdate()}\r\n                    options={options}\r\n                />\r\n                <div className={optionsIsOpen ? 'options-sec' : 'options-sec-open'}>\r\n                    <Switch\r\n                        label=\"Default args or custom args\"\r\n                        style={{ margin: '10px 20px' }}\r\n                        checked={argsType}\r\n                        onChange={() => setArgsType(!argsType)}\r\n                        tabIndex={4}\r\n                    />\r\n                    <FormGroup\r\n                        label={\r\n                            <div>\r\n                                Default args:{' '}\r\n                                <Popover2\r\n                                    disabled={!argsType}\r\n                                    content={defaultArgsDiv}\r\n                                    placement=\"auto\"\r\n                                    modifiers={{ arrow: { enabled: true } }}\r\n                                    hoverCloseDelay={200}\r\n                                    hoverOpenDelay={200}\r\n                                >\r\n                                    <Button disabled={!argsType} icon=\"help\" className=\"bp3-minimal\" tabIndex={4} />\r\n                                </Popover2>\r\n                            </div>\r\n                        }\r\n                        className=\"args-forms\"\r\n                        style={{ borderBottom: `1px solid ${divColor}`, borderTop: `1px solid ${divColor}` }}\r\n                        disabled={!argsType}\r\n                    >\r\n                        <div className=\"default-option-div\">\r\n                            <Switch\r\n                                label=\"Should clusterize proof\"\r\n                                disabled={!argsType}\r\n                                checked={shouldClusterize}\r\n                                onChange={() => setDefaultOptions([!shouldClusterize, printAsDag])}\r\n                                tabIndex={4}\r\n                            />\r\n                            <Popover2\r\n                                disabled={!argsType}\r\n                                content={shouldClusterizeDiv}\r\n                                placement=\"auto\"\r\n                                modifiers={{ arrow: { enabled: true } }}\r\n                                hoverCloseDelay={200}\r\n                                hoverOpenDelay={200}\r\n                            >\r\n                                <Button disabled={!argsType} icon=\"help\" className=\"bp3-minimal\" tabIndex={4} />\r\n                            </Popover2>\r\n                        </div>\r\n                        <div className=\"default-option-div\">\r\n                            <Switch\r\n                                label=\"Should print as tree or as DAG\"\r\n                                disabled={!argsType}\r\n                                checked={printAsDag}\r\n                                onChange={() => setDefaultOptions([shouldClusterize, !printAsDag])}\r\n                                tabIndex={4}\r\n                            />\r\n                            <Popover2\r\n                                disabled={!argsType}\r\n                                content={printAsDagDiv}\r\n                                placement=\"auto\"\r\n                                modifiers={{ arrow: { enabled: true } }}\r\n                                hoverCloseDelay={200}\r\n                                hoverOpenDelay={200}\r\n                            >\r\n                                <Button disabled={!argsType} icon=\"help\" className=\"bp3-minimal\" tabIndex={4} />\r\n                            </Popover2>\r\n                        </div>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Custom args\" className=\"args-forms\" disabled={argsType}>\r\n                        <InputGroup\r\n                            id=\"text-input\"\r\n                            placeholder=\"Placeholder text\"\r\n                            disabled={argsType}\r\n                            rightElement={\r\n                                <Popover2\r\n                                    disabled={argsType}\r\n                                    content={helpDiv}\r\n                                    placement=\"auto\"\r\n                                    modifiers={{ arrow: { enabled: true } }}\r\n                                    hoverCloseDelay={200}\r\n                                    hoverOpenDelay={200}\r\n                                >\r\n                                    <Button disabled={argsType} icon=\"help\" className=\"bp3-minimal\" tabIndex={4} />\r\n                                </Popover2>\r\n                            }\r\n                            value={customArgs}\r\n                            onChange={(e) => setCustomArgs(e.target.value)}\r\n                            tabIndex={4}\r\n                        />\r\n                    </FormGroup>\r\n                </div>\r\n                <footer\r\n                    style={{\r\n                        position: 'relative',\r\n                        borderTop: optionsIsOpen ? `solid 1px ${divColor}` : '',\r\n                    }}\r\n                >\r\n                    <Button\r\n                        style={{ float: 'left' }}\r\n                        className=\"bp3-minimal margin-5\"\r\n                        icon=\"more\"\r\n                        text=\"Options\"\r\n                        onClick={() => setOptionsIsOpen()}\r\n                        tabIndex={1}\r\n                    />\r\n                    <div style={{ float: 'right', display: 'flex' }}>\r\n                        <Button\r\n                            className=\"bp3-minimal margin-5\"\r\n                            icon=\"code\"\r\n                            text=\"Generate proof\"\r\n                            onClick={() => {\r\n                                dispatch(setSmt(textRef.current));\r\n\r\n                                let args = defaultArgs;\r\n                                // If is default args\r\n                                if (argsType) {\r\n                                    // Add the arguments selected by the user\r\n                                    if (shouldClusterize) args.push('--print-dot-clusters');\r\n                                    if (printAsDag) args.push('--proof-dot-dag');\r\n                                }\r\n                                // Custom args\r\n                                else {\r\n                                    // Split the arguments into an array\r\n                                    args = customArgs.split('--');\r\n                                    args = args\r\n                                        .map((arg) => arg.trim())\r\n                                        .filter((arg) => {\r\n                                            return arg.length !== 0;\r\n                                        })\r\n                                        .map((arg) => '--' + arg);\r\n\r\n                                    let i = 0;\r\n                                    // Make sure that the output format is .dot\r\n                                    const isThereFormat = args.some((arg, id) => {\r\n                                        i = id;\r\n                                        return arg.indexOf('--proof-format') !== -1;\r\n                                    });\r\n                                    // If there isn't a proof format\r\n                                    if (!isThereFormat) args.push('--proof-format=dot');\r\n                                    // Verify is the format is the correct one\r\n                                    else if (!args[i].match(/--proof-format\\s*=\\s*dot/)) {\r\n                                        args[i] = '--proof-format=dot';\r\n                                    }\r\n                                }\r\n\r\n                                // Reset the stdout and stderr before executing cvc5\r\n                                stdoutRef.current = '';\r\n                                stderrRef.current = '';\r\n                                changeOutRef.current = false;\r\n\r\n                                // Only calls web assembly when there is some text on the code editor\r\n                                if (textRef.current.trim().length) {\r\n                                    // Run cvc5\r\n                                    Module({\r\n                                        arguments: args,\r\n                                        proofTxt: textRef.current,\r\n                                        out: updateStdout,\r\n                                        err: updateStderr,\r\n                                        postCVC5: postCVC5run,\r\n                                        cleanStdout: cleanStdout,\r\n                                        binaryFileName: 'cvc5.wasm',\r\n                                    });\r\n                                }\r\n                                // There isn't text in the code editor\r\n                                else {\r\n                                    addErrorToast('Error: Empty proof in the code editor.');\r\n                                }\r\n                            }}\r\n                            tabIndex={3}\r\n                        />\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nexport default VisualizerSmtDrawer;\r\n","import React, { useEffect, useReducer, useState } from 'react';\r\n\r\nimport { Intent, Position, Toaster } from '@blueprintjs/core';\r\n\r\nimport VisualizerNavbar from '../VisualizerNavbar/VisualizerNavbar';\r\nimport VisualizerDialog from '../VisualizerDialog/VisualizerDialog';\r\nimport VisualizerStage from '../VisualizerStage/VisualizerStage';\r\nimport VisualizersDrawer from '../VisualizersDrawer/VisualizersDrawer';\r\n\r\nimport { useAppSelector } from '../../store/hooks';\r\nimport { selectTheme } from '../../store/features/theme/themeSlice';\r\nimport VisualizerTutorial from '../VisualizerTutorial/VisualizerTutorial';\r\nimport VisualizerSmtDrawer from '../VisualizerSmtDrawer/VisualizerSmtDrawer';\r\n\r\nconst App: React.FC = () => {\r\n    const [dialogIsOpen, setDialogIsOpen] = useState(true);\r\n    const [inTutorial, setInTutorial] = useState(false);\r\n    const [drawerIsOpen, setDrawerOpenState] = useReducer((isOpen) => !isOpen, false);\r\n    const [smtDrawerIsOpen, setSmtDrawerIsOpen] = useReducer((isOpen) => !isOpen, false);\r\n    const darkTheme = useAppSelector(selectTheme);\r\n\r\n    // Toaster\r\n    let toaster: Toaster;\r\n    const refHandlers = {\r\n        toaster: (ref: Toaster) => (toaster = ref),\r\n    };\r\n\r\n    const addErrorToast = (err: string) => {\r\n        toaster.show({ icon: 'warning-sign', intent: Intent.DANGER, message: err });\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.getElementsByClassName('bp3-overlay')[0]\r\n            ? (document.getElementsByClassName('bp3-overlay')[0].className = '')\r\n            : null;\r\n    }, [drawerIsOpen]);\r\n\r\n    return (\r\n        <div className={darkTheme ? ' bp3-dark' : ''} style={{ height: '100%' }}>\r\n            <VisualizerTutorial inTutorial={inTutorial} setInTutorial={setInTutorial} />\r\n            <Toaster position={Position.TOP} ref={refHandlers.toaster} />\r\n            <VisualizerNavbar\r\n                setDialogIsOpen={setDialogIsOpen}\r\n                setDrawerIsOpen={setDrawerOpenState}\r\n                addErrorToast={addErrorToast}\r\n                inTutorial={inTutorial}\r\n                setInTutorial={setInTutorial}\r\n                setSmtDrawerIsOpen={setSmtDrawerIsOpen}\r\n            />\r\n            <VisualizerDialog\r\n                dialogIsOpen={dialogIsOpen}\r\n                setDialogIsOpen={setDialogIsOpen}\r\n                addErrorToast={addErrorToast}\r\n            />\r\n            <VisualizerStage />\r\n            {drawerIsOpen ? (\r\n                <VisualizersDrawer drawerIsOpen={drawerIsOpen} setDrawerIsOpen={setDrawerOpenState}></VisualizersDrawer>\r\n            ) : null}\r\n            {smtDrawerIsOpen ? (\r\n                <VisualizerSmtDrawer\r\n                    isOpen={smtDrawerIsOpen}\r\n                    setDrawerIsOpen={setSmtDrawerIsOpen}\r\n                    addErrorToast={addErrorToast}\r\n                />\r\n            ) : null}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\r\nimport externalCmdReducer from './features/externalCmd/externalCmd';\r\nimport fileReducer from './features/file/fileSlice';\r\nimport proofReducer from './features/proof/proofSlice';\r\nimport themeReducer from './features/theme/themeSlice';\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        file: fileReducer,\r\n        proof: proofReducer,\r\n        theme: themeReducer,\r\n        externalCmd: externalCmdReducer,\r\n    },\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, Action<string>>;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n            getCLS(onPerfEntry);\r\n            getFID(onPerfEntry);\r\n            getFCP(onPerfEntry);\r\n            getLCP(onPerfEntry);\r\n            getTTFB(onPerfEntry);\r\n        });\r\n    }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport { store } from './store/store';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport './scss/index.scss';\r\n\r\nimport reportWebVitals from './ReactUtils/reportWebVitals';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}